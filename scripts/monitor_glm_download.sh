#!/bin/bash
# ะกะบัะธะฟั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะทะฐะณััะทะบะธ glm-4.7-flash

echo "๐ ะะพะฝะธัะพัะธะฝะณ ะทะฐะณััะทะบะธ glm-4.7-flash..."
echo "ะะฐะถะผะธัะต Ctrl+C ะดะปั ะพััะฐะฝะพะฒะบะธ"
echo ""

while true; do
    clear
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "๐ฅ ะกัะฐััั ะทะฐะณััะทะบะธ glm-4.7-flash"
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo ""
    
    # ะัะพะฒะตััะตะผ, ัััะฐะฝะพะฒะปะตะฝะฐ ะปะธ ะผะพะดะตะปั
    if ollama list | grep -q "glm-4.7-flash"; then
        echo "โ ะะะะะะฌ ะฃะกะขะะะะะะะะ!"
        echo ""
        ollama list | grep "glm-4.7-flash"
        echo ""
        echo "๐ ะะพะดะตะปั ะณะพัะพะฒะฐ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั!"
        echo ""
        echo "ะะพะฝัะธะณััะฐัะธั ัะถะต ะฝะฐัััะพะตะฝะฐ ะฒ:"
        echo "  - knowledge_os/app/local_router.py"
        echo "  - MODEL_MAP['coding'] = 'glm-4.7-flash'"
        echo "  - MODEL_MAP['reasoning'] = 'glm-4.7-flash'"
        exit 0
    fi
    
    # ะัะพะฒะตััะตะผ ะฟัะพัะตัั ะทะฐะณััะทะบะธ
    if ps aux | grep -q "[o]llama pull glm-4.7-flash"; then
        echo "โณ ะะฐะณััะทะบะฐ ะฒ ะฟัะพัะตััะต..."
        echo ""
        echo "ะะบัะธะฒะฝัะต ะฟัะพัะตััั:"
        ps aux | grep "[o]llama pull glm-4.7-flash" | grep -v grep | awk '{print "  PID:", $2, "| CPU:", $3"% | MEM:", $4"%"}'
        echo ""
        echo "๐ก ะะปั ะฟัะพัะผะพััะฐ ะดะตัะฐะปัะฝะพะณะพ ะฟัะพะณัะตััะฐ ะทะฐะฟัััะธัะต ะฒ ะพัะดะตะปัะฝะพะผ ัะตัะผะธะฝะฐะปะต:"
        echo "   ollama pull glm-4.7-flash"
    else
        echo "โ๏ธ  ะัะพัะตัั ะทะฐะณััะทะบะธ ะฝะต ะฝะฐะนะดะตะฝ"
        echo ""
        echo "ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั:"
        echo "  - ะะฐะณััะทะบะฐ ะทะฐะฒะตััะธะปะฐัั (ะฟัะพะฒะตัััะต: ollama list)"
        echo "  - ะะฐะณััะทะบะฐ ะฑัะปะฐ ะฟัะตัะฒะฐะฝะฐ"
        echo ""
        echo "ะะปั ะทะฐะฟััะบะฐ ะทะฐะณััะทะบะธ:"
        echo "  ollama pull glm-4.7-flash"
    fi
    
    echo ""
    echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
    echo "ะะฑะฝะพะฒะปะตะฝะธะต ัะตัะตะท 10 ัะตะบัะฝะด..."
    echo "ะัะตะผั: $(date '+%H:%M:%S')"
    sleep 10
done
