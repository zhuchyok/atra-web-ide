#!/bin/bash
# –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è Veronica: –∏–∑—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
# –ó–∞–ø—É—Å–∫–∞—Ç—å: bash scripts/ask_veronica_to_study_context.sh

VERONICA_URL="${VERONICA_URL:-http://192.168.1.64:8011}"

echo "üìö –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á–∏ Veronica: –∏–∑—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏"
echo ""

GOAL="–ü—Ä–æ—á–∏—Ç–∞–π —Ñ–∞–π–ª CHAT_CONTEXT_FOR_VERONICA.md –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ atra-web-ide. –ò–∑—É—á–∏ –≤–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å MacBook –Ω–∞ Mac Studio. –ó–∞–ø–æ–º–Ω–∏ –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã: Mac Studio IP 192.168.1.64, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å bikos, –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã. –ë—É–¥—å –≥–æ—Ç–æ–≤–∞ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –º–∏–≥—Ä–∞—Ü–∏–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö, —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–π Extended Thinking –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ Collective Memory."

echo "üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞—á–∏..."
echo "   (—ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-5 –º–∏–Ω—É—Ç...)"
echo ""

RESPONSE=$(curl -s -X POST "${VERONICA_URL}/run" \
    -H "Content-Type: application/json" \
    -d "{\"goal\": \"${GOAL}\", \"max_steps\": 30}" \
    --max-time 300)

if echo "$RESPONSE" | grep -q '"status"'; then
    echo "‚úÖ –ó–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"
    echo ""
    echo "üìã –û—Ç–≤–µ—Ç Veronica:"
    echo "$RESPONSE" | python3 -m json.tool 2>/dev/null || echo "$RESPONSE"
else
    echo "‚ö†Ô∏è  –û—Ç–≤–µ—Ç:"
    echo "$RESPONSE"
    echo ""
    echo "üí° Veronica –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–Ω—è—Ç–∞. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏."
fi
