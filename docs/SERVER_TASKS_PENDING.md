# üñ•Ô∏è –ó–ê–î–ê–ß–ò –î–õ–Ø –°–ï–†–í–ï–†–ê MAC STUDIO

**–î–∞—Ç–∞:** 2026-01-21  
**–§–æ–∫—É—Å:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## ‚úÖ –£–ñ–ï –°–î–ï–õ–ê–ù–û

1. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –±—ç–∫–∞–ø–æ–≤ Knowledge OS**
   - –õ–æ–∫–∞–ª—å–Ω—ã–µ –±—ç–∫–∞–ø—ã (03:00, launchd)
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ Google Drive (03:10, cron)
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è (04:00, cron)
   - DR-—Ç–µ—Å—Ç—ã

2. ‚úÖ **Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - docker-compose.yml –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã

3. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤**
   - Nightly Learner –Ω–∞—Å—Ç—Ä–æ–µ–Ω (Redis, MLX URL)
   - Victoria –∏ Veronica –≥–æ—Ç–æ–≤—ã

---

## üî• –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–ï –ó–ê–î–ê–ß–ò

### 1. **–ú–ò–ì–†–ê–¶–ò–Ø –î–ê–ù–ù–´–• –° –í–ù–ï–®–ù–ï–ì–û –°–ï–†–í–ï–†–ê** üî•üî•üî•
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ú–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö Knowledge OS —Å —Å–µ—Ä–≤–µ—Ä–∞ `185.177.216.15`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Mac Studio

**–°–∫—Ä–∏–ø—Ç:** `scripts/migration/migrate_to_mac_studio.py`

**–®–∞–≥–∏:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@185.177.216.15

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
# (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)

# 3. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏
python3 scripts/migration/migrate_to_mac_studio.py

# 4. –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
python3 scripts/verify_migration.py
```

---

### 2. **–ù–ê–°–¢–†–û–ô–ö–ê GRAFANA –î–ê–®–ë–û–†–î–û–í** üî•üî•
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (–µ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –Ω–æ –¥–∞—à–±–æ—Ä–¥—ã –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
  - Knowledge OS –º–µ—Ç—Ä–∏–∫–∏
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π MLX
  - –°—Ç–∞—Ç—É—Å –∞–≥–µ–Ω—Ç–æ–≤ (Victoria, Veronica, Nightly)
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫)
  - –°—Ç–∞—Ç—É—Å –±—ç–∫–∞–ø–æ–≤

**–§–∞–π–ª—ã:**
- `knowledge_os/dashboard/grafana_dashboard.json` - –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
- `infrastructure/monitoring/prometheus.yml` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏

**–®–∞–≥–∏:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Prometheus –º–µ—Ç—Ä–∏–∫
curl http://localhost:9090/api/v1/targets

# 2. –ò–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–æ–≤ –≤ Grafana
# –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000
# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –∏–∑ knowledge_os/dashboard/
```

---

### 3. **–ù–ê–°–¢–†–û–ô–ö–ê –ê–õ–ï–†–¢–û–í** üî•üî•
**–°—Ç–∞—Ç—É—Å:** ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ê–ª–µ—Ä—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π:
  - –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (Knowledge OS API, MLX Server)
  - –ë—ç–∫–∞–ø –Ω–µ —Å–æ–∑–¥–∞–ª—Å—è
  - –î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω (>80%)
  - –ê–≥–µ–Ω—Ç —É–ø–∞–ª (Victoria, Veronica, Nightly)
  - –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö

**–ì–¥–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:**
- Prometheus Alertmanager
- –ò–ª–∏ –ø—Ä–æ—Å—Ç—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (Telegram, email)

---

### 4. **–ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´ –í–°–ï–• –°–ï–†–í–ò–°–û–í** üî•
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ Knowledge OS API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Knowledge OS Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏
- ‚úÖ Victoria Agent —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Veronica Agent —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Nightly Learner —Ä–∞–±–æ—Ç–∞–µ—Ç (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- ‚úÖ MLX API Server –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ Grafana –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–°–∫—Ä–∏–ø—Ç:** `scripts/check_all_services.sh` (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# Health checks
curl http://localhost:8000/health
curl http://localhost:11434/
curl http://localhost:9090/-/healthy
curl http://localhost:3000/api/health

# –õ–æ–≥–∏ –∞–≥–µ–Ω—Ç–æ–≤
docker-compose logs victoria-agent --tail=50
docker-compose logs veronica-agent --tail=50
docker-compose logs nightly-learner --tail=50
```

---

### 5. **–ù–ê–°–¢–†–û–ô–ö–ê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–• –ó–ê–î–ê–ß** üî•
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ (–±—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- ‚úÖ –ë—ç–∫–∞–ø—ã Knowledge OS (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- ‚ö†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —É–ø–∞–≤—à–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Docker restart policies)
- ‚ö†Ô∏è –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
- ‚ö†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞
- ‚ö†Ô∏è –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**Docker restart policies:**
```yaml
# –í docker-compose.yml –¥–æ–±–∞–≤–∏—Ç—å:
restart: unless-stopped  # –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```

---

### 6. **–û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –†–ï–°–£–†–°–û–í** 
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ (128GB)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ (2TB)
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π (lazy loading)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h
du -sh ~/.ollama/models/blobs
du -sh ~/.cache/huggingface

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏
vm_stat
```

---

### 7. **–ù–ê–°–¢–†–û–ô–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø –ò –†–û–¢–ê–¶–ò–ò –õ–û–ì–û–í**
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (—á—Ç–æ–±—ã –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª–∏ –¥–∏—Å–∫)
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON)

**–ì–¥–µ:**
- Docker logs (—É–∂–µ –µ—Å—Ç—å)
- –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ –≤ `logs/`
- –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å ELK –∏–ª–∏ Loki

---

### 8. **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –î–û–°–¢–£–ü**
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ü–æ—Ä—Ç—ã –Ω–µ –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞—Ä—É–∂—É (—Ç–æ–ª—å–∫–æ localhost)
- –ü–∞—Ä–æ–ª–∏ –∏ –∫–ª—é—á–∏ –≤ .env (–Ω–µ –≤ git)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ Grafana/Prometheus
- Firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## üìã –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–û–†–Ø–î–û–ö

### –§–∞–∑–∞ 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ - 1-2 –¥–Ω—è):
1. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

### –§–∞–∑–∞ 2 (–í–∞–∂–Ω–æ–µ - 2-3 –¥–Ω—è):
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana –¥–∞—à–±–æ—Ä–¥–æ–≤
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ (restart policies, –æ—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤)
6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

### –§–∞–∑–∞ 3 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏):
7. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø

---

## üîç –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê –¢–ï–ö–£–©–ï–ì–û –°–û–°–¢–û–Ø–ù–ò–Ø

```bash
# 1. –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# 2. Health checks
./scripts/check_all_services.sh  # –µ—Å–ª–∏ –µ—Å—Ç—å

# 3. –õ–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
docker-compose logs --tail=100 | grep -i error

# 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats --no-stream

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–∞–ø–æ–≤
bash scripts/check_backups_health.sh
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-21
