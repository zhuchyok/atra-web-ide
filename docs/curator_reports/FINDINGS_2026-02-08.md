# Выводы куратора Victoria — 2026-02-08

**Прогон:** curator_2026-02-08_22-00-36 (2 задачи: «привет», «что ты умеешь?»).  
**Цель:** проверить цепочку и ответы, найти недостатки для обучения Victoria на локальных моделях.

---

## Что сработало хорошо

| Задача | Маршрут | Время | Оценка |
|--------|---------|-------|--------|
| привет | simple_chat → agent_run (qwen2.5-coder:32b) | 0.01 с | Ответ корректный, краткий, без лишнего. Быстрый путь сработал. |
| что ты умеешь? | enhanced, method=simple | 7.54 с | Статус success; маршрутизация в enhanced и шаблонный ответ отработали. |

- Трассировка в ответе есть: `task_type`, `routed_to`, `use_enhanced`, `method`, `correlation_id` — по ним можно сверять цепочку и искать в логах.
- Корреляционный id возвращается — поиск по логам Victoria по `correlation_id` возможен.

---

## Недостатки и рекомендации

### 1. Ответ на «что ты умеешь?» — слишком общий

- **Сейчас:** «Управлять командой, разрабатывать стратегии, решать сложные задачи… развиваться».
- **Проблема:** Не перечислены конкретные возможности: чат с экспертами, RAG, работа с файлами, оркестрация задач, статус проекта, делегирование в Veronica и т.д. Пользователь не понимает, что именно можно спросить или попросить.
- **Рекомендация:** Расширить шаблон «что умеешь» (backend query_classifier TEMPLATE_RESPONSES / быстрый путь для «что ты умеешь») или ответ enhanced: добавить 3–5 пунктов реальных возможностей (список файлов, статус, выбор эксперта, выполнение задач, работа с кодом/файлами). Сверять с тем, что реально умеет Victoria по MASTER_REFERENCE и VICTORIA.md.
- **Сделано:** Добавлен фиксированный ответ с перечнем возможностей: (1) в **victoria_server.py** — быстрый путь в `agent.run()` для «что ты умеешь»/«кто ты»/«твои возможности»; (2) в **victoria_enhanced.py** — в `_execute_method()` при `category == "informational"` возврат без вызова LLM. При следующем прогоне ответ на «что ты умеешь?» должен быть развёрнутым и одинаковым по обоим маршрутам.

### 2. Разница по времени: 0.01 с vs 7.5 с

- «привет» идёт по быстрому пути (simple_chat), «что ты умеешь?» — через enhanced (7.5 с). Для информационных вопросов приемлемо, но при росте нагрузки стоит убедиться, что все шаблонные ответы («кто ты», «чем помочь») идут по быстрому пути без вызова LLM, где это уже реализовано (см. CHANGES §0.4i).

### 3. Что проверить в следующих прогонах

- Задачи с действиями: «покажи файлы в frontend», «найди ошибки в backend» — маршрут (Veronica vs Victoria), полнота ответа, отсутствие галлюцинаций.
- Длинные задачи — таймауты и обрезка ответа (max_steps, лимиты в backend).
- Явная проверка логов по `correlation_id` для одного запроса — полная цепочка шагов ReAct (думаю → инструмент → результат).

---

## Итог

- Цепочка отрабатывает, трассировка и correlation_id доступны для анализа.
- Первый приоритет: улучшить содержание ответа на «что ты умеешь?» под реальные возможности Victoria и корпорации на Mac Studio.
- Регулярно повторять прогоны (скрипт `curator_send_tasks_to_victoria.py` + этот список задач), дополнять FINDINGS и править промпты/шаблоны по результатам.
