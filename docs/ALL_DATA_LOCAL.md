# Вся работа — в одной локальной БД

**Дата:** 2026-01-29

После миграции **все данные и знания** хранятся и обрабатываются **только в локальной БД** (Mac Studio). Удалённых баз для обычной работы нет.

## Где что лежит

- **Одна БД:** `knowledge_os` (PostgreSQL на localhost / в Docker — `knowledge_postgres`).
- **URL по умолчанию:** `postgresql://admin:secret@localhost:5432/knowledge_os` (в коде и `.env`).
- В Docker контейнеры получают `DATABASE_URL=...@knowledge_postgres:5432/...` через compose.

## Что в этой БД

- `knowledge_nodes` — узлы знаний, гипотезы, инсайты  
- `domains` — домены  
- `experts` — эксперты  
- `tasks` — задачи  
- `interaction_logs` — логи чата  
- `semantic_ai_cache` — семантический кэш  
- `expert_discussions` — дебаты  
- `expert_learning_logs` — логи обучения  

Всё перечисленное читается и пишется только в эту локальную БД.

## Скрипты миграции/синхронизации

Они уже не обращаются к удалённым серверам по умолчанию:

- **migrate_knowledge_from_server46.py** — `SERVER_46_HOST` по умолчанию `localhost`. Удалённый источник только если задать `SERVER_46_HOST=...` для повторного подтяга.
- **server_knowledge_sync.py** — `SERVER_IP` по умолчанию `localhost`. Удалённый сервер только если задать `SERVER_IP=...`.
- **gold_sync.py** — `GOLD_DB_URL` по умолчанию равен `DATABASE_URL` (локальная БД). Удалённый источник только если задать `GOLD_DB_URL=...`.

То есть по умолчанию эти скрипты работают «здесь» — с локальной БД; удалённые адреса только при явной настройке.

## Итог

- **Да:** всё в этой (локальной) базе, удалённых БД для обычной работы нет.
- **Да:** скрипты после миграции по умолчанию работают с локальной БД; при необходимости повторного подтяга с удалённого сервера нужно явно задать переменные окружения.
