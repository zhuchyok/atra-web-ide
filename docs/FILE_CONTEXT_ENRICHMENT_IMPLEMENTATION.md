# ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø: –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–¥–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞–º –ø–æ –º–∏—Ä–æ–≤—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º

**–î–∞—Ç–∞:** 2026-01-28  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê

–≠–∫—Å–ø–µ—Ä—Ç—ã –Ω–µ –≤–∏–¥–µ–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–∞—à–±–æ—Ä–¥–∞ –∏ –¥–∞–≤–∞–ª–∏ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏–∑ –æ–±—â–∏—Ö –∑–Ω–∞–Ω–∏–π, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ).

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (–ú–ò–†–û–í–´–ï –ü–†–ê–ö–¢–ò–ö–ò)

### 1. **File Context Enricher** (`knowledge_os/app/file_context_enricher.py`)

–†–µ–∞–ª–∏–∑—É–µ—Ç –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:
- ‚úÖ **Context Window Management** - chunking –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **Metadata-based file references** - –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –≤ metadata
- ‚úÖ **Selective context injection** - —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏
- ‚úÖ **Smart file reading** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

**–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞:**
- LangChain Document Loaders
- AutoGPT File Context
- GitHub Copilot Context Management

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω Smart Worker** (`knowledge_os/app/smart_worker_autonomous.py`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ `metadata.file_path`
- ‚úÖ –û–±–æ–≥–∞—â–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –∫–æ–¥–æ–º —Ñ–∞–π–ª–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `metadata.file_paths`
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–µ–∫—Ü–∏–π –ø–æ keywords

**–ö–æ–¥:**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ–º —Ñ–∞–π–ª—ã –∏–∑ metadata
from file_context_enricher import get_file_enricher
enricher = get_file_enricher()

file_path = task_metadata.get('file_path')
if file_path:
    task_description = enricher.enrich_task_with_file_context(
        task_description,
        file_path=file_path,
        metadata=task_metadata,
        keywords=keywords
    )
```

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω Code Auditor** (`knowledge_os/app/code_auditor.py`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ `file_path` –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `file_path` –≤ `metadata` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ keywords –¥–ª—è selective context

**–ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–∏—Å–∫–∞:**
- `–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: app.py`
- `—Ñ–∞–π–ª: app.py`
- `file: app.py`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è dashboard ‚Üí `knowledge_os/dashboard/app.py`

---

## üìã –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á–∏:

```
1. Code Auditor —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É
   ‚îî‚îÄ> –ò–∑–≤–ª–µ–∫–∞–µ—Ç file_path –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è
   ‚îî‚îÄ> –î–æ–±–∞–≤–ª—è–µ—Ç –≤ metadata: {"file_path": "knowledge_os/dashboard/app.py"}

2. Smart Worker –±–µ—Ä–µ—Ç –∑–∞–¥–∞—á—É
   ‚îî‚îÄ> –ß–∏—Ç–∞–µ—Ç metadata.file_path
   ‚îî‚îÄ> –í—ã–∑—ã–≤–∞–µ—Ç FileContextEnricher
   ‚îî‚îÄ> –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª (—Å chunking –µ—Å–ª–∏ –±–æ–ª—å—à–æ–π)
   ‚îî‚îÄ> –û–±–æ–≥–∞—â–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∫–æ–¥–æ–º

3. –≠–∫—Å–ø–µ—Ä—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ–º–ø—Ç:
   ‚îî‚îÄ> system_prompt (—Ä–æ–ª—å)
   ‚îî‚îÄ> title (–Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏)
   ‚îî‚îÄ> description (–æ–±–æ–≥–∞—â–µ–Ω–Ω–æ–µ —Å –∫–æ–¥–æ–º —Ñ–∞–π–ª–∞)
   ‚îî‚îÄ> –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–¥–æ–º
   
4. –≠–∫—Å–ø–µ—Ä—Ç –≤–∏–¥–∏—Ç –†–ï–ê–õ–¨–ù–´–ô –ö–û–î –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –µ–≥–æ
```

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã (file_context_enricher.py):

```python
MAX_CONTEXT_LENGTH = 8000  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è LLM
MAX_FILE_SIZE = 50000      # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (50KB)
CHUNK_SIZE = 3000          # –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
OVERLAP_SIZE = 200         # –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏
```

### Metadata –∑–∞–¥–∞—á–∏:

```json
{
  "file_path": "knowledge_os/dashboard/app.py",
  "keywords": ["error", "except", "connection"],
  "source": "code_auditor",
  "severity": "high"
}
```

---

## üìä –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 1: –ó–∞–¥–∞—á–∞ dashboard_audit

**–î–æ:**
```
–ó–∞–¥–∞—á–∞: "–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ"
–û–ø–∏—Å–∞–Ω–∏–µ: "–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: app.py - –≤—Å–µ —Ç–∞–±—ã"
```

**–ü–æ—Å–ª–µ:**
```
–ó–∞–¥–∞—á–∞: "–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ"
–û–ø–∏—Å–∞–Ω–∏–µ: "–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: app.py - –≤—Å–µ —Ç–∞–±—ã

---
üìÅ –ö–û–ù–¢–ï–ö–°–¢ –§–ê–ô–õ–ê: knowledge_os/dashboard/app.py
---

```python
import streamlit as st
import psycopg2
# ... —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥ —Ñ–∞–π–ª–∞ ...
VECTOR_CORE_URL = "http://localhost:8001"
def get_embedding(text: str) -> list:
    # ... —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥ ...
```
```

### –ü—Ä–∏–º–µ—Ä 2: –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª (chunking)

–ï—Å–ª–∏ —Ñ–∞–π–ª > 50KB:
```
‚ö†Ô∏è –§–ê–ô–õ –ë–û–õ–¨–®–û–ô (120000 –±–∞–π—Ç). –ü–æ–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–≤—ã–µ 8000 —Å–∏–º–≤–æ–ª–æ–≤:

```python
# ... –ø–µ—Ä–≤—ã–µ —á–∞–Ω–∫–∏ ...
[...–ø—Ä–æ–ø—É—â–µ–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞...]
```
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **–≠–∫—Å–ø–µ—Ä—Ç—ã –≤–∏–¥—è—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥** - –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç "–≤—Å–ª–µ–ø—É—é"
2. **–ù–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π** - —ç–∫—Å–ø–µ—Ä—Ç—ã –Ω–µ –ø—Ä–∏–¥—É–º—ã–≤–∞—é—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
3. **Selective context** - —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
4. **Context window management** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π chunking

### ‚úÖ –ß—Ç–æ —É–ª—É—á—à–µ–Ω–æ:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ file_path** –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
2. **–£–º–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤** —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
3. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —ç–∫—Å–ø–µ—Ä—Ç–∞–º** –æ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–¥–æ–º
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤**

---

## üìö –ú–ò–†–û–í–´–ï –ü–†–ê–ö–¢–ò–ö–ò

### 1. **Context Window Management**
- ‚úÖ Chunking –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (8000 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –ü–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### 2. **Metadata-based References**
- ‚úÖ –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –≤ metadata, –Ω–µ –≤ description
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å: –æ–¥–∏–Ω —Ñ–∞–π–ª –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ
- ‚úÖ Keywords –¥–ª—è selective extraction

### 3. **Selective Context Injection**
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å–µ–∫—Ü–∏–π –ø–æ keywords
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–æ/–ø–æ—Å–ª–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- ‚úÖ Fallback –Ω–∞ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞ –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

### 4. **Error Handling**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ Fallback –Ω–∞ –±–∞–∑–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å file_path:

```python
task_metadata = {
    "file_path": "knowledge_os/dashboard/app.py",
    "keywords": ["error", "except"],
    "source": "code_auditor"
}

await conn.execute("""
    INSERT INTO tasks (title, description, metadata)
    VALUES ($1, $2, $3)
""", "–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏", "–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏", json.dumps(task_metadata))
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤:

```python
task_metadata = {
    "file_paths": [
        "knowledge_os/dashboard/app.py",
        "knowledge_os/app/main.py"
    ],
    "source": "code_auditor"
}
```

---

## üìù –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- `file_context_enricher.py` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
- `smart_worker_autonomous.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- `code_auditor.py` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ file_path

---

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2026-01-28  
**–ê–≤—Ç–æ—Ä:** ATRA Corporation (Victoria Agent)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**
