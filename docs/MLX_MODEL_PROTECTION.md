# –ó–∞—â–∏—Ç–∞ –º–æ–¥–µ–ª–µ–π –æ—Ç –≤—ã–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** 26.01.2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥–µ–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–≥—Ä—É–∂–µ–Ω–∞, –ø–æ–∫–∞ –¥—Ä—É–≥–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ê –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –º–æ–¥–µ–ª—å `qwen2.5-coder-32b`
2. –í —ç—Ç–æ –≤—Ä–µ–º—è —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ—Ö–≤–∞—Ç–∫—É –ø–∞–º—è—Ç–∏
3. –°–∏—Å—Ç–µ–º–∞ –≤—ã–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥–µ–ª—å `qwen2.5-coder-32b` (–ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∞ –Ω–µ —Å–∞–º–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è)
4. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ê –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É –∏–ª–∏ –¥–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ó–∞—â–∏—Ç–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**
   - `_active_model_requests` ‚Äî —Å—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
   - `_loading_models` ‚Äî –º–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
   - `_model_locks` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏

2. **–ó–∞—â–∏—Ç–∞ –æ—Ç –≤—ã–≥—Ä—É–∑–∫–∏**
   - –ú–æ–¥–µ–ª–∏ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ **–ù–ï –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è**
   - –ú–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, **–ù–ï –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è**
   - –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

3. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ**
   - –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ—é –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
   - –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
   - –ú–æ–¥–µ–ª—å –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ "–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è" –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

---

## üîí –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–î–æ –æ—á–∏—Å—Ç–∫–∏:**
- `qwen2.5-coder-32b` ‚Äî 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
- `phi3.5-mini-4k` ‚Äî 0 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- `deepseek-r1-70b` ‚Äî 0 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–∞–º—è—Ç–∏:**
- ‚úÖ **–ó–∞—â–∏—â–µ–Ω–∞:** `qwen2.5-coder-32b` (2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞)
- üóëÔ∏è –í—ã–≥—Ä—É–∂–µ–Ω—ã: `phi3.5-mini-4k`, `deepseek-r1-70b`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `qwen2.5-coder-32b`, –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç—É –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- –î—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏ –≤—ã–≥—Ä—É–∂–µ–Ω—ã –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–î–æ –æ—á–∏—Å—Ç–∫–∏:**
- `qwen2.5-coder-32b` ‚Äî –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (–≤ `_loading_models`)
- `phi3.5-mini-4k` ‚Äî –≤ –∫—ç—à–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–∞–º—è—Ç–∏:**
- ‚úÖ **–ó–∞—â–∏—â–µ–Ω–∞:** `qwen2.5-coder-32b` (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è)
- üóëÔ∏è –í—ã–≥—Ä—É–∂–µ–Ω–∞: `phi3.5-mini-4k`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–≥—Ä—É–∑–∫–∞ `qwen2.5-coder-32b` –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª—å –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –í—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

**–î–æ –æ—á–∏—Å—Ç–∫–∏:**
- `qwen2.5-coder-32b` ‚Äî 1 –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `phi3.5-mini-4k` ‚Äî 1 –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `deepseek-r1-70b` ‚Äî 1 –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å

**–ü—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–∞–º—è—Ç–∏:**
- ‚úÖ **–í—Å–µ –º–æ–¥–µ–ª–∏ –∑–∞—â–∏—â–µ–Ω—ã** (–≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- ‚ö†Ô∏è –û—á–∏—Å—Ç–∫–∞ **–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è** (–Ω–µ—á–µ–≥–æ –≤—ã–≥—Ä—É–∂–∞—Ç—å)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –í—Å–µ –º–æ–¥–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏
- –í–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏ (–Ω–æ –º–æ–¥–µ–ª–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```bash
# Health check —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö
curl http://localhost:11435/health | jq '.cached_models[] | select(.active_requests > 0)'

# –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
{
  "name": "qwen2.5-coder-32b",
  "use_count": 50,
  "active_requests": 2,  # ‚Üê 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
  "is_loading": false
}
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≥—Ä—É–∂–∞—é—â–∏—Ö—Å—è –º–æ–¥–µ–ª—è—Ö

```bash
curl http://localhost:11435/health | jq '.loading_models'

# –ü—Ä–∏–º–µ—Ä:
["qwen2.5-coder-32b"]  # –ú–æ–¥–µ–ª—å —Å–µ–π—á–∞—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```

### –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –º–æ–¥–µ–ª—è–º

```bash
curl http://localhost:11435/health | jq '.active_model_requests'

# –ü—Ä–∏–º–µ—Ä:
{
  "qwen2.5-coder-32b": 2,  # 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
  "phi3.5-mini-4k": 1      # 1 –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å
}
```

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –≤ –¥–µ–π—Å—Ç–≤–∏–∏

### –õ–æ–≥–∏ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ

```
üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏: 96.2%
üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω—ã –æ—Ç –≤—ã–≥—Ä—É–∑–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è): {'qwen2.5-coder-32b', 'phi3.5-mini-4k'}
üóëÔ∏è –ú–æ–¥–µ–ª—å deepseek-r1-70b –≤—ã–≥—Ä—É–∂–µ–Ω–∞ –∏–∑ –ø–∞–º—è—Ç–∏
‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω—ã –º–æ–¥–µ–ª–∏: ['qwen2.5-coder-32b', 'phi3.5-mini-4k'] (–∑–∞—â–∏—â–µ–Ω—ã: {'qwen2.5-coder-32b', 'phi3.5-mini-4k'})
```

### –õ–æ–≥–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –º–æ–¥–µ–ª–∏

```
üö® –≠–ö–°–¢–†–ï–ù–ù–ê–Ø –û–ß–ò–°–¢–ö–ê: –≤—ã–≥—Ä—É–∂–∞–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –∏–∑ –ø–∞–º—è—Ç–∏
üõ°Ô∏è –ó–∞—â–∏—â–µ–Ω—ã –æ—Ç –≤—ã–≥—Ä—É–∑–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è): {'qwen2.5-coder-32b'}
‚ö†Ô∏è –í—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è! –ù–µ–ª—å–∑—è –≤—ã–≥—Ä—É–∑–∏—Ç—å –Ω–∏ –æ–¥–Ω—É –º–æ–¥–µ–ª—å. –ê–∫—Ç–∏–≤–Ω—ã–µ: {'qwen2.5-coder-32b'}
```

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```python
# –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –º–æ–¥–µ–ª—è–º
_active_model_requests = {
    "qwen2.5-coder-32b": 2,  # 2 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
    "phi3.5-mini-4k": 1      # 1 –∞–∫—Ç–∏–≤–Ω—ã–π –∑–∞–ø—Ä–æ—Å
}

# –ú–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
_loading_models = {"qwen2.5-coder-32b"}

# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
_model_locks = {
    "qwen2.5-coder-32b": threading.Lock(),
    "phi3.5-mini-4k": threading.Lock()
}
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞

1. **–ù–∞—á–∞–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
   ```python
   _active_model_requests[model_key] += 1  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
   ```

2. **–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
   ```python
   _loading_models.add(model_key)  # –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –∑–∞–≥—Ä—É–∂–∞—é—â—É—é—Å—è
   try:
       model = load(model_path)
   finally:
       _loading_models.discard(model_key)  # –£–±–∏—Ä–∞–µ–º
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:**
   - –ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –ú–æ–¥–µ–ª—å –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –≤—ã–≥—Ä—É–∑–∫–∏

4. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞:**
   ```python
   _active_model_requests[model_key] -= 1  # –£–º–µ–Ω—å—à–∞–µ–º —Å—á–µ—Ç—á–∏–∫
   if _active_model_requests[model_key] == 0:
       _active_model_requests.pop(model_key)  # –£–¥–∞–ª—è–µ–º, –µ—Å–ª–∏ 0
   ```

---

## üéØ –ò—Ç–æ–≥

‚úÖ **–ü–ª—é—Å—ã:**
- –ú–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–≥—Ä—É–∂–∞—é—Ç—Å—è**
- –ú–æ–¥–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, **–∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è**
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –≤—ã–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∑–∞—â–∏—â–∞—Ç—å

‚ö†Ô∏è **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –ï—Å–ª–∏ –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –æ—á–∏—Å—Ç–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- –í–æ–∑–º–æ–∂–Ω–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏, –µ—Å–ª–∏ –≤—Å–µ –º–æ–¥–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã
- –ù–æ —ç—Ç–æ –ª—É—á—à–µ, —á–µ–º –ø—Ä–µ—Ä—ã–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ health check
- –ï—Å–ª–∏ –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ RAM
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—å—à–∏–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 26.01.2026*
