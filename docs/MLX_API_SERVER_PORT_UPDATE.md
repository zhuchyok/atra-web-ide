# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ MLX API Server: 11434 ‚Üí 11435

**–î–∞—Ç–∞:** 26.01.2026  
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** MLX API Server —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É **11435** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## ‚úÖ –ü—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. **MLX API Server (`knowledge_os/app/mlx_api_server.py`)**
- ‚úÖ –ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **11435** (—á–µ—Ä–µ–∑ `MLX_API_PORT`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è `MLX_API_PORT`
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ uvicorn:
  - `timeout_keep_alive=120`
  - `limit_concurrency` —Å –∑–∞–ø–∞—Å–æ–º
  - `workers=1` (MLX –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç multiprocessing)

### 2. **–°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

#### `scripts/start_mlx_api_server.sh`
- ‚úÖ –ü–æ—Ä—Ç: **11435** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `MLX_API_PORT` –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ PID –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∞

#### `scripts/monitor_mlx_api_server.sh`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ **11435**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `MLX_API_PORT`

#### `scripts/system_auto_recovery.sh`
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –ø–æ—Ä—Ç **11435**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `MLX_API_PORT`

#### `scripts/AUTO_START_MLX.sh`
- ‚úÖ –ü–æ—Ä—Ç: **11435**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `MLX_API_PORT`
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Python

#### `scripts/check_all_services.sh`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ **11435**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `MLX_API_PORT`

### 3. **Backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

#### `backend/app/config.py`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `MLX_API_URL` —á–µ—Ä–µ–∑ `OLLAMA_URL`
- ‚úÖ –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://localhost:11434` (Ollama)
- ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ `MLX_API_URL=http://localhost:11435`

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å –ø–æ—Ä—Ç–æ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (11435)

```bash
bash scripts/start_mlx_api_server.sh
```

### –ó–∞–ø—É—Å–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º –ø–æ—Ä—Ç–æ–º

```bash
export MLX_API_PORT=11436
bash scripts/start_mlx_api_server.sh
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ backend

**–í–∞—Ä–∏–∞–Ω—Ç 1:** –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
export OLLAMA_URL=http://localhost:11435
# –∏–ª–∏
export MLX_API_URL=http://localhost:11435
```

**–í–∞—Ä–∏–∞–Ω—Ç 2:** –í `.env` —Ñ–∞–π–ª–µ
```env
OLLAMA_URL=http://localhost:11435
# –∏–ª–∏
MLX_API_URL=http://localhost:11435
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
```bash
bash -n scripts/start_mlx_api_server.sh      # ‚úÖ OK
bash -n scripts/monitor_mlx_api_server.sh   # ‚úÖ OK
bash -n scripts/system_auto_recovery.sh      # ‚úÖ OK
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ MLX API Server
```bash
python3 -c "import sys; sys.path.insert(0, 'knowledge_os'); from app.mlx_api_server import app; print('OK')"
# ‚úÖ OK (—Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ psutil, –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ—Ä—Ç—É 11435
curl http://localhost:11435/api/tags

# –ü—Ä–æ–≤–µ—Ä–∫–∞ health
curl http://localhost:11435/health
```

---

## üéØ –õ–æ–≥–∏–∫–∞ –ø–æ—Ä—Ç–æ–≤

- **Ollama:** `11434` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **MLX API Server:** `11435` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** ‚Äî –æ–Ω–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç

---

## üìù –ó–∞–º–µ—Ç–∫–∏

1. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `MLX_API_PORT`** –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **Backend** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `OLLAMA_URL` –∏–ª–∏ `MLX_API_URL` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. **–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `MLX_API_PORT` –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏
4. **–ú–æ–Ω–∏—Ç–æ—Ä** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [x] `mlx_api_server.py` ‚Äî –ø–æ—Ä—Ç 11435
- [x] `start_mlx_api_server.sh` ‚Äî –ø–æ—Ä—Ç 11435
- [x] `monitor_mlx_api_server.sh` ‚Äî –ø–æ—Ä—Ç 11435
- [x] `system_auto_recovery.sh` ‚Äî –ø–æ—Ä—Ç 11435
- [x] `AUTO_START_MLX.sh` ‚Äî –ø–æ—Ä—Ç 11435
- [x] `check_all_services.sh` ‚Äî –ø–æ—Ä—Ç 11435
- [x] `config.py` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MLX_API_URL
- [x] –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [x] –ò–º–ø–æ—Ä—Ç MLX API Server —Ä–∞–±–æ—Ç–∞–µ—Ç

---

*–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ: 26.01.2026*
