# üéØ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–∞ Intelligence Command Center

**–°–æ–≤–º–µ—Å—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑:** Victoria (Team Lead), –û–ª—å–≥–∞ (Performance Engineer), –ê–Ω–∞—Å—Ç–∞—Å–∏—è (Product Analyst), –æ–ø—ã—Ç DASHBOARD_FIX_EXPLAINED –∏ ADDITIONAL_PERFORMANCE_OPTIMIZATIONS

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞—à–±–æ—Ä–¥ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç ~11.5 –ì–ë –ø–∞–º—è—Ç–∏ (Streamlit –Ω–∞ –ø–æ—Ä—Ç—É 8501)

**–î–∞—Ç–∞:** 2026-01-31

---

## üìã –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (Victoria + –û–ª—å–≥–∞)

### 1. **Streamlit cache ‚Äî –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å**
- `@st.cache_data(ttl=60)` –∏ `@st.cache_data(ttl=15)` –±–µ–∑ `max_entries`
- ~50+ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `fetch_data` —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–¥–Ω–∏, –¥–æ–º–µ–Ω, —Å—Ç–∞—Ç—É—Å)
- Streamlit –∏–∑–≤–µ—Å—Ç–µ–Ω –ø—Ä–æ–±–ª–µ–º–æ–π: –∫—ç—à —Ä–∞—Å—Ç—ë—Ç –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

### 2. **–¢—è–∂—ë–ª—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö** (–û–ª—å–≥–∞)
- `knowledge_nodes.content` ‚Äî –¥–æ 50‚Äì100 –ö–ë –Ω–∞ —Å—Ç—Ä–æ–∫—É
- `experts.system_prompt` ‚Äî 1‚Äì5 –ö–ë √ó 58 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ ‚âà 170 –ö–ë
- –ó–∞–ø—Ä–æ—Å—ã attacks, scout_reports, db_nodes –≥—Ä—É–∑—è—Ç –ø–æ–ª–Ω—ã–π `content` –±–µ–∑ `LEFT(content, N)`

### 3. **–†–µ–Ω–¥–µ—Ä –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫** (–ê–Ω–∞—Å—Ç–∞—Å–∏—è)
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ Streamlit –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç
- –î–∞–Ω–Ω—ã–µ –¥–ª—è **–≤—Å–µ—Ö** –≤–∫–ª–∞–¥–æ–∫ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π

### 4. **–û–ø—ã—Ç DASHBOARD_FIX_EXPLAINED**
- READONLY –¥–ª—è —á—Ç–µ–Ω–∏—è, –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –ò–∑–±–µ–≥–∞—Ç—å —á–∞—Å—Ç—ã—Ö –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ë–î

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### –§–∞–∑–∞ 1 ‚Äî –ë—ã—Å—Ç—Ä—ã–µ wins (1‚Äì2 —á–∞—Å–∞)

| # | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –§–∞–π–ª | –≠—Ñ—Ñ–µ–∫—Ç |
|---|-----------|------|--------|
| 1 | `max_entries=100` –≤ `st.cache_data` | app.py | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–æ—Å—Ç–∞ –∫—ç—à–∞ |
| 2 | `LEFT(k.content, 500)` –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö —Å content | app.py | ‚àí80% –æ–±—ä—ë–º–∞ –Ω–∞ content |
| 3 | –ù–µ –≥—Ä—É–∑–∏—Ç—å `system_prompt` –≤ —Å–ø–∏—Å–∫–µ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ | app.py | ‚àí170 –ö–ë –Ω–∞ –≤—ã–∑–æ–≤ |
| 4 | `LEFT(content, 300)` –¥–ª—è attacks, scout_reports | app.py | ‚àí90% –Ω–∞ —ç—Ç–∏—Ö –≤—ã–±–æ—Ä–∫–∞—Ö |

### –§–∞–∑–∞ 2 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ø–æ–ª–¥–Ω—è)

| # | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç |
|---|-----------|--------|
| 5 | –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∫–ª–∞–¥–æ–∫ (`st.fragment` –∏–ª–∏ —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä) | –î–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ |
| 6 | –í—ã–Ω–µ—Å—Ç–∏ `system_prompt` –≤ expander ¬´–ü–æ–¥—Ä–æ–±–Ω–µ–µ¬ª | –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ –∫–ª–∏–∫—É |
| 7 | –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞ (cron –∫–∞–∂–¥—ã–µ 6—á) | –°–±—Ä–æ—Å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ |

### –§–∞–∑–∞ 3 ‚Äî –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ

| # | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç |
|---|-----------|--------|
| 8 | –û—Ç–¥–µ–ª—å–Ω—ã–π API –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ (FastAPI) | Streamlit —Ç–æ–ª—å–∫–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç, –Ω–µ –¥–µ—Ä–∂–∏—Ç —Ç—è–∂—ë–ª—ã–µ –¥–∞–Ω–Ω—ã–µ |
| 9 | Persist cache –Ω–∞ –¥–∏—Å–∫ (`persist="disk"`) | –ú–µ–Ω—å—à–µ RAM, –Ω–æ Streamlit –≤—Å—ë —Ä–∞–≤–Ω–æ –≥—Ä—É–∑–∏—Ç –≤ –ø–∞–º—è—Ç—å |
| 10 | –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ React + lightweight charts | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–∞–º—è—Ç—å—é |

---

## üìê –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ SQL-–∏–∑–º–µ–Ω–µ–Ω–∏—è

```sql
-- –ë—ã–ª–æ (attacks):
SELECT content, expert_consensus->>'adversarial_attack' as attack, ...

-- –°—Ç–∞–ª–æ:
SELECT LEFT(content, 300) as content, expert_consensus->>'adversarial_attack' as attack, ...
```

```sql
-- –ë—ã–ª–æ (db_nodes –¥–ª—è –≥—Ä–∞—Ñ–∞):
SELECT k.id, k.content, d.name as domain ...

-- –°—Ç–∞–ª–æ:
SELECT k.id, LEFT(k.content, 100) as content, d.name as domain ...
```

```sql
-- –ë—ã–ª–æ (experts —Å–ø–∏—Å–æ–∫):
SELECT name, role, department, system_prompt, performance_score ...

-- –°—Ç–∞–ª–æ (–±–µ–∑ system_prompt –¥–ª—è —Å–ø–∏—Å–∫–∞):
SELECT name, role, department, performance_score ...
-- system_prompt –≥—Ä—É–∑–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ expander –ø–æ –∫–ª–∏–∫—É
```

---

## üìê –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ (cache)

```python
# –ë—ã–ª–æ:
@st.cache_data(ttl=60)
def fetch_data(query, params=None, cache_key=None):

# –°—Ç–∞–ª–æ:
@st.cache_data(ttl=60, max_entries=100)
def fetch_data(query, params=None, cache_key=None):
```

---

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ –§–∞–∑—ã 1 |
|---------|-----|--------------|
| –ü–∞–º—è—Ç—å  | ~11.5 –ì–ë | ~2‚Äì4 –ì–ë |
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ | ‚Äî | ‚àí30% –∑–∞ —Å—á—ë—Ç –º–µ–Ω—å—à–µ–≥–æ –æ–±—ä—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö |

---

## üìö –°—Å—ã–ª–∫–∏

- `knowledge_os/docs/DASHBOARD_FIX_EXPLAINED.md` ‚Äî –æ–ø—ã—Ç —Å SQLite –¥–∞—à–±–æ—Ä–¥–æ–º
- `knowledge_os/docs/ADDITIONAL_PERFORMANCE_OPTIMIZATIONS_PLAN.md` ‚Äî –æ–±—â–∏–π –ø–ª–∞–Ω
- `knowledge_os/scripts/PERFORMANCE_BOTTLENECKS_ANALYSIS.md` ‚Äî lru_cache, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
