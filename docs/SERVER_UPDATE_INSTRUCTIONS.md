# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ DCA

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –∏ TP —É—Ä–æ–≤–Ω–µ–π –¥–ª—è DCA —Å–∏–≥–Ω–∞–ª–æ–≤.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 1. **signal_live.py**
- –£–±—Ä–∞—Ç—å –∫–æ–º–∏—Å—Å–∏—é –∏–∑ —Ä–∞—Å—á–µ—Ç–∞ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–º–∏—Å—Å–∏—é –≤ TP —É—Ä–æ–≤–Ω—è—Ö (0.1% –≤–º–µ—Å—Ç–æ 0.2%)

### 2. **telegram_utils.py** 
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `dca_calculate_next_qty_and_tp`

## üìã –°–ø–æ—Å–æ–±—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
python3 manual_dca_fix.py
```

### –°–ø–æ—Å–æ–± 2: Bash —Å–∫—Ä–∏–ø—Ç
```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x quick_server_update.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
./quick_server_update.sh
```

### –°–ø–æ—Å–æ–± 3: –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

#### 1. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–∞
mkdir -p server_backup_$(date +%Y%m%d_%H%M%S)

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã
cp signal_live.py server_backup_*/
cp telegram_utils.py server_backup_*/
```

#### 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å
ps aux | grep python | grep main.py

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pkill -f "python.*main.py"
```

#### 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–í signal_live.py –Ω–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å:**

```python
# –ë–´–õ–û:
# –£—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–º–∏—Å—Å–∏—é –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
commission_rate = 0.001  # 0.1% –∫–æ–º–∏—Å—Å–∏—è
# –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏, –Ω–µ –¥–ª—è –≤—Å–µ—Ö
new_position_cost = new_qty * price
new_position_commission = new_position_cost * commission_rate
total_cost_with_commission = sum(q * p for q, p in zip(qtys, entry_prices)) + new_position_cost + new_position_commission
avg_price_new = total_cost_with_commission / total_qty

# –°–¢–ê–õ–û:
# –†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ë–ï–ó –∫–æ–º–∏—Å—Å–∏–∏ (–∫–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ TP)
total_cost = sum(q * p for q, p in zip(qtys, entry_prices)) + new_qty * price
avg_price_new = total_cost / total_qty
```

**–í signal_live.py –Ω–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å:**

```python
# –ë–´–õ–û:
fee_round_frac = 0.001  # 0.1% –æ–±—â–∞—è –∫–æ–º–∏—Å—Å–∏—è (—É–º–µ–Ω—å—à–µ–Ω–æ)

# –°–¢–ê–õ–û:
fee_round_frac = 0.0005  # 0.05% –æ–±—â–∞—è –∫–æ–º–∏—Å—Å–∏—è (–µ—â–µ —É–º–µ–Ω—å—à–µ–Ω–æ)
```

**–í telegram_utils.py –Ω–∞–π—Ç–∏ –∏ –∑–∞–º–µ–Ω–∏—Ç—å:**

```python
# –ë–´–õ–û:
return 0, 0

# –°–¢–ê–õ–û:
return 0, 0, 0
```

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –≤ —Ñ–æ–Ω–µ
nohup python3 main.py > server.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
ps aux | grep python | grep main.py
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
```bash
ps aux | grep python | grep main.py
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
tail -f server.log
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É DCA
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π DCA —Å–∏–≥–Ω–∞–ª
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TP —É—Ä–æ–≤–Ω–∏

## üö® –í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º

### –û—Ç–∫–∞—Ç –∫ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
pkill -f "python.*main.py"

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –±—ç–∫–∞–ø–∞
cp server_backup_*/signal_live.py ./
cp server_backup_*/telegram_utils.py ./

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
nohup python3 main.py > server.log 2>&1 &
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
grep -n "–†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ë–ï–ó –∫–æ–º–∏—Å—Å–∏–∏" signal_live.py
grep -n "fee_round_frac = 0.0005" signal_live.py
grep -n "return 0, 0, 0" telegram_utils.py
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏
- ‚úÖ TP —É—Ä–æ–≤–Ω–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å —É–º–µ–Ω—å—à–µ–Ω–Ω–æ–π –∫–æ–º–∏—Å—Å–∏–µ–π (0.1%)
- ‚úÖ –†–∞—Å—á–µ—Ç—ã —Å—Ç–∞–ª–∏ –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º–∏
- ‚úÖ DCA —Å–∏–≥–Ω–∞–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞: `tail -f server.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞: `ps aux | grep python`
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é
