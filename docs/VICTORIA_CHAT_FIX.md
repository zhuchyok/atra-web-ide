# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∞–Ω–∏–µ–º Victoria –≤ —á–∞—Ç–µ

**–î–∞—Ç–∞:** 26.01.2026  
**–ü—Ä–æ–±–ª–µ–º–∞:** Victoria –∑–∞–≤–∏—Å–∞–µ—Ç –≤ —á–∞—Ç–µ, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é..." –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

---

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–í–∏–∫—Ç–æ—Ä–∏—è –∑–∞–≤–∏—Å–∞–ª–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤:
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å "–ø—Ä–∏–≤–µ—Ç" —Ä–∞–±–æ—Ç–∞–ª
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã ("–∫–∞–∫ –¥–µ–ª–∞", "—á—Ç–æ –∫—Ç–æ —Ç—ã") –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é..." –∏ –∑–∞–≤–∏—Å–∞–ª–∏
- –ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Victoria
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç –¥–ª—è Victoria**

```python
# –í—ã–∑—ã–≤–∞–µ–º Victoria —Å —Ç–∞–π–º–∞—É—Ç–æ–º
try:
    result = await asyncio.wait_for(
        victoria.run(
            prompt=message.content,
            expert_name=message.expert_name,
            project_context=project_context
        ),
        timeout=60.0  # 60 —Å–µ–∫—É–Ω–¥ —Ç–∞–π–º–∞—É—Ç
    )
except asyncio.TimeoutError:
    logger.error(f"Victoria timeout –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞: {message.content[:50]}")
    error_event = {
        'type': 'error',
        'content': '–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç Victoria. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å.'
    }
    yield f"data: {json.dumps(error_event)}\n\n"
    yield f"data: {json.dumps({'type': 'end'})}\n\n"
    return
```

### 2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤**

- –£–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é..." –≤ –æ—Ç–≤–µ—Ç–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
- –í—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `end` –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—Ç—Ä–∏–º–∞

### 3. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —Å–æ–±—ã—Ç–∏–µ `end`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `backend/app/routers/chat.py`

1. –î–æ–±–∞–≤–ª–µ–Ω `import asyncio`
2. –î–æ–±–∞–≤–ª–µ–Ω —Ç–∞–π–º–∞—É—Ç 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Victoria
3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ (—É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é...")
4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ `await asyncio.sleep(0.05)` –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å—Ç—Ä–∏–º–∏–Ω–≥–∞
5. –í—Å–µ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `end` –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–∏–º–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. Victoria –Ω–µ –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
2. –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –í—Å–µ –æ—Ç–≤–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è —Å–æ–±—ã—Ç–∏–µ–º `end`
4. –ü–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–¢–∞–π–º–∞—É—Ç –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
VICTORIA_TIMEOUT=60.0  # —Å–µ–∫—É–Ω–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60)
```

---

*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 26.01.2026*
