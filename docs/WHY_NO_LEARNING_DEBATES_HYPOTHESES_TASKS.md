# –ü–æ—á–µ–º—É –Ω–µ –≤–∏–¥–Ω–æ –æ–±—É—á–µ–Ω–∏–µ, –≥–∏–ø–æ—Ç–µ–∑—ã, –¥–µ–±–∞—Ç—ã –∏ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

## –û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

| –ß—Ç–æ –≤–∏–¥–Ω–æ –≤ –¥–∞—à–±–æ—Ä–¥–µ | –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö | –ö—Ç–æ –∑–∞–ø–æ–ª–Ω—è–µ—Ç | –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è |
|----------------------|-----------------|---------------|-------------------|
| **–û–±—É—á–µ–Ω–∏–µ** (–≤–∫–ª–∞–¥–∫–∞ ¬´üéì –ê–∫–∞–¥–µ–º–∏—è –ò–ò¬ª) | –¢–∞–±–ª–∏—Ü–∞ `expert_learning_logs` | `nightly_learner.py` | **1 —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏** –ø–æ cron: **6:00 –ú–°–ö** (3:00 UTC) |
| **–î–µ–±–∞—Ç—ã** (—Ç–∞–º –∂–µ) | –¢–∞–±–ª–∏—Ü–∞ `expert_discussions` | `nightly_learner.py` (initiate_debate) | **1 —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏** –≤ —Ç–æ–º –∂–µ —Ü–∏–∫–ª–µ (6:00 –ú–°–ö) |
| **–ì–∏–ø–æ—Ç–µ–∑—ã** (–∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã–µ) | –¢–∞–±–ª–∏—Ü–∞ `knowledge_nodes` (content –∫–∞–∫ ¬´üî¨ –ö–†–û–°–°-–î–û–ú–ï–ù–ù–ê–Ø –ì–ò–ü–û–¢–ï–ó–ê: ‚Ä¶¬ª) | `enhanced_orchestrator.py` | **–ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç** –ø–æ cron |
| **–ú–µ—Ç—Ä–∏–∫–∏ –≥–∏–ø–æ—Ç–µ–∑ Singularity 9.0** | A/B —Ç–µ—Å—Ç–µ—Ä (–º–æ–¥—É–ª—å singularity_9_ab_tester) | –î–∞—à–±–æ—Ä–¥ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ | –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏ |
| **–ù–æ–≤—ã–µ –∑–∞–¥–∞—á–∏** | –¢–∞–±–ª–∏—Ü–∞ `tasks` | `enhanced_orchestrator.py`, worker, –¥–∞—à–±–æ—Ä–¥, —Ä–∞–∑–≤–µ–¥–∫–∞ –∏ –¥—Ä. | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä ‚Äî **–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω**; –æ—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º |

---

## –ü–æ—á–µ–º—É –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ

### 1. Cron –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∏ Nightly Learner –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –ø–æ cron**. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∏, –æ–Ω–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è.

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω —Ä–∞–∑:**

```bash
cd /Users/bikos/Documents/atra-web-ide
bash scripts/ensure_autonomous_systems.sh
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤ crontab –ø–æ—è–≤–∏—Ç—Å—è:

- **Enhanced Orchestrator** ‚Äî –∫–∞–∂–¥—ã–µ **5 –º–∏–Ω—É—Ç** (`*/5 * * * *`), –∫–æ–º–∞–Ω–¥–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `victoria-agent`.
- **Nightly Learner** ‚Äî **—Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –≤ 6:00 –ú–°–ö** (`0 3 * * *` UTC), —Ç–æ–∂–µ —á–µ—Ä–µ–∑ `victoria-agent`.

–ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
crontab -l | grep -E "enhanced_orchestrator|nightly_learner"
```

**–í–∞–∂–Ω–æ:** –≤ cron –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è **–ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ docker** (`/usr/local/bin/docker`), –∏–Ω–∞—á–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ `docker: command not found`. –°–∫—Ä–∏–ø—Ç `ensure_autonomous_systems.sh` —ç—Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç. –ï—Å–ª–∏ cron –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∏ –≤—Ä—É—á–Ω—É—é, –∏—Å–ø—Ä–∞–≤—å—Ç–µ:

```bash
crontab -l | sed 's| docker exec| /usr/local/bin/docker exec|g' | crontab -
```

–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –≤ cron –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å **—Ñ–∞–π–ª**, –∞ –Ω–µ `python3 -c 'from enhanced_orchestrator import ...'`:

- –ü—Ä–∞–≤–∏–ª—å–Ω–æ: `victoria-agent python3 /app/knowledge_os/app/enhanced_orchestrator.py`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: `python3 -c '... from enhanced_orchestrator import ...'` (–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –º–æ–¥—É–ª—å ‚Äî `app.enhanced_orchestrator`).

### 2. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Victoria –Ω–µ –∑–∞–ø—É—â–µ–Ω

Cron –≤—ã–ø–æ–ª–Ω—è–µ—Ç:

```bash
docker exec ... victoria-agent python3 /app/knowledge_os/app/enhanced_orchestrator.py
docker exec ... victoria-agent python3 /app/knowledge_os/app/nightly_learner.py
```

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **victoria-agent** –Ω–µ –∑–∞–ø—É—â–µ–Ω –≤ –º–æ–º–µ–Ω—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è cron, –∫–æ–º–∞–Ω–¥—ã –ø–∞–¥–∞—é—Ç ‚Äî –æ–±—É—á–µ–Ω–∏–µ, –¥–µ–±–∞—Ç—ã –∏ –≥–∏–ø–æ—Ç–µ–∑—ã –Ω–µ –ø–æ—è–≤—è—Ç—Å—è.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:**

```bash
docker ps | grep victoria-agent
# –µ—Å–ª–∏ –Ω–µ—Ç:
docker-compose -f knowledge_os/docker-compose.yml up -d victoria-agent
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ (—Ç–æ–≥–¥–∞ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ Victoria –µ—ë –ø–æ–¥–Ω–∏–º—É—Ç):

```bash
bash scripts/setup_system_auto_recovery.sh
```

### 3. –¢–∞–±–ª–∏—Ü–∞ `expert_learning_logs` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞

–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å, `nightly_learner.py` –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ –æ–±—É—á–µ–Ω–∏—è –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π, –∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ –≤ ¬´–ê–∫–∞–¥–µ–º–∏—è –ò–ò¬ª –Ω–∏—á–µ–≥–æ –Ω–µ –±—ã–ª–æ.

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `knowledge_os/db/migrations/add_expert_learning_logs.sql`.

**–ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –ë–î —É–∂–µ –ø–æ–¥–Ω—è—Ç–∞):**

```bash
psql "$DATABASE_URL" -f knowledge_os/db/migrations/add_expert_learning_logs.sql
# –∏–ª–∏, –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:
psql "postgresql://admin:secret@localhost:5432/knowledge_os" -f knowledge_os/db/migrations/add_expert_learning_logs.sql
```

### 4. Nightly Learner –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ 6:00 –ú–°–ö

–û–±—É—á–µ–Ω–∏–µ –∏ –¥–µ–±–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **—Ä–∞–∑ –≤ —Å—É—Ç–∫–∏**. –ï—Å–ª–∏ —Å–º–æ—Ç—Ä–µ–ª–∏ –¥–∞—à–±–æ—Ä–¥ –¥–æ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏–ª–∏ –≤ –¥—Ä—É–≥–æ–π —á–∞—Å ‚Äî –∑–∞–ø–∏—Å–µ–π –µ—â—ë –Ω–µ –±—É–¥–µ—Ç. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞ –≤ 6:00 –ú–°–ö –ø–æ—è–≤—è—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ –≤ ¬´–ê–∫–∞–¥–µ–º–∏—è –ò–ò¬ª.

### 5. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –≥–∏–ø–æ—Ç–µ–∑—ã –∏ –∑–∞–¥–∞—á–∏ –Ω–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

–ì–∏–ø–æ—Ç–µ–∑—ã –∏ –∞–≤—Ç–æ-–∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ –ª–æ–≥–∏–∫–µ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã, –¥–æ–º–µ–Ω—ã, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–Ω–∞–Ω–∏—è). –ü–æ—ç—Ç–æ–º—É ¬´–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç¬ª ‚Äî —ç—Ç–æ **–∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞**, –∞ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–æ–≤–∞—è –≥–∏–ø–æ—Ç–µ–∑–∞/–∑–∞–¥–∞—á–∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ –∏–ª–∏ —É—Å–ª–æ–≤–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –∑–∞–ø–∏—Å–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∞–ª–æ.

---

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–≤—Å—ë –ª–∏ –≥–æ—Ç–æ–≤–æ)

1. **Cron:**

   ```bash
   crontab -l
   ```
   –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å `enhanced_orchestrator` –∏ `nightly_learner`.

2. **Victoria:**

   ```bash
   curl -s http://localhost:8010/health
   ```
   –û–∂–∏–¥–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç —Å `"agent":"–í–∏–∫—Ç–æ—Ä–∏—è"` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥).

3. **–¢–∞–±–ª–∏—Ü–∞ –ª–æ–≥–æ–≤ –æ–±—É—á–µ–Ω–∏—è:**

   ```bash
   psql "postgresql://admin:secret@localhost:5432/knowledge_os" -c "\dt expert_learning_logs"
   ```
   –¢–∞–±–ª–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å.

4. **–õ–æ–≥–∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –æ–±—É—á–µ–Ω–∏—è (–µ—Å–ª–∏ cron —É–∂–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª):**

   ```bash
   tail -100 /tmp/orchestrator.log
   tail -100 /tmp/nightly_learner.log
   ```

5. **–†—É—á–Ω–æ–π –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è cron):**

   ```bash
   docker exec -e DATABASE_URL=postgresql://admin:secret@knowledge_postgres:5432/knowledge_os victoria-agent python3 /app/knowledge_os/app/enhanced_orchestrator.py
   docker exec -e DATABASE_URL=postgresql://admin:secret@knowledge_postgres:5432/knowledge_os victoria-agent python3 /app/knowledge_os/app/nightly_learner.py
   ```
   –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –¥–∞—à–±–æ—Ä–¥–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è/–æ–±–Ω–æ–≤–∏—Ç—å—Å—è –æ–±—É—á–µ–Ω–∏–µ, –¥–µ–±–∞—Ç—ã –∏, –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π, –≥–∏–ø–æ—Ç–µ–∑—ã –∏ –∑–∞–¥–∞—á–∏.

---

## –ì–¥–µ –≤ –¥–∞—à–±–æ—Ä–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å

- **–û–±—É—á–µ–Ω–∏–µ –∏ –¥–µ–±–∞—Ç—ã:** –≤–∫–ª–∞–¥–∫–∞ **¬´üéì –ê–∫–∞–¥–µ–º–∏—è –ò–ò –∏ –î–µ–±–∞—Ç—ã¬ª** (–∫–æ–ª–æ–Ω–∫–∏ ¬´–û–±—É—á–µ–Ω–∏–µ¬ª –∏ ¬´–î–µ–±–∞—Ç—ã¬ª).
- **–ó–∞–¥–∞—á–∏:** –≤–∫–ª–∞–¥–∫–∞ **¬´üõ†Ô∏è –ê–≤—Ç–æ–Ω–æ–º–Ω—ã–µ –ó–∞–¥–∞—á–∏ –∏ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è¬ª**.
- **–ì–∏–ø–æ—Ç–µ–∑—ã Singularity 9.0:** –±–ª–æ–∫ –º–µ—Ç—Ä–∏–∫ Singularity 9.0 (A/B —Ç–µ—Å—Ç—ã –≥–∏–ø–æ—Ç–µ–∑).
- **–ö—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã–µ –≥–∏–ø–æ—Ç–µ–∑—ã:** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `knowledge_nodes` —Å —Ç–µ–∫—Å—Ç–æ–º ¬´üî¨ –ö–†–û–°–°-–î–û–ú–ï–ù–ù–ê–Ø –ì–ò–ü–û–¢–ï–ó–ê¬ª; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤–∏–¥ –≤ –¥–∞—à–±–æ—Ä–¥–µ.

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤ –≤—ã—à–µ –¥–∞–Ω–Ω—ã–µ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è, —Å—Ç–æ–∏—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥ –≤—ã—à–µ –∏ –ª–æ–≥–∏ `orchestrator.log` / `nightly_learner.log` –Ω–∞ –æ—à–∏–±–∫–∏.
