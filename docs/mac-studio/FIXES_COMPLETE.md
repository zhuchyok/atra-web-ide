# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ ATRA

**–î–∞—Ç–∞:** 2026-01-25  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´**

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è** ‚Äî –ò–°–ü–†–ê–í–õ–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –±—ã–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –ë–î
- **–ü—Ä–∏—á–∏–Ω–∞:** –°–∫—Ä–∏–ø—Ç –∏—Å–∫–∞–ª `knowledge_os.sql`, –∞ —Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–ª—Å—è `knowledge_os_dump.sql`
- **–†–µ—à–µ–Ω–∏–µ:** –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –¥–∞–º–ø –≤—Ä—É—á–Ω—É—é:
  ```bash
  docker exec -i atra-knowledge-os-db psql -U admin -d knowledge_os < ~/migration/server2/knowledge_os_dump.sql
  ```
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
  - ‚úÖ 58 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
  - ‚úÖ 50,946 —É–∑–ª–æ–≤ –∑–Ω–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω—ã
  - ‚úÖ 35 –¥–æ–º–µ–Ω–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
  - ‚úÖ 27 —Ç–∞–±–ª–∏—Ü —Å–æ–∑–¥–∞–Ω—ã
  - ‚úÖ 16,903 –∑–∞–¥–∞—á (14,870 –∞–∫—Ç–∏–≤–Ω—ã—Ö)

### 2. ‚úÖ **Knowledge OS Worker ‚Äî –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** ‚Äî –ò–°–ü–†–ê–í–õ–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** `[Errno -2] Name or service not known` ‚Äî worker –Ω–µ –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
- **–ü—Ä–∏—á–∏–Ω–∞:** 
  - Worker –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ —Å–µ—Ç–∏ `knowledge_os_default`
  - –ë–î –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å –≤ —Å–µ—Ç–∏ `atra-network`
  - DATABASE_URL —É–∫–∞–∑—ã–≤–∞–ª –Ω–∞ `db:5432`, –Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ë–î –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `atra-knowledge-os-db`
- **–†–µ—à–µ–Ω–∏–µ:**
  1. –ü–æ–¥–∫–ª—é—á–∏–ª worker –∫ —Å–µ—Ç–∏ `atra-network`
  2. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º DATABASE_URL:
     ```bash
     docker run -d --name knowledge_os_worker \
       --network atra-network \
       -e DATABASE_URL=postgresql://admin:secret@atra-knowledge-os-db:5432/knowledge_os \
       --restart unless-stopped \
       knowledge_os-worker python worker.py
     ```
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
  - ‚úÖ Worker —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î
  - ‚úÖ –ù–∞–π–¥–µ–Ω–æ 58 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
  - ‚úÖ –ù–∞–π–¥–µ–Ω–æ 14,807 pending –∑–∞–¥–∞—á
  - ‚úÖ Worker –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏

### 3. ‚úÖ **–°–∫—Ä–∏–ø—Ç restore_only.py** ‚Äî –ò–°–ü–†–ê–í–õ–ï–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–∫—Ä–∏–ø—Ç –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª —Ñ–∞–π–ª `knowledge_os_dump.sql`
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ `knowledge_os_dump.sql` –≤ —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤:
  ```python
  for p in [M2 / "knowledge_os_dump.sql", M2 / "knowledge_os.sql", ...]:
  ```
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∫—Ä–∏–ø—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### 4. ‚ÑπÔ∏è **Knowledge OS API health endpoint**
- **–°—Ç–∞—Ç—É—Å:** –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MCP Server (SSE), –∞ –Ω–µ REST API
- **Health check:** –î–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `/sse` endpoint
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è MCP —Å–µ—Ä–≤–µ—Ä–∞

---

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –í–°–ï–• –°–ï–†–í–ò–°–û–í

| –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å | –ü–æ—Ä—Ç | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|--------|--------|------|------------|
| Victoria Agent | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8010 | –ì–æ—Ç–æ–≤–∞ –∫ –∑–∞–¥–∞—á–∞–º |
| Veronica Agent | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8011 | –ì–æ—Ç–æ–≤–∞ –∫ –∑–∞–¥–∞—á–∞–º |
| Knowledge OS DB | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 5432 | 58 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, 50,946 —É–∑–ª–æ–≤ –∑–Ω–∞–Ω–∏–π |
| Knowledge OS API | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8000 | MCP Server (SSE) |
| Knowledge OS Worker | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | - | –ü–æ–¥–∫–ª—é—á–µ–Ω –∫ –ë–î, –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ |
| MLX/Ollama | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 11434 | 6 –º–æ–¥–µ–ª–µ–π –¥–æ—Å—Ç—É–ø–Ω—ã |

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–û–°–ü–û–°–û–ë–ù–û–°–¢–ò

### Worker –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:
```bash
docker exec knowledge_os_worker python -c "
import asyncio
import asyncpg
import os

async def test():
    db_url = os.getenv('DATABASE_URL')
    pool = await asyncpg.create_pool(db_url)
    conn = await pool.acquire()
    result = await conn.fetchval('SELECT COUNT(*) FROM experts')
    print(f'Success! Found {result} experts')
    await pool.release(conn)
    await pool.close()

asyncio.run(test())
"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Success! Found 58 experts ‚úÖ
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```bash
docker exec -i atra-knowledge-os-db psql -U admin -d knowledge_os -c "SELECT COUNT(*) FROM experts;"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 58 ‚úÖ
```

### –ê–≥–µ–Ω—Ç—ã:
```bash
bash scripts/migration/verify_agents.sh
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ
```

---

## üéØ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

**üü¢ –í–°–ï –°–ï–†–í–ò–°–´ –†–ê–ë–û–¢–ê–Æ–¢ –ö–û–†–†–ï–ö–¢–ù–û**

- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–≥–µ–Ω—Ç—ã Victoria –∏ Veronica –æ–Ω–ª–∞–π–Ω
- ‚úÖ Knowledge OS Worker –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏
- ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ö–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (14,870 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á)

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Worker:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å worker –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á

2. **Knowledge OS API:**
   - –ï—Å–ª–∏ –Ω—É–∂–µ–Ω REST API —Å `/health` endpoint, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π MCP Server —á–µ—Ä–µ–∑ `/sse`

3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

---

*–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã 2026-01-25*
