# ‚úÖ Mac Studio M4 Max –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä ATRA

**–î–∞—Ç–∞:** 2025-01-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–î–ê, MAC STUDIO - –¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô –°–ï–†–í–ï–†**

---

## üéØ –û–¢–í–ï–¢: –î–ê, MAC STUDIO –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –ö–ê–ö –°–ï–†–í–ï–†

Mac Studio M4 Max –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ **—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** –¥–ª—è –≤—Å–µ–π –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ ATRA:

1. ‚úÖ **–°–µ—Ä–≤–µ—Ä –º–æ–¥–µ–ª–µ–π** - –≤—Å–µ production –º–æ–¥–µ–ª–∏ (131GB, 61GB, –∏ —Ç.–¥.)
2. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - Knowledge OS (PostgreSQL + pgvector)
3. ‚úÖ **API —Å–µ—Ä–≤–µ—Ä** - Knowledge OS API
4. ‚úÖ **–ê–≥–µ–Ω—Ç—ã** - Victoria, Veronica, Nightly Learner
5. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus + Grafana

---

## üèóÔ∏è –ü–û–õ–ù–ê–Ø –ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê –ù–ê MAC STUDIO

### üê≥ Docker Compose —Å–µ—Ä–≤–∏—Å—ã:

#### 1. **MLX API Server** (–ø–æ—Ä—Ç 11434)
- –í—Å–µ production –º–æ–¥–µ–ª–∏ MLX
- –î–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `localhost:11434`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏

#### 2. **Knowledge OS Database** (–ø–æ—Ä—Ç 5432)
- PostgreSQL + pgvector
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ (40+ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, –∑–Ω–∞–Ω–∏—è, –∑–∞–¥–∞—á–∏)
- –ì–æ—Ç–æ–≤–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞

#### 3. **Knowledge OS API** (–ø–æ—Ä—Ç 8000)
- REST API –¥–ª—è Knowledge OS
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç MLX –º–æ–¥–µ–ª–∏ –Ω–∞ Mac Studio
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

#### 4. **Knowledge OS Worker**
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
- –û–±—É—á–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤

#### 5. **Victoria Agent** (Team Lead)
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Mac Studio
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ Knowledge OS

#### 6. **Veronica Agent** (Web Researcher)
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Mac Studio
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
- –í–µ–±-–ø–æ–∏—Å–∫ + –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏

#### 7. **Nightly Learner**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ Mac Studio

#### 8. **Prometheus** (–ø–æ—Ä—Ç 9090)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫

#### 9. **Grafana** (–ø–æ—Ä—Ç 3000)
- –î–∞—à–±–æ—Ä–¥—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

---

## üìä –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

```
Mac Studio M4 Max (128GB/2TB)
‚îÇ
‚îú‚îÄ‚îÄ üß† Production –º–æ–¥–µ–ª–∏ (MLX)
‚îÇ   ‚îú‚îÄ‚îÄ deepseek-r1-distill-llama:70b (131GB)
‚îÇ   ‚îú‚îÄ‚îÄ qwen2.5-coder:32b (61GB)
‚îÇ   ‚îú‚îÄ‚îÄ phi3.5:3.8b (7.1GB)
‚îÇ   ‚îî‚îÄ‚îÄ –∏ –¥—Ä—É–≥–∏–µ...
‚îÇ
‚îú‚îÄ‚îÄ üê≥ Docker Network (atra-network)
‚îÇ   ‚îú‚îÄ‚îÄ mlx-api-server:11434       # MLX API Server
‚îÇ   ‚îú‚îÄ‚îÄ knowledge-os-db:5432        # PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ knowledge-os-api:8000       # Knowledge OS API
‚îÇ   ‚îú‚îÄ‚îÄ knowledge-os-worker         # Worker
‚îÇ   ‚îú‚îÄ‚îÄ victoria-agent              # Victoria
‚îÇ   ‚îú‚îÄ‚îÄ veronica-agent              # Veronica
‚îÇ   ‚îú‚îÄ‚îÄ nightly-learner             # Nightly Learner
‚îÇ   ‚îú‚îÄ‚îÄ prometheus:9090             # Prometheus
‚îÇ   ‚îî‚îÄ‚îÄ grafana:3000                # Grafana
‚îÇ
‚îî‚îÄ‚îÄ üìö Knowledge OS (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ)
    ‚îú‚îÄ‚îÄ 40+ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
    ‚îú‚îÄ‚îÄ –í—Å–µ –∑–Ω–∞–Ω–∏—è
    ‚îú‚îÄ‚îÄ –í—Å–µ –∑–∞–¥–∞—á–∏
    ‚îî‚îÄ‚îÄ –í—Å–µ –ª–æ–≥–∏
```

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### LocalAIRouter:
- **–û—Å–Ω–æ–≤–Ω–æ–π —É–∑–µ–ª:** Mac Studio M4 Max (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- **URL:** `http://localhost:11434` (MLX API Server)
- **Fallback:** Mac Studio –∏ Server (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)

### –ú–æ–¥–µ–ª–∏:
- –í—Å–µ production –º–æ–¥–µ–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ Mac Studio
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö
- Fallback –Ω–∞ –º–µ–Ω—å—à–∏–µ –º–æ–¥–µ–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## ‚úÖ –°–¢–ê–¢–£–°

### –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ:
- ‚úÖ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ–ø–∏—Å–∞–Ω—ã
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ –≥–æ—Ç–æ–≤—ã
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞

### –î–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
./scripts/start_mac_studio_full.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker-compose up -d
```

---

## üéØ –ò–¢–û–ì

**–î–ê, Mac Studio M4 Max - —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤—Å–µ–π –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏–∏ ATRA!**

- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –í—Å–µ –∞–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∑–¥–µ—Å—å
- ‚úÖ –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å (–º–æ–∂–µ–º –æ—Ç–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä)

---

*–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–æ–π —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ ATRA - 2025-01-21*

