# –ü–û–õ–ù–û–ï –†–ï–ó–Æ–ú–ï –í–°–ï–ì–û –ß–ê–¢–ê - –î–õ–Ø VICTORIA

## –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï
–í —ç—Ç–æ–º —á–∞—Ç–µ –±—ã–ª–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Ç–∞ –Ω–∞ http://localhost:3000 –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Å–µ–º–∏ 8 –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –Ω–∞ Mac Studio –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å Victoria Agent.

## –í–°–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ü–û –§–ê–ô–õ–ê–ú

### 1. frontend/src/stores/chat.js
**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –°—Ç—Ä–æ–∫–∞ 121
- –ë—ã–ª–æ: `use_victoria: true`
- –°—Ç–∞–ª–æ: `use_victoria: false  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ –Ω–∞ Mac Studio`

### 2. backend/app/routers/chat.py

#### –§—É–Ω–∫—Ü–∏—è _select_model_for_chat() (—Å—Ç—Ä–æ–∫–∏ 74-119)
–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –∏–∑ –≤—Å–µ—Ö 8 –º–æ–¥–µ–ª–µ–π:
- **command-r-plus:104b** - –¥–ª—è complex/enterprise –∑–∞–¥–∞—á (—Å–ª–æ–≤–∞: —Å–ª–æ–∂–Ω, –∫–æ—Ä–ø–æ—Ä–∞—Ü, rag, enterprise, –∫—Ä–∏—Ç–∏—á–Ω, –≤–∞–∂–Ω, —Å—Ç—Ä–∞—Ç–µ–≥)
- **deepseek-r1-distill-llama:70b** - –¥–ª—è reasoning –∑–∞–¥–∞—á (—Å–ª–æ–≤–∞: –ø–æ–¥—É–º–∞–π, –ª–æ–≥–∏–∫–∞, –ø–ª–∞–Ω–∏—Ä, reasoning, –∞–Ω–∞–ª–∏–∑, –æ–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É)
- **llama3.3:70b** - –¥–ª—è complex –∑–∞–¥–∞—á (—Å–ª–æ–≤–∞: –∫–∞—á–µ—Å—Ç–≤, –ª—É—á—à, –æ–ø—Ç–∏–º–∞–ª—å–Ω, –º–∞–∫—Å–∏–º–∞–ª—å–Ω, –¥–µ—Ç–∞–ª—å–Ω)
- **qwen2.5-coder:32b** - –¥–ª—è coding high quality (—Å–ª–æ–≤–∞: –∫–æ–¥, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä, —Ñ—É–Ω–∫—Ü–∏, –∫–ª–∞—Å—Å, python, javascript, typescript, –∞–ª–≥–æ—Ä–∏—Ç–º)
- **phi3.5:3.8b** - –¥–ª—è fast/general (–¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è >200 —Å–∏–º–≤–æ–ª–æ–≤)
- **phi3:mini-4k** - –¥–ª—è fast lightweight (—Å–æ–æ–±—â–µ–Ω–∏—è <200 —Å–∏–º–≤–æ–ª–æ–≤)
- **tinyllama:1.1b-chat** - –¥–ª—è fast ultra-lightweight (—Å–æ–æ–±—â–µ–Ω–∏—è <100 —Å–∏–º–≤–æ–ª–æ–≤)
- **qwen2.5:3b** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

#### –§—É–Ω–∫—Ü–∏—è _get_available_model() (—Å—Ç—Ä–æ–∫–∏ 122-211)
–î–æ–±–∞–≤–ª–µ–Ω—ã fallback —Ü–µ–ø–æ—á–∫–∏:
- command-r-plus:104b ‚Üí llama3.3:70b ‚Üí qwen2.5-coder:7b
- deepseek-r1-distill-llama:70b ‚Üí deepseek-r1:7b ‚Üí qwen2.5-coder:7b
- llama3.3:70b ‚Üí deepseek-r1-distill-llama:70b ‚Üí qwen2.5-coder:7b
- qwen2.5-coder:32b ‚Üí qwen2.5-coder:7b ‚Üí qwen2.5-coder:3b
- phi3.5:3.8b ‚Üí phi4:latest ‚Üí qwen2.5-coder:3b
- phi3:mini-4k ‚Üí qwen2.5-coder:3b ‚Üí phi4:latest
- qwen2.5:3b ‚Üí qwen2.5-coder:3b ‚Üí phi4:latest
- tinyllama:1.1b-chat ‚Üí qwen2.5-coder:3b ‚Üí phi4:latest

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 306-318)
–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- üéØ –ò–¥–µ–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ –í—ã–±—Ä–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –ø–æ—Å–ª–µ fallback
- üöÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Ollama

### 3. backend/app/services/ollama.py

#### MODELS —Å–ª–æ–≤–∞—Ä—å (—Å—Ç—Ä–æ–∫–∏ 22-35)
```python
MODELS = {
    "complex": "command-r-plus:104b",
    "enterprise": "command-r-plus:104b",
    "reasoning": "deepseek-r1-distill-llama:70b",
    "complex_alt": "llama3.3:70b",
    "coding": "qwen2.5-coder:32b",
    "fast": "phi3.5:3.8b",
    "fast_light": "phi3:mini-4k",
    "default": "qwen2.5:3b",
    "tiny": "tinyllama:1.1b-chat"
}
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 111-118)
–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:
- üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ Ollama
- üì¶ Payload (–º–æ–¥–µ–ª—å, –¥–ª–∏–Ω–∞ –ø—Ä–æ–º–ø—Ç–∞)
- üì• –û—Ç–≤–µ—Ç Ollama (—Å—Ç–∞—Ç—É—Å)

### 4. backend/app/services/victoria.py
**–°—Ç—Ä–æ–∫–∏ 84-97:** –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ Victoria, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

### 5. docker-compose.yml
**–°—Ç—Ä–æ–∫–∏ 32-33:**
- OLLAMA_URL=http://192.168.1.38:11434
- VICTORIA_URL=http://host.docker.internal:8010

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ollama
- **–§–∞–π–ª:** ~/Library/LaunchAgents/homebrew.mxcl.ollama.plist
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** OLLAMA_HOST=0.0.0.0:11434
- **–°–∫—Ä–∏–ø—Ç:** scripts/setup_ollama_for_docker.sh

## –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ù–ê MAC STUDIO

### –§–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã:
‚úÖ frontend/src/stores/chat.js
‚úÖ backend/app/routers/chat.py
‚úÖ backend/app/services/ollama.py
‚úÖ backend/app/services/victoria.py
‚úÖ docker-compose.yml

### –°–∫—Ä–∏–ø—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
‚úÖ scripts/apply_chat_changes_mac_studio.sh

## –ó–ê–î–ê–ß–ò –î–õ–Ø VICTORIA

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ Mac Studio**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —á–∞—Ç–∞** (–ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ Victoria Agent)
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –µ—Å–ª–∏ –µ—Å—Ç—å**
4. **–°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Å—Ç–∞—Ç—É—Å–µ**

## –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

–í—Å–µ 8 –º–æ–¥–µ–ª–µ–π Mac Studio –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ fallback —Ü–µ–ø–æ—á–∫–∞–º–∏.
