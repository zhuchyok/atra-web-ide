# ‚úÖ MLX –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ Mac Studio M4 Max

**–î–∞—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** 2025-01-21  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–°–¢–ê–ù–û–í–õ–ï–ù–û –ò –†–ê–ë–û–¢–ê–ï–¢**

---

## üì¶ –£–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ï –ü–ê–ö–ï–¢–´

- ‚úÖ **mlx** (0.30.3) - –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ MLX
- ‚úÖ **mlx-metal** (0.30.3) - MLX –¥–ª—è Apple Silicon Metal
- ‚úÖ **mlx-lm** (0.30.4) - MLX –¥–ª—è —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ **transformers** (5.0.0rc1) - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HuggingFace –º–æ–¥–µ–ª–µ–π
- ‚úÖ **huggingface-hub** (1.3.2) - –†–∞–±–æ—Ç–∞ —Å HuggingFace Hub

---

## üîß –£–°–¢–ê–ù–û–í–ö–ê –í–´–ü–û–õ–ù–ï–ù–ê –í:

**–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:** `./venv/`

### –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
source venv/bin/activate
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
python3 -c "import mlx.core as mx; from mlx_lm import load; print('‚úÖ MLX —Ä–∞–±–æ—Ç–∞–µ—Ç!')"
```

---

## üéØ –î–û–°–¢–£–ü–ù–´–ï MLX –ú–û–î–ï–õ–ò

MLX –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –∏–∑ HuggingFace –∫–µ—à–∞:

1. **mlx-community/Phi-3-mini-4k-instruct-4bit** (4.01 GB)
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `~/.cache/huggingface/hub/`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

2. **mlx-community/Qwen2.5-3B-Instruct-4bit** (3.26 GB)
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `~/.cache/huggingface/hub/`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

---

## üíª –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏:
```python
from mlx_lm import load

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∏–∑ –∫–µ—à–∞
model, tokenizer = load("mlx-community/Phi-3-mini-4k-instruct-4bit")
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞:
```python
from mlx_lm import generate

response = generate(model, tokenizer, prompt="Hello, how are you?")
print(response)
```

---

## üîÑ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –°–ò–°–¢–ï–ú–û–ô

MLX –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å:
- ‚úÖ `knowledge_os/app/mlx_router.py` - –†–æ—É—Ç–µ—Ä –¥–ª—è MLX –º–æ–¥–µ–ª–µ–π
- ‚úÖ `knowledge_os/app/mlx_api_server.py` - FastAPI —Å–µ—Ä–≤–µ—Ä –¥–ª—è MLX
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ–∂–¥—É Ollama –∏ MLX –≤ `local_router.py`

---

## üìä –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê MLX

1. **Neural Engine:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Apple Neural Engine –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
2. **Unified Memory:** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Unified Memory –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è Apple Silicon
4. **–°–∫–æ—Ä–æ—Å—Ç—å:** –î–æ 2-4x –±—ã—Å—Ç—Ä–µ–µ —á–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## ‚úÖ –°–¢–ê–¢–£–°

- ‚úÖ MLX —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ MLX-LM —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú–æ–¥–µ–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ HuggingFace –∫–µ—à–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

*–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–æ–π —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ ATRA - 2025-01-21*

