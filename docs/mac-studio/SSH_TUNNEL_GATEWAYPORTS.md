# üîß –ù–ê–°–¢–†–û–ô–ö–ê GATEWAYPORTS –î–õ–Ø SSH REVERSE TUNNEL

**–î–∞—Ç–∞:** 2026-01-25  
**–ü—Ä–æ–±–ª–µ–º–∞:** SSH Reverse Tunnel —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ localhost —Å–µ—Ä–≤–µ—Ä–∞, –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê

SSH Reverse Tunnel —Å–æ–∑–¥–∞–µ—Ç –ø–æ—Ä—Ç—ã –Ω–∞ `127.0.0.1` (localhost) —Å–µ—Ä–≤–µ—Ä–∞, –∞ –Ω–µ –Ω–∞ –≤–Ω–µ—à–Ω–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, —Ç–æ–ª—å–∫–æ —Å —Å–∞–º–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GatewayPorts

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ 185.177.216.15:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@185.177.216.15

# 2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
echo "GatewayPorts yes" > /etc/ssh/sshd_config.d/gatewayports.conf

# 3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ SSH —Å–µ—Ä–≤–µ—Ä
systemctl reload sshd

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
grep GatewayPorts /etc/ssh/sshd_config.d/gatewayports.conf
```

### –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GatewayPorts:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª–∏ –Ω–∞ Mac Studio:**
   ```bash
   bash scripts/setup_ssh_tunnel_for_headscale.sh
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:**
   ```bash
   curl http://185.177.216.15:8010/health
   curl http://185.177.216.15:8011/health
   ```

---

## ‚ö†Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

**GatewayPorts yes** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—ã –Ω–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- ‚úÖ –§–∞–π—Ä–≤–æ–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ü–æ—Ä—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- ‚úÖ –î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

## üîÑ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: Nginx Reverse Proxy

–ï—Å–ª–∏ GatewayPorts –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```nginx
# /etc/nginx/sites-available/mac-studio-tunnels
server {
    listen 8010;
    location / {
        proxy_pass http://127.0.0.1:8010;
    }
}

server {
    listen 8011;
    location / {
        proxy_pass http://127.0.0.1:8011;
    }
}
```

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω 2026-01-25*
