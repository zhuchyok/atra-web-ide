# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï VICTORIA: –ü–û–î–î–ï–†–ñ–ö–ê MLX –ò OLLAMA

**–î–∞—Ç–∞:** 2026-01-25  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. **Executor: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π URL** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í —Å—Ç—Ä–æ–∫–µ 73 –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª `url = f"{self.base_url}/api/chat"`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** URL –¥–æ–±–∞–≤–ª–µ–Ω
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 2. **Victoria: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MLX** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** Victoria –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ OllamaExecutor, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞ MLX
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LocalAIRouter –≤ `__init__()`
  - LocalAIRouter –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
  - –ú–µ—Ç–æ–¥ `step()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LocalAIRouter —Å fallback –Ω–∞ OllamaExecutor
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 3. **Victoria: –º–µ—Ç–æ–¥ step()** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** `step()` –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª LocalAIRouter
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `self.local_router`
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: LocalAIRouter (MLX) ‚Üí OllamaExecutor (Ollama)
  - Fallback –Ω–∞ Ollama –µ—Å–ª–∏ MLX –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üìä –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π:**

1. **MLX (Apple Neural Engine)** ‚Äî —á–µ—Ä–µ–∑ LocalAIRouter
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Mac Studio (MLX) –Ω–∞ –ø–æ—Ä—Ç—É 11435
   - –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Mac Studio
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

2. **Ollama** ‚Äî —á–µ—Ä–µ–∑ OllamaExecutor
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Fallback –µ—Å–ª–∏ MLX –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `http://host.docker.internal:11434`
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –º–æ–¥–µ–ª–∏ Ollama

### **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

```python
# –í step():
if self.local_router:
    try:
        # –ü—Ä–æ–±—É–µ–º MLX —á–µ—Ä–µ–∑ LocalAIRouter
        result, routing_source = await self.local_router.run_local_llm(...)
        if result:
            return parsed_result
    except:
        # Fallback –Ω–∞ Ollama
        return await self.executor.ask(...)
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

**Victoria —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**
- ‚úÖ **MLX** (Apple Neural Engine) ‚Äî —á–µ—Ä–µ–∑ LocalAIRouter
- ‚úÖ **Ollama** ‚Äî —á–µ—Ä–µ–∑ OllamaExecutor (fallback)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Mac Studio (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MLX)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ Ollama –µ—Å–ª–∏ MLX –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ì–∏–±–∫–æ—Å—Ç—å –≤ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω 2026-01-25*
