# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø VICTORIA: MLX –ò OLLAMA

**–î–∞—Ç–∞:** 2026-01-25  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. **Executor: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π URL** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í —Å—Ç—Ä–æ–∫–µ 73 –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª `url = f"{self.base_url}/api/chat"`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** URL –¥–æ–±–∞–≤–ª–µ–Ω
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 2. **Victoria: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ MLX** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** Victoria –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ç–æ–ª—å–∫–æ OllamaExecutor
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LocalAIRouter –≤ `__init__()`
  - –ú–µ—Ç–æ–¥ `step()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç LocalAIRouter —Å fallback –Ω–∞ OllamaExecutor
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 3. **LocalAIRouter: URL –¥–ª—è Docker** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `localhost:11434`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Docker –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `host.docker.internal:11434` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `localhost:11434` –ª–æ–∫–∞–ª—å–Ω–æ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 4. **LocalAIRouter: endpoint** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `/api/generate` –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/chat` –¥–ª—è Ollama (–±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π endpoint)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/generate` –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 5. **Victoria: –º–æ–¥–µ–ª—å** ‚úÖ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ `qwen2.5-coder:32b`, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ `VICTORIA_MODEL=deepseek-r1:7b` –≤ docker-compose.yml
  - –ú–æ–¥–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üìä –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π:**

1. **MLX (Apple Neural Engine)** ‚Äî —á–µ—Ä–µ–∑ LocalAIRouter
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Mac Studio (MLX) –Ω–∞ –ø–æ—Ä—Ç—É 11435
   - –°–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ Mac Studio
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

2. **Ollama (–ª–æ–∫–∞–ª—å–Ω–æ)** ‚Äî —á–µ—Ä–µ–∑ LocalAIRouter
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Mac Studio (Ollama) –Ω–∞ –ø–æ—Ä—Ç—É 11434
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ MLX –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

3. **Ollama (—á–µ—Ä–µ–∑ OllamaExecutor)** ‚Äî fallback
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ Ollama
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ—Å–ª–∏ LocalAIRouter –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

```python
# –í step():
if self.local_router:
    try:
        # –ü—Ä–æ–±—É–µ–º MLX/Ollama —á–µ—Ä–µ–∑ LocalAIRouter
        result, routing_source = await self.local_router.run_local_llm(...)
        if result:
            return parsed_result
    except:
        # Fallback –Ω–∞ OllamaExecutor
        return await self.executor.ask(...)
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

**Victoria —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:**
- ‚úÖ **MLX** (Apple Neural Engine) ‚Äî —á–µ—Ä–µ–∑ LocalAIRouter
- ‚úÖ **Ollama** ‚Äî —á–µ—Ä–µ–∑ LocalAIRouter –∏ OllamaExecutor
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback** –º–µ–∂–¥—É –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Mac Studio (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MLX)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ Ollama –µ—Å–ª–∏ MLX –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- –ì–∏–±–∫–æ—Å—Ç—å –≤ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω 2026-01-25*
