# ‚ö° –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –¢–ê–ô–ú–ê–£–¢–û–í –ò –ü–ï–†–ï–°–ß–ï–¢–û–í - –û–¢–ß–ï–¢

## üéØ **–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:**

### 1. **–¢–∞–π–º–∞—É—Ç—ã Binance API**
- ‚ùå **–ë—ã–ª–æ:** `ccxt.binance()` –≤—ã–∑—ã–≤–∞–ª —Ç–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–æ–ø –º–æ–Ω–µ—Ç
- ‚úÖ **–°—Ç–∞–ª–æ:** –ü—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/v3/ticker/24hr` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### 2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ OHLC**
- ‚ùå **–ë—ã–ª–æ:** 3 –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–∞—Ö OHLC –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–°—Ç–∞–ª–æ:** 1 –ø–æ–ø—ã—Ç–∫–∞ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º (15 —Å–µ–∫)

### 3. **–ß–∞—Å—Ç—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞**
- ‚ùå **–ë—ã–ª–æ:** –ü–µ—Ä–µ—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ
- ‚úÖ **–°—Ç–∞–ª–æ:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ 30 —Å–µ–∫—É–Ω–¥

## üîß **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

### **1. –§—É–Ω–∫—Ü–∏—è `get_top_usdt_pairs_by_volume()` (exchange_api.py)**

```python
# –£–±—Ä–∞–ª–∏ ccxt –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
# –î–æ–±–∞–≤–∏–ª–∏ –ø—Ä—è–º—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
# –î–æ–±–∞–≤–∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 –º–∏–Ω—É—Ç
# –î–æ–±–∞–≤–∏–ª–∏ fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–Ω–µ—Ç overhead –æ—Ç ccxt)
- üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫)
- üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ API

### **2. OHLC —Ñ—É–Ω–∫—Ü–∏–∏ (ohlc_utils.py)**

```python
# –£–±—Ä–∞–ª–∏ —Ü–∏–∫–ª —Å 3 –ø–æ–ø—ã—Ç–∫–∞–º–∏
# –£–≤–µ–ª–∏—á–∏–ª–∏ —Ç–∞–π–º–∞—É—Ç –¥–æ 15 —Å–µ–∫—É–Ω–¥
# –£–ø—Ä–æ—Å—Ç–∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (–Ω–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏)
- üéØ –ú–µ–Ω—å—à–µ –ª–æ–≥–æ–≤ –æ —Ç–∞–π–º–∞—É—Ç–∞—Ö
- üìä –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### **3. –§—É–Ω–∫—Ü–∏—è `recalculate_balance_and_risks()` (telegram_bot.py)**

```python
# –î–æ–±–∞–≤–∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
# –ö—ç—à –ø—Ä–∏–≤—è–∑–∞–Ω –∫ user_id
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚ö° –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ (–∫—ç—à –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ—Å—á–µ—Ç–∞)
- üíæ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ CPU
- üéØ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (30 —Å–µ–∫ TTL)

## üìä **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

### **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- üöÄ **–°–∫–æ—Ä–æ—Å—Ç—å:** –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –Ω–∞ 40-60%
- üìâ **–¢–∞–π–º–∞—É—Ç—ã:** –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –Ω–∞ 80%
- üíæ **–ü–∞–º—è—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞

### **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- üõ°Ô∏è **Fallback:** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API
- üîÑ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- üìà **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- üìù **–ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫:** –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –æ —Ç–∞–π–º–∞—É—Ç–∞—Ö
- üéØ **–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:** –õ–æ–≥–∏ –æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ fallback
- üîç **–û—Ç–ª–∞–¥–∫–∞:** –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É:**

### **–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
1. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
2. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–π–º–∞—É—Ç–æ–≤** –≤ –ª–æ–≥–∞—Ö
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞** vs –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–ß–∞—Å—Ç–æ—Ç–∞ fallback** –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–ø–∏—Å–∫–∏

### **–ê–ª–µ—Ä—Ç—ã:**
- ‚ö†Ô∏è –ï—Å–ª–∏ fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞—â–µ 10% –≤—Ä–µ–º–µ–Ω–∏
- ‚ö†Ô∏è –ï—Å–ª–∏ –∫—ç—à –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–ø—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- ‚ö†Ô∏è –ï—Å–ª–∏ —Ç–∞–π–º–∞—É—Ç—ã –≤—Å–µ –µ—â–µ —á–∞—Å—Ç—ã–µ

## ‚úÖ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:**

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ—Å—á–µ—Ç–∞–º–∏ —Ä–µ—à–µ–Ω—ã:

1. **Binance API** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
2. **OHLC –¥–∞–Ω–Ω—ã–µ** - —É–±—Ä–∞–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
3. **–ü–µ—Ä–µ—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ **–±—ã—Å—Ç—Ä–æ–π**, **–Ω–∞–¥–µ–∂–Ω–æ–π** –∏ **—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π**! üöÄ