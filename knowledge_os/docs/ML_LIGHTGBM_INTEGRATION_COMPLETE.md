# ‚úÖ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø LIGHTGBM –ó–ê–í–ï–†–®–ï–ù–ê

## üéØ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å LightGBM
- **–§–∞–π–ª**: `lightgbm_predictor.py`
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
  - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞)
  - –†–µ–≥—Ä–µ—Å—Å–æ—Ä (—Ä–∞–∑–º–µ—Ä –ø—Ä–∏–±—ã–ª–∏)
  - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
  - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ 30+ features

### 2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ signal_live.py
- **–ò–º–ø–æ—Ä—Ç –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** (—Å—Ç—Ä–æ–∫–∏ 1289-1303)
- **–§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ ML** `check_ml_filter()` (—Å—Ç—Ä–æ–∫–∏ 4512-4648)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LONG CLASSIC –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 2519-2540)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LONG Alt-1 –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 2621-2652)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LONG Alt-2 –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 2705-2736)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LONG Alt-3 –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 2798-2829)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SHORT CLASSIC –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 2888-2919)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SHORT Alt-1 –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 2988-3019)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SHORT Alt-2 –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 3126-3157)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SHORT Alt-3 –ø–∞—Ç—Ç–µ—Ä–Ω** (—Å—Ç—Ä–æ–∫–∏ 3235-3266)

### 3. ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è
- **–§–∞–π–ª**: `train_lightgbm_models.py`
- –ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π

### 4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ LONG –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **LONG CLASSIC** (—Å—Ç—Ä–æ–∫–∞ 2519)
- **LONG Alt-1** (—Å—Ç—Ä–æ–∫–∞ 2621)
- **LONG Alt-2** (—Å—Ç—Ä–æ–∫–∞ 2705)
- **LONG Alt-3** (—Å—Ç—Ä–æ–∫–∞ 2798)

### 5. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ SHORT –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **SHORT CLASSIC** (—Å—Ç—Ä–æ–∫–∞ 2888)
- **SHORT Alt-1** (—Å—Ç—Ä–æ–∫–∞ 2988)
- **SHORT Alt-2** (—Å—Ç—Ä–æ–∫–∞ 3126)
- **SHORT Alt-3** (—Å—Ç—Ä–æ–∫–∞ 3235)

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install lightgbm scikit-learn
```

### –®–∞–≥ 2: –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏

```bash
python train_lightgbm_models.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–æ–¥–µ–ª–∏ –±—É–¥—É—Ç –æ–±—É—á–µ–Ω—ã –Ω–∞ –≤–∞—à–∏—Ö 50K –ø–∞—Ç—Ç–µ—Ä–Ω–∞—Ö
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≤—ã–≤–µ–¥—É—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- –ú–æ–¥–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `ai_learning_data/lightgbm_models/`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `signal_live.py`.

–í –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úÖ LightGBM –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã
ü§ñ [ML PREDICTION] BTCUSDT BUY: success_prob=75.23%, expected_profit=2.45%, combined_score=1.842, recommendation=BUY
‚úÖ [ML PASS] BTCUSDT LONG CLASSIC: ML —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–π–¥–µ–Ω
```

---

## üìä –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ ML –§–ò–õ–¨–¢–†

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–°–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ**:
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (RSI, EMA, MACD, BB, ATR, ADX)
   - –†—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è (BTC trend, volume_ratio, volatility)
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–∞ (entry_price, tp1, tp2, risk_pct, leverage)

2. **–î–µ–ª–∞–µ—Ç—Å—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ**:
   - –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä: –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞ (0-100%)
   - –†–µ–≥—Ä–µ—Å—Å–æ—Ä: –æ–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–∏–±—ã–ª—å –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
   - –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π score: `success_prob * expected_profit`

3. **–ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ—Ä–æ–≥–∏**:
   - `success_probability >= 0.6` (60%)
   - `expected_profit_pct >= 0.5%`
   - `combined_score >= 0.3`

4. **–ü—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ**:
   - ‚úÖ –ï—Å–ª–∏ –≤—Å–µ –ø–æ—Ä–æ–≥–∏ –ø—Ä–æ–π–¥–µ–Ω—ã ‚Üí —Å–∏–≥–Ω–∞–ª –ø—Ä–æ—Ö–æ–¥–∏—Ç
   - ‚ùå –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–æ—Ä–æ–≥ –Ω–µ –ø—Ä–æ–π–¥–µ–Ω ‚Üí —Å–∏–≥–Ω–∞–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ê –ü–û–†–û–ì–û–í

–ü–æ—Ä–æ–≥–∏ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `check_ml_filter()` (—Å—Ç—Ä–æ–∫–∏ 4604-4606):

```python
min_success_prob = 0.6      # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞ (60%)
min_expected_profit = 0.5   # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –æ–∂–∏–¥–∞–µ–º–∞—è –ø—Ä–∏–±—ã–ª—å (0.5%)
min_combined_score = 0.3    # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π score
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: —É–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥–∏
- –î–ª—è –±–æ–ª–µ–µ –º—è–≥–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: —É–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥–∏
- –ù–∞—á–Ω–∏—Ç–µ —Å —Ç–µ–∫—É—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üîç –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –õ–æ–≥–∏ ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π:

```
ü§ñ [ML PREDICTION] BTCUSDT BUY: success_prob=75.23%, expected_profit=2.45%, combined_score=1.842, recommendation=BUY
‚úÖ [ML PASS] BTCUSDT LONG CLASSIC: ML —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–π–¥–µ–Ω: ML_PASSED (prob=75.23%, profit=2.45%)
```

–ò–ª–∏ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ:

```
ü§ñ [ML PREDICTION] ETHUSDT BUY: success_prob=45.12%, expected_profit=0.23%, combined_score=0.104, recommendation=SKIP
üö´ [ML BLOCK] ETHUSDT LONG CLASSIC: ML —Ñ–∏–ª—å—Ç—Ä –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª —Å–∏–≥–Ω–∞–ª: ML_BLOCKED (prob=45.12%, profit=0.23%, score=0.104)
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### 1. **Graceful Degradation**
–ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ –æ–±—É—á–µ–Ω—ã –∏–ª–∏ LightGBM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ ML —Ñ–∏–ª—å—Ç—Ä–∞
- –°–∏–≥–Ω–∞–ª—ã –Ω–µ –±—É–¥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `‚ö†Ô∏è LightGBM –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–æ –º–æ–¥–µ–ª–∏ –Ω–µ –æ–±—É—á–µ–Ω—ã`

### 2. **Fail-Safe**
–ü—Ä–∏ –æ—à–∏–±–∫–µ –≤ ML —Ñ–∏–ª—å—Ç—Ä–µ:
- –°–∏–≥–Ω–∞–ª **–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** (fail-safe)
- –û—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

### 3. **–¢–µ–∫—É—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
ML —Ñ–∏–ª—å—Ç—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ **–≤—Å–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã**:
- ‚úÖ **LONG CLASSIC** (—Å—Ç—Ä–æ–∫–∞ 2519)
- ‚úÖ **LONG Alt-1** (—Å—Ç—Ä–æ–∫–∞ 2621)
- ‚úÖ **LONG Alt-2** (—Å—Ç—Ä–æ–∫–∞ 2705)
- ‚úÖ **LONG Alt-3** (—Å—Ç—Ä–æ–∫–∞ 2798)
- ‚úÖ **SHORT CLASSIC** (—Å—Ç—Ä–æ–∫–∞ 2888)
- ‚úÖ **SHORT Alt-1** (—Å—Ç—Ä–æ–∫–∞ 2988)
- ‚úÖ **SHORT Alt-2** (—Å—Ç—Ä–æ–∫–∞ 3126)
- ‚úÖ **SHORT Alt-3** (—Å—Ç—Ä–æ–∫–∞ 3235)

–í—Å–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—ã ML —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π!

---

## üìà –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** - –∑–∞–ø—É—Å—Ç–∏—Ç—å `train_lightgbm_models.py`
2. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LONG** - ML —Ñ–∏–ª—å—Ç—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ –≤—Å–µ LONG –ø–∞—Ç—Ç–µ—Ä–Ω—ã
3. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SHORT** - ML —Ñ–∏–ª—å—Ç—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ –≤—Å–µ SHORT –ø–∞—Ç—Ç–µ—Ä–Ω—ã
4. ‚è≠Ô∏è **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –≤ –ª–æ–≥–∞—Ö
5. ‚è≠Ô∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤** - –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

- **–£–ª—É—á—à–µ–Ω–∏–µ win rate**: +5-10%
- **–°–Ω–∏–∂–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤**: -20%
- **–£–ª—É—á—à–µ–Ω–∏–µ Sharpe Ratio**: +10-15%
- **–ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è**: MAE < 2%

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ç–æ–≤–æ –∫ –æ–±—É—á–µ–Ω–∏—é –º–æ–¥–µ–ª–µ–π!
**–î–∞—Ç–∞**: 2025-01-XX

