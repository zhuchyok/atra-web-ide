# üîÑ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –†–ï–ó–ï–†–í–ù–´–• –ò–°–¢–û–ß–ù–ò–ö–û–í - –û–¢–ß–ï–¢

## ‚úÖ **–ß–¢–û –°–î–ï–õ–ê–ù–û:**

### **1. –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ Bybit –≤ `pair_filtering.py`**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ Binance API —Å–∏—Å—Ç–µ–º–∞ –ø–∞–¥–∞–ª–∞, –∞ –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞–ª–∞—Å—å –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Å–∫–∞–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –º–æ–Ω–µ—Ç:

```python
1. Binance (–æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫)
   ‚Üì timeout/error
2. Bybit (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫)
   ‚Üì timeout/error
3. –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫—ç—à (<1 —á–∞—Å) —Å –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï–ú
   ‚Üì –Ω–µ—Ç –∫—ç—à–∞
4. –í–æ–∑–≤—Ä–∞—Ç None ‚Üí –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —á–µ—Ä–µ–∑ 30 —Å–µ–∫ (–º–∞–∫—Å. 3 –ø–æ–ø—ã—Ç–∫–∏)
   ‚Üì –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ—É–¥–∞—á–Ω—ã
5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ COINS –∏–∑ config.py
```

### **2. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

```python
try:
    # 1. –ü—Ä–æ–±—É–µ–º Binance
    exchange = ccxt.binance()
    tickers = exchange.fetch_tickers()
    # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
    
except (Timeout, RequestTimeout) as e:
    logging.warning("‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç Binance: %s", e)
    logging.info("üîÑ –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å Bybit...")
    
    try:
        # 2. –ü—Ä–æ–±—É–µ–º Bybit
        exchange_bybit = ccxt.bybit()
        tickers_bybit = exchange_bybit.fetch_tickers()
        # ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
        
        if len(result) >= limit // 2:
            logging.info("‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å Bybit: %d –º–æ–Ω–µ—Ç", len(result))
            return result
        else:
            raise Exception("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö")
            
    except Exception as bybit_error:
        logging.warning("‚ö†Ô∏è Bybit fallback –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: %s", bybit_error)
    
    # 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫
    logging.info("üìã –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç")
    return default_pairs[:limit]
```

## üìä **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ó–ï–†–í–ù–´–ï –ò–°–¢–û–ß–ù–ò–ö–ò:**

### **–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö:**

1. **`signal_live.py`** - OHLC –¥–∞–Ω–Ω—ã–µ:
   - ‚úÖ Binance ‚Üí Bybit ‚Üí Bitget
   - ‚úÖ SourcesHub —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

2. **`market_cap.py`** - Market Cap –¥–∞–Ω–Ω—ã–µ:
   - ‚úÖ CoinGecko ‚Üí CoinMarketCap ‚Üí Binance
   - ‚úÖ `get_market_cap_fallback_sources()`

3. **`sources_hub.py`** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ö–∞–±:
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
   - ‚úÖ Circuit breaker –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫
   - ‚úÖ Rate limiting

4. **`smart_data_strategy.py`** - –£–º–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:
   - ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### **–î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```
Binance timeout ‚Üí ‚ùå –°–∏—Å—Ç–µ–º–∞ –ø–∞–¥–∞–µ—Ç
```

### **–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```
Binance timeout ‚Üí 
  ‚Üí Bybit —É—Å–ø–µ—à–Ω–æ ‚Üí ‚úÖ –†–∞–±–æ—Ç–∞–µ–º —Å Bybit
  ‚Üí Bybit timeout ‚Üí 
    ‚Üí –ï—Å—Ç—å –∫—ç—à (<1 —á–∞—Å)? ‚Üí ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ–º —Å –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï–ú
    ‚Üí –ù–µ—Ç –∫—ç—à–∞ ‚Üí 
      ‚Üí –ü–æ–ø—ã—Ç–∫–∞ 1/3 ‚Üí –∂–¥–µ–º 30 —Å–µ–∫
      ‚Üí –ü–æ–ø—ã—Ç–∫–∞ 2/3 ‚Üí –∂–¥–µ–º 30 —Å–µ–∫
      ‚Üí –ü–æ–ø—ã—Ç–∫–∞ 3/3 ‚Üí –≤—Å–µ –Ω–µ—É–¥–∞—á–Ω–æ
        ‚Üí ‚ÑπÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫ (config.COINS)
```

## üìà **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:**

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–µ—Ç —Ä–∞–±–æ—Ç—ã —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (>1 —á–∞—Å)
2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: 2 –±–∏—Ä–∂–∏ + –∫—ç—à + 3 –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
3. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ + –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ 5 –º–∏–Ω—É—Ç
5. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∫–∞–∂–¥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
6. **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö —Å–µ—Ç–∏
7. **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥

## üõ°Ô∏è **–ó–ê–©–ò–¢–ù–´–ï –ú–ï–•–ê–ù–ò–ó–ú–´:**

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ (>10M USDT)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤
- ‚úÖ Whitelist/Blacklist –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç (>50% –æ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üöÄ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:**

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ:
- ‚úÖ –ü–æ–ø—Ä–æ–±—É–µ—Ç Binance
- ‚úÖ –ü—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ Bybit
- ‚úÖ –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –æ–±–æ–∏—Ö - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–ø–∏—Å–æ–∫

**–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** ‚úÖ

