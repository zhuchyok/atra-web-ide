# ‚≠ê –û–ë–ù–û–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π

## üéØ **–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å**

**–ë—ã–ª–æ:**
- –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Ç–æ–ª—å–∫–æ –∏—Å—Ç–æ—Ä–∏—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- –ù–µ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—â–∏–µ —Å–∏–≥–Ω–∞–ª—ã

**–°—Ç–∞–ª–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º **–æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î
- ‚úÖ –í—ã—á–∏—Å–ª—è–µ–º –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–π –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª, –µ—Å–ª–∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è >= 0.75

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

**–ú–µ—Ç–æ–¥:** `_get_user_open_positions(user_id)`
- –ó–∞–ø—Ä–æ—Å –∫ —Ç–∞–±–ª–∏—Ü–µ `signals_log`
- –£—Å–ª–æ–≤–∏–µ: `WHERE result LIKE 'OPEN%' AND user_id = ?`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: symbol, entry, entry_time

**–õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**
```python
for position in open_positions:
    correlation = calculate_correlation(symbol, position['symbol'])
    if correlation >= 0.75:  # –í—ã—Å–æ–∫–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è
        BLOCK_SIGNAL()
```

## üìä **–ü—Ä–∏–º–µ—Ä**

**–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏:**
- BTCUSDT LONG

**–ù–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª:**
- ETHUSDT LONG

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üö´ [CORRELATION] –°–∏–≥–Ω–∞–ª ETHUSDT LONG –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
   –ü—Ä–∏—á–∏–Ω–∞: –≤—ã—Å–æ–∫–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å BTCUSDT (–∫–æ—Ä—Ä: 0.82)
   ‚ö†Ô∏è –†–∏—Å–∫: —É–¥–≤–æ–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ (–æ–±–∞ –∞–∫—Ç–∏–≤–∞ –¥–≤–∏–∂—É—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ)
```

## ‚úÖ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**

1. **–ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–≤–æ–µ–Ω–∏—è —Ä–∏—Å–∫–∞** - –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏
2. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ
3. **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∏–∑ –ë–î
4. **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–∏–¥–Ω–æ –ø–æ—á–µ–º—É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

## üìù **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã**

- `correlation_risk_manager.py`:
  - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_get_user_open_positions()`
  - –û–±–Ω–æ–≤–ª–µ–Ω `check_correlation_risk_async()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ `blocked_by_correlation`

- `CORRELATION_OPEN_POSITIONS_INTEGRATION.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `CORRELATION_COMPLETE_SUMMARY.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

## üöÄ **–°—Ç–∞—Ç—É—Å**

‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤ (–¥–ª—è –ª–∏–º–∏—Ç–æ–≤), —Ç–∞–∫ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (–¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏).
