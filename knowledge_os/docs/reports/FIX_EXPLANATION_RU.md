# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏–∑ –±–∏—Ä–∂–∏

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏–∏ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î –∏–∑ –±–∏—Ä–∂–∏ **–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏**, –±—ã–ª–∞ –ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É (–∏–∑ —Å–∏–≥–Ω–∞–ª–∞) –∏–ª–∏ –≤—Ä—É—á–Ω—É—é.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –Ω–∞—Ö–æ–¥–∏–ª–∞ –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –±–∏—Ä–∂–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, LONG FFUSDT)
2. **–°–æ–∑–¥–∞–≤–∞–ª–∞** –µ—ë –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î —á–µ—Ä–µ–∑ `upsert_active_position()`
3. **–í—ã—Å—Ç–∞–≤–ª—è–ª–∞** TP/SL –æ—Ä–¥–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–ù–∞—á–∏–Ω–∞–ª–∞** –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

- –ü–æ–∑–∏—Ü–∏—è LONG FFUSDT –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ –±–∏—Ä–∂–µ (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è)
- –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–ª–∞ –µ—ë –≤ –ë–î –∏ –≤—ã—Å—Ç–∞–≤–∏–ª–∞ 2 TP/SL –æ—Ä–¥–µ—Ä–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∑–∏—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–∏–≥–Ω–∞–ª–∞:

```python
# –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –±–∏—Ä–∂–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Å–∏–≥–Ω–∞–ª–∞
signal_data = await adb_local.get_signal_data(uid, symbol)
if not signal_data:
    # –ü–æ–∑–∏—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –ù–ï–¢ —Å–∏–≥–Ω–∞–ª–∞ –≤ –ë–î
    # –≠—Ç–æ —Ä—É—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è - –ù–ï —Å–æ–∑–¥–∞–µ–º –µ—ë –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
    logger.warning("‚ö†Ô∏è –ü–æ–∑–∏—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–∞. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ.")
    continue  # –ù–µ —Å–æ–∑–¥–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –±–µ–∑ —Å–∏–≥–Ω–∞–ª–∞
```

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞–ª–∞** - –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –≤ `signals_log`
2. ‚úÖ **–ü—Ä–æ–ø—É—Å–∫ —Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π** - –µ—Å–ª–∏ —Å–∏–≥–Ω–∞–ª–∞ –Ω–µ—Ç, –ø–æ–∑–∏—Ü–∏—è –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –ë–î
3. ‚úÖ **–ù–µ—Ç TP/SL –¥–ª—è —Ä—É—á–Ω—ã—Ö** - TP/SL –æ—Ä–¥–µ—Ä–∞ –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ —Å–∏–≥–Ω–∞–ª–∞
4. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥ –æ —Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:

- ‚úÖ **–°–æ–∑–¥–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –¢–û–õ–¨–ö–û –∏–∑ —Å–∏–≥–Ω–∞–ª–æ–≤** - —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–∏, –æ—Ç–∫—Ä—ã—Ç—ã–µ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ **–ù–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä—É—á–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏** - —Ä—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ **–õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è** - –≤–∏–¥–Ω–æ, –∫–∞–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã –∏ –ø–æ—á–µ–º—É

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–∫—Ä—ã–ª–∏ –≤—Ä—É—á–Ω—É—é
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å TP/SL –¥–ª—è —Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏—è–º–∏, –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—Å–µ–Ω–æ –≤ –∫–æ–¥
2. ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. ‚è≥ –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–æ–∑–∏—Ü–∏–π

---

## ‚ùì –í–æ–ø—Ä–æ—Å –æ LONG –ø–æ–∑–∏—Ü–∏–∏ FFUSDT

**–û—Ç–∫—É–¥–∞ –≤–∑—è–ª–∞—Å—å LONG –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –±–∏—Ä–∂–µ?**

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. –ü–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –≤—Ä—É—á–Ω—É—é (–Ω–æ –≤—ã —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ –Ω–µ—Ç)
2. –ü–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞ —Å–∏—Å—Ç–µ–º–æ–π –ø–æ –æ—à–∏–±–∫–µ (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)
3. –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ SHORT –æ—Ç–∫—Ä—ã–ª–∞—Å—å LONG (–µ—Å–ª–∏ `reduceOnly` –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª)

**–°–µ–π—á–∞—Å:**
- –°–∏—Å—Ç–µ–º–∞ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ –ë–î
- –°–∏—Å—Ç–µ–º–∞ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –¥–ª—è –Ω–∏—Ö TP/SL
- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–∞ - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –µ—ë

---

## üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π LONG –ø–æ–∑–∏—Ü–∏–µ–π?

–ï—Å–ª–∏ LONG –ø–æ–∑–∏—Ü–∏—è FFUSDT –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç–∞ –Ω–∞ –±–∏—Ä–∂–µ:
1. –ó–∞–∫—Ä–æ–π—Ç–µ –µ—ë –≤—Ä—É—á–Ω—É—é –Ω–∞ –±–∏—Ä–∂–µ
2. –°–∏—Å—Ç–µ–º–∞ –Ω–µ –±—É–¥–µ—Ç –µ—ë –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å (—Ç–∞–∫ –∫–∞–∫ –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–∞)
3. TP/SL –æ—Ä–¥–µ—Ä–∞ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç—å –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –æ–Ω–∏ –±—ã–ª–∏ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–æ–π)

