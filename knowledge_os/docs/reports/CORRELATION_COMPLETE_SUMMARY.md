# üéØ –ö–û–†–†–ï–õ–Ø–¶–ò–û–ù–ù–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ò–°–ö–ê–ú–ò - –§–ò–ù–ê–õ–¨–ù–´–ô –ò–¢–û–ì

## ‚úÖ **–ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### **1. –†–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∫ BTC/ETH/SOL**
- ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ OHLC –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Binance API
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ `np.corrcoef(returns1, returns2)`
- ‚úÖ Fallback –Ω–∞ –æ—Ü–µ–Ω–∫—É –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π** ‚≠ê **–ù–û–í–û–ï!**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î (`signals_log`)
- ‚úÖ –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ (>= 0.75)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–≤–æ–µ–Ω–∏—è —Ä–∏—Å–∫–∞

### **3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞**
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –∫ BTC/ETH/SOL
- ‚úÖ –ì—Ä—É–ø–ø—ã: HIGH/MEDIUM/LOW/INDEPENDENT
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º

### **3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã async/await
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å signal_live.py
- ‚úÖ –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **4. Production-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Health check —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫

## üìä **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´**

```
üì¶ Correlation Risk Manager
‚îú‚îÄ‚îÄ üìÇ correlation_risk_manager.py
‚îÇ   ‚îú‚îÄ‚îÄ _get_user_open_positions() - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ calculate_correlation() - —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ get_symbol_group_async() - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ check_correlation_risk_async() - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ save_signal_to_history_async() - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ üìÇ signal_live.py
‚îÇ   ‚îú‚îÄ‚îÄ send_signal() - production –≤–µ—Ä—Å–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ health_check_correlations() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îî‚îÄ‚îÄ periodic_health_check_correlations() - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ
‚îî‚îÄ‚îÄ üìÇ config.py
    ‚îú‚îÄ‚îÄ CORRELATION_COOLDOWN_ENABLED
    ‚îú‚îÄ‚îÄ CORRELATION_LOOKBACK_HOURS
    ‚îî‚îÄ‚îÄ SECTOR_MAX_PER_GROUP
```

## üîÑ **–öAK –†–ê–ë–û–¢–ê–ï–¢**

### **–®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞**
```
LINKUSDT ‚Üí generate_signal() ‚Üí —Å–∏–≥–Ω–∞–ª BUY
```

### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏**
```
LINKUSDT ‚Üí check_correlation_risk_async()
‚îú‚îÄ –ü–æ–ª—É—á–∞–µ–º OHLC –¥–∞–Ω–Ω—ã–µ –¥–ª—è LINK –∏ ETH
‚îú‚îÄ –í—ã—á–∏—Å–ª—è–µ–º returns: [0.02, -0.01, 0.03, ...]
‚îú‚îÄ –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è: np.corrcoef(LINK, ETH) = 0.85
‚îî‚îÄ –ì—Ä—É–ø–ø–∞: ETH_HIGH (correlation > 0.75)
```

### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤**
```
ETH_HIGH –≥—Ä—É–ø–ø–∞ ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
‚îú‚îÄ ETHUSDT (ETH_HIGH) - —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω 10 –º–∏–Ω –Ω–∞–∑–∞–¥
‚îú‚îÄ –í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö: 1/2
‚îî‚îÄ –õ–∏–º–∏—Ç –ù–ï –ø—Ä–µ–≤—ã—à–µ–Ω ‚Üí —Ä–∞–∑—Ä–µ—à–∏—Ç—å
```

### **–®–∞–≥ 4: –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**
```
–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
‚îú‚îÄ –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é
‚îî‚îÄ –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ (–¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
```

### **–®–∞–≥ 5: –°–ª–µ–¥—É—é—â–∏–π —Å–∏–≥–Ω–∞–ª (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)**
```
UNIUSDT ‚Üí ETH_HIGH –≥—Ä—É–ø–ø–∞
‚îú‚îÄ ETHUSDT (ETH_HIGH) - –∞–∫—Ç–∏–≤–µ–Ω
‚îú‚îÄ LINKUSDT (ETH_HIGH) - –∞–∫—Ç–∏–≤–µ–Ω
‚îî‚îÄ –í—Å–µ–≥–æ: 2/2 ‚Üí –ë–õ–û–ö–ò–†–û–í–ö–ê

–õ–æ–≥: üö´ [RISK] UNIUSDT BUY –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: GROUP_LIMIT_EXCEEDED
```

## üìä **–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì**

### **Health Check**
```
‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π –∑–¥–æ—Ä–æ–≤–∞: 15 —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
üìä –°—Ç–∞—Ç—É—Å –¥–∞–Ω–Ω—ã—Ö:
   BTCUSDT: 200 —Å–≤–µ—á–µ–π
   ETHUSDT: 200 —Å–≤–µ—á–µ–π  
   SOLUSDT: 200 —Å–≤–µ—á–µ–π
```

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**
```
üìä –û–¢–ß–ï–¢ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –†–ò–°–ö–ê–ú–ò
–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–∏–≥–Ω–∞–ª–æ–≤: 150
–û–¥–æ–±—Ä–µ–Ω–æ: 120 (80%)
–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: 30 (20%)
  ‚îî‚îÄ –ø–æ –ª–∏–º–∏—Ç–∞–º –≥—Ä—É–ø–ø: 25
  ‚îî‚îÄ –ø–æ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏: 5 ‚≠ê

üè∑Ô∏è –õ–ò–ú–ò–¢–´ –ì–†–£–ü–ü:
  BTC_HIGH: 2/2 (cooldown: 1—á)
  ETH_HIGH: 1/2 (cooldown: 1—á)
  SOL_HIGH: 0/2 (cooldown: 1—á)
```

## üéØ **–í–ê–® –ü–û–î–•–û–î –†–ï–ê–õ–ò–ó–û–í–ê–ù**

**–í—ã —Ö–æ—Ç–µ–ª–∏:**
> "—É –º–µ–Ω—è –±—ã–ª–æ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ BTC –∏ –¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ ETH –∏ –¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ SOL –∏ –¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º"

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
‚úÖ –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ BTC - –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞  
‚úÖ –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ ETH - –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞  
‚úÖ –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –∫ SOL - –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞  
‚úÖ –î–µ–ª–µ–Ω–∏–µ –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —É—Ä–æ–≤–Ω—é –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏  
‚úÖ –õ–∏–º–∏—Ç—ã –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –≥—Ä—É–ø–ø—É

## üöÄ **–ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION**

### **‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã:**
- [x] Real correlation calculation
- [x] Dynamic grouping by correlation
- [x] Asynchronous architecture
- [x] Production logging
- [x] Health monitoring
- [x] Error handling
- [x] Fallback mechanisms
- [x] Statistics and reporting

### **‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [x] –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö OHLC –¥–∞–Ω–Ω—ã—Ö
- [x] –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏
- [x] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤
- [x] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
- [x] Health check
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìà **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **–ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–∏—Å–∫–æ–≤:**
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É–±—ã—Ç–∫–æ–≤
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- ‚úÖ –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ç–æ—Ä–∞–º
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–≤–æ–µ–Ω–∏—è —Ä–∏—Å–∫–∞** (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π)
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏** (–ª–∏–º–∏—Ç—ã –ø–æ –≥—Ä—É–ø–ø–∞–º)

### **–ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤:**
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ risk/reward
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- ‚úÖ Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Health check –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

## üéâ **–°–¢–ê–¢–£–°: –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£!**

**–í–∞—à –ø–æ–¥—Ö–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**–ó–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É - –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤ –∞–∫—Ç–∏–≤–Ω–∞!** üöÄ
