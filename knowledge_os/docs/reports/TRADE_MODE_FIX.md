# üîç –ü–†–û–ë–õ–ï–ú–ê: –ù–ï–¢ SHORT –°–ò–ì–ù–ê–õ–û–í

## ‚ùå **–ü–†–ò–ß–ò–ù–ê –ù–ê–ô–î–ï–ù–ê:**

### **–î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ä–µ–∂–∏–º - 'spot', SHORT —Ç–æ–ª—å–∫–æ –¥–ª—è 'futures'!**

**–í –∫–æ–¥–µ:**
```python
# user_utils.py, —Å—Ç—Ä–æ–∫–∞ 47:
trade_mode = data.get('trade_mode', 'spot')  # ‚Üê –î–µ—Ñ–æ–ª—Ç 'spot'

# signal_live.py, —Å—Ç—Ä–æ–∫–∞ 1662:
if trade_mode != 'futures':
    logger.debug("üö´ SHORT —Å–∏–≥–Ω–∞–ª –ø—Ä–æ–ø—É—â–µ–Ω (—Ä–µ–∂–∏–º: %s)", trade_mode)
    return None, None  # ‚Üê SHORT –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ LONG –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ spot –∏ futures)
- ‚ùå SHORT –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ futures, –∞ –¥–µ—Ñ–æ–ª—Ç - spot)

---

## ‚úÖ **–†–ï–®–ï–ù–ò–ï:**

### **–í–ê–†–ò–ê–ù–¢ 1: –ò–∑–º–µ–Ω–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç –Ω–∞ 'futures' (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

**–ì–¥–µ –∏–∑–º–µ–Ω–∏—Ç—å:**

#### **1. user_utils.py (—Å—Ç—Ä–æ–∫–∞ 47):**
```python
# –ë–´–õ–û:
trade_mode = data.get('trade_mode', 'spot')

# –°–¢–ê–õ–û:
trade_mode = data.get('trade_mode', 'futures')
```

#### **2. telegram_handlers.py (—Å—Ç—Ä–æ–∫–∏ 368, 523):**
```python
# –ë–´–õ–û:
defaults = {
    "trade_mode": "spot",
    ...
}

# –°–¢–ê–õ–û:
defaults = {
    "trade_mode": "futures",
    ...
}
```

#### **3. db_init.py (—Å—Ç—Ä–æ–∫–∏ 140, 164):**
```python
# –ë–´–õ–û:
"default_trade_mode": "spot",

# –°–¢–ê–õ–û:
"default_trade_mode": "futures",
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí futures –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ SHORT + LONG —Å–∏–≥–Ω–∞–ª—ã —Å—Ä–∞–∑—É
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ - –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã

---

### **–í–ê–†–ò–ê–ù–¢ 2: –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î**

**SQL —Å–∫—Ä–∏–ø—Ç:**
```sql
-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
SELECT user_id, json_extract(data, '$.trade_mode') as trade_mode 
FROM users_data;

-- –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞ futures:
UPDATE users_data 
SET data = json_set(data, '$.trade_mode', 'futures')
WHERE json_extract(data, '$.trade_mode') = 'spot';

-- –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º leverage –¥–ª—è futures:
UPDATE users_data 
SET data = json_set(data, '$.leverage', 10)
WHERE json_extract(data, '$.trade_mode') = 'futures' 
AND json_extract(data, '$.leverage') = 1;
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üí futures
- ‚úÖ SHORT —Å–∏–≥–Ω–∞–ª—ã –Ω–∞—á–Ω—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- ‚úÖ Leverage –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è –¥–æ 10x

---

### **–í–ê–†–ò–ê–ù–¢ 3: –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

**–î–æ–±–∞–≤–∏—Ç—å –≤ /help:**
```
/set_trade_mode futures - –í–∫–ª—é—á–∏—Ç—å SHORT —Å–∏–≥–Ω–∞–ª—ã
```

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∞–º–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç —Ä–µ–∂–∏–º**

---

## üéØ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:**

### **–î–µ–ª–∞–µ–º –í–ê–†–ò–ê–ù–¢ 1 + –í–ê–†–ò–ê–ù–¢ 2:**

1. ‚úÖ –ò–∑–º–µ–Ω—è–µ–º –¥–µ—Ñ–æ–ª—Ç –Ω–∞ 'futures' (–¥–ª—è –Ω–æ–≤—ã—Ö)
2. ‚úÖ –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —á–µ—Ä–µ–∑ SQL (–¥–ª—è —Ç–µ–∫—É—â–∏—Ö)
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ SHORT + LONG —Å–∏–≥–Ω–∞–ª—ã
- ‚úÖ –ü–æ–ª–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- ‚úÖ –ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∑–∞—Ä–∞–±–æ—Ç–∫–∞

---

## üìä **–°–†–ê–í–ù–ï–ù–ò–ï:**

### **trade_mode = 'spot':**
```
LONG: ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
SHORT: ‚ùå –ù–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: 50% (—Ç–æ–ª—å–∫–æ —Ä–æ—Å—Ç)
```

### **trade_mode = 'futures':**
```
LONG: ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
SHORT: ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: 100% (—Ä–æ—Å—Ç –∏ –ø–∞–¥–µ–Ω–∏–µ)
Leverage: –¥–æ 10x
```

---

## üöÄ **–î–ï–ô–°–¢–í–ò–Ø:**

**–•–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã —è:**
1. ‚úÖ –ò–∑–º–µ–Ω–∏–ª –¥–µ—Ñ–æ–ª—Ç –Ω–∞ 'futures'?
2. ‚úÖ –°–æ–∑–¥–∞–ª SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î?

**–≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏ —É–≤–µ–ª–∏—á–∏—Ç –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å!** üìà

