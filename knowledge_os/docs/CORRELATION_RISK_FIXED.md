# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ö—É—Ä—Å–æ—Ä –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ correlation_risk.py

## üéØ –ü–†–û–ë–õ–ï–ú–ê

**–û—à–∏–±–∫–∞:** `ERROR:src.risk.correlation_risk:‚ùå –ö—É—Ä—Å–æ—Ä –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`

**–ü—Ä–∏—á–∏–Ω–∞:**
- `Database` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `use_connection_pool=True`
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pool: `self.conn = None` –∏ `self.cursor = None` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `with self._pool.get_connection() as conn:`
- –ù–æ `correlation_risk.py` –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `self.db.cursor` –Ω–∞–ø—Ä—è–º—É—é, —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å pool

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

**–û—Ç–∫–ª—é—á–µ–Ω connection pool –¥–ª—è `CorrelationRiskManager`:**

```python
# ‚ùå –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∞ 144):
self.db = Database(self.db_path)

# ‚úÖ –°–¢–ê–õ–û:
self.db = Database(self.db_path, use_connection_pool=False)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ:**
- `CorrelationRiskManager` –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤)
- –ü—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–æ—â–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

### –¢–µ—Å—Ç:
```bash
python3 -c 'from src.risk.correlation_risk import CorrelationRiskManager; mgr = CorrelationRiskManager()'
```

**–í—ã–≤–æ–¥:**
```
‚úÖ –¢–∞–±–ª–∏—Ü—ã risk_signal_history –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
üìä –ó–∞–≥—Ä—É–∂–µ–Ω–æ 0 —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∏—Å–∫–æ–≤
‚úÖ CorrelationRiskManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (BTC/ETH/SOL correlation mode)
‚úÖ CorrelationRiskManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
```

**–û—à–∏–±–∫–∞ "–ö—É—Ä—Å–æ—Ä –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è!**

---

## üîß –ü–†–ò–ú–ï–ù–ï–ù–û

- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `src/risk/correlation_risk.py`
- ‚úÖ –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –ø—Ä–∏–º–µ–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ `sed`
- ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- ‚úÖ –û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

---

**–î–∞—Ç–∞:** 2025-12-01  
**–§–∞–π–ª:** `src/risk/correlation_risk.py` (—Å—Ç—Ä–æ–∫–∞ 145)  
**–ö–æ–º–º–∏—Ç:** `4398e54`

