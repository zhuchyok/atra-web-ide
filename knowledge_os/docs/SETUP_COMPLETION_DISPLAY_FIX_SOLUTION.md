# –†–ï–®–ï–ù–ò–ï: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ "–ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!"

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–í —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- –í–º–µ—Å—Ç–æ FUTURES –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è SPOT
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç (1000 –≤–º–µ—Å—Ç–æ 888)
- –î–∞–Ω–Ω—ã–µ –≤ `/myreport` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –Ω–æ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ - –Ω–µ—Ç

## üîç –ü—Ä–∏—á–∏–Ω–∞
1. **–û—à–∏–±–∫–∞ `local variable 'USER_DATA_FILE' referenced before assignment`** - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–º–µ—Å—Ç–æ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
3. **–ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ

## ‚úÖ –†–ï–®–ï–ù–ò–ï (–ó–ê–ü–û–ú–ù–ò–¢–¨!)

### 1. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `USER_DATA_FILE` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```python
elif action == "setup_trade_mode_futures":
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
    USER_DATA_FILE = "user_data.json"  # ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ß–ö–£
    try:
        if os.path.isfile(USER_DATA_FILE):
```

**–î–æ–±–∞–≤–∏—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `setup_trade_mode_futures`
- `setup_filter_mode_balanced`
- `setup_filter_mode_soft`

### 2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
```python
# –ë–µ—Ä–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Ñ–∞–π–ª–∞
try:
    if os.path.isfile(USER_DATA_FILE):
        with open(USER_DATA_FILE, 'r') as f:
            file_data = json.load(f)
        if str(user_id) in file_data:
            final_deposit = file_data[str(user_id)].get("deposit", 0)
            final_trade_mode = file_data[str(user_id)].get("trade_mode", "spot")
            final_filter_mode = file_data[str(user_id)].get("filter_mode", "balanced")
            print(f"[setup_filter_mode_soft] –î–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞: deposit={final_deposit}, trade_mode={final_trade_mode}, filter_mode={final_filter_mode}")
```

### 3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
```python
await query.message.reply_text(
    f"‚úÖ *–ù–ê–°–¢–†–û–ô–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!*\n\n"
    f"üí∞ –î–µ–ø–æ–∑–∏—Ç: {final_deposit} USDT\n"
    f"üìà –†–µ–∂–∏–º: {final_trade_mode.upper()}\n"  # ‚Üê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ final_trade_mode
    f"üéØ –§–∏–ª—å—Ç—Ä—ã: –ú—è–≥–∫–∏–π\n"
    f"‚ö° –ü–ª–µ—á–æ: {leverage_display}\n\n"
    # ...
)
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

### ‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:
```python
# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
f"üìà –†–µ–∂–∏–º: {trade_mode.upper()}\n"
```

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:
```python
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞
USER_DATA_FILE = "user_data.json"
# ... —á—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞ ...
f"üìà –†–µ–∂–∏–º: {final_trade_mode.upper()}\n"
```

## üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è)

1. **–ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –≤ `telegram_bot.py`:
   - `setup_trade_mode_futures`
   - `setup_filter_mode_balanced`
   - `setup_filter_mode_soft`

2. **–î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:**
   ```python
   USER_DATA_FILE = "user_data.json"
   ```

3. **–ó–∞–º–µ–Ω–∏—Ç—å –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏:**
   ```python
   # –ë—ã–ª–æ:
   f"üìà –†–µ–∂–∏–º: {trade_mode.upper()}\n"

   # –°—Ç–∞–ª–æ:
   f"üìà –†–µ–∂–∏–º: {final_trade_mode.upper()}\n"
   ```

## üìù –°–∏–º–ø—Ç–æ–º—ã –ø—Ä–æ–±–ª–µ–º—ã
- –í –ª–æ–≥–∞—Ö: `local variable 'USER_DATA_FILE' referenced before assignment`
- –í —Å–æ–æ–±—â–µ–Ω–∏–∏: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç SPOT –≤–º–µ—Å—Ç–æ FUTURES
- –í —Å–æ–æ–±—â–µ–Ω–∏–∏: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1000 –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–µ–ø–æ–∑–∏—Ç–∞
- `/myreport` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç (888 USDT)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏ (FUTURES)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–ª–µ—á–æ (2x-20x –¥–ª—è FUTURES)

---
**–í–ê–ñ–ù–û: –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!**