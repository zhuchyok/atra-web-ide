# üîß –û–¢–ß–ï–¢: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–û–ö –í –°–ò–°–¢–ï–ú–ï

## üéØ **–ü–†–û–ë–õ–ï–ú–´ –í –õ–û–ì–ê–•**

### **–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:**
1. **CoinGecko 429 rate limit** - –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
2. **RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTML** –≤–º–µ—Å—Ç–æ JSON
3. **Fallback –∫–∞–ø—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç** - 0/1 –º–æ–Ω–µ—Ç –ø–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ
4. **CryptoCompare –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ** –¥–ª—è ETHUSDT

## ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏**
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤—Å–µ—Ö RSS –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:

```python
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36',
    'Accept': 'application/rss+xml, application/xml, text/xml, */*',
    'Accept-Language': 'en-US,en;q=0.9',
}
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:**
- ‚úÖ TradingView
- ‚úÖ CoinDesk
- ‚úÖ Bitcoin.com
- ‚úÖ CryptoSlate
- ‚úÖ CoinTelegraph
- ‚úÖ AMBcrypto

### **2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ CoinGecko**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:

```python
except (aiohttp.ClientError, asyncio.TimeoutError, ValueError, KeyError, TypeError) as e:
    print(f"[NewsFilter] –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è {symbol}: {e}")
```

### **3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω fallback –¥–ª—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏**
–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤:

```python
# –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
for sym in missing:
    if sym not in market_caps:
        market_caps[sym] = 100_000_000  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è
```

### **4. –£–ª—É—á—à–µ–Ω CryptoCompare fallback**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:

```python
# Fallback: –ø—Ä–æ–±—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
alt_symbols = [base, base.lower(), base.capitalize()]
for alt in alt_symbols:
    try:
        params['fsym'] = alt
        resp = requests.get(url, params=params, timeout=5)
        if resp.status_code == 200:
            data = resp.json()
            if 'USD' in data:
                return {
                    'name': alt,
                    'symbol': alt,
                    'price': data.get('USD', 0),
                    'market_cap': 0,  # –ó–∞–≥–ª—É—à–∫–∞
                    'volume_24h': 0,  # –ó–∞–≥–ª—É—à–∫–∞
                    'source': 'cryptocompare_fallback'
                }
    except:
        continue
```

### **5. –î–æ–±–∞–≤–ª–µ–Ω –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π fallback –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π**
–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ–¥—Ä—è–¥:

```python
# –ü—Ä–æ–±—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ fallback –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
fallback_sources = [
    lambda: get_coingecko_news(symbol),
    lambda: get_tradingview_news(symbol),
    lambda: get_cryptopanic_news(symbol)
]

for fallback_func in fallback_sources:
    try:
        fallback_news = await fallback_func()
        if fallback_news and len(fallback_news) > 0:
            print(f"[NewsFilter] Fallback —É—Å–ø–µ—à–µ–Ω –¥–ª—è {symbol}: {len(fallback_news)} –Ω–æ–≤–æ—Å—Ç–µ–π")
            return fallback_news
    except Exception as fallback_error:
        print(f"[NewsFilter] Fallback –æ—à–∏–±–∫–∞ –¥–ª—è {symbol}: {fallback_error}")
        continue
```

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò**

### **–ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|---------|
| **CoinGecko 429** | Rate limit –ø—Ä–µ–≤—ã—à–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ |
| **RSS HTML –æ—à–∏–±–∫–∏** | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ | –î–æ–±–∞–≤–ª–µ–Ω—ã User-Agent –∑–∞–≥–æ–ª–æ–≤–∫–∏ |
| **Fallback –∫–∞–ø—ã 0/1** | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≥–ª—É—à–µ–∫ | –î–æ–±–∞–≤–ª–µ–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
| **CryptoCompare –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç** | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã | –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã |

### **–£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—è—Ö API
- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ fallback** - –µ—Å–ª–∏ –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–±—É–µ–º –¥—Ä—É–≥–∏–µ
- ‚úÖ **–ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö** - —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ª–µ–≥—á–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

## üìä **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

### **–°–Ω–∏–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫:**
- **CoinGecko 429**: –û–±—Ä–∞–±–æ—Ç–∫–∞ rate limits
- **RSS HTML –æ—à–∏–±–∫–∏**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- **Fallback –∫–∞–ø—ã**: –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **CryptoCompare**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã

### **–ü–æ–≤—ã—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–ú–µ–Ω—å—à–µ —Å–±–æ–µ–≤** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **–õ—É—á—à–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ **Fallback —Ü–µ–ø–æ—á–∫–∏** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- ‚úÖ **–ó–∞–≥–ª—É—à–∫–∏ –¥–∞–Ω–Ω—ã—Ö** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö

## üöÄ **–õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´**

### **–ü—Ä–∏ –æ—à–∏–±–∫–µ API:**
1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏** ‚Üí –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. **–ü—Ä–æ–±—É–µ–º fallback** ‚Üí –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
3. **–ó–∞–≥–ª—É—à–∫–∏ –¥–∞–Ω–Ω—ã—Ö** ‚Üí –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
4. **–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã** ‚Üí –°–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

### **–ü—Ä–∏ –æ—à–∏–±–∫–µ RSS:**
1. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏** ‚Üí User-Agent, Accept
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ HTML** ‚Üí –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
3. **Fallback –∏—Å—Ç–æ—á–Ω–∏–∫–∏** ‚Üí –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
4. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

## üìù **–°–¢–ê–¢–£–°**
‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û** - –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–π
