# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ë–µ–∫—Ç–µ—Å—Ç –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é TP/SL

**–î–∞—Ç–∞:** 2025-11-13  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–µ–∫—Ç–µ—Å—Ç –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ç—É –∂–µ –ª–æ–≥–∏–∫—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ TP/SL, —á—Ç–æ –∏ —Ä–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

### **–†–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (`signal_live.py`):**
```python
# –°—Ç—Ä–æ–∫–∏ 3047-3051
# üèÜ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø TP/SL: –£–ª—É—á—à–µ–Ω–∏–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è (–Ω–∞ –æ—Å–Ω–æ–≤–µ –±–µ–∫—Ç–µ—Å—Ç–∞)
# –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º TP –Ω–∞ 20%, —É–º–µ–Ω—å—à–∞–µ–º SL –Ω–∞ 20% –¥–ª—è –ª—É—á—à–µ–≥–æ Profit Factor
tp1_pct_optimized = tp1_pct * 1.2
tp2_pct_optimized = tp2_pct * 1.2
sl_pct_optimized = sl_pct_positive * 0.8
```

### **–ë–µ–∫—Ç–µ—Å—Ç (`run_advanced_backtest.py`):**
```python
# –°—Ç—Ä–æ–∫–∏ 160-170
# –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—ã –ë–ï–ó –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
if direction == "LONG":
    tp1_price = entry_price * (1 + tp1_pct / 100)  # ‚ùå –ù–µ—Ç * 1.2
    tp2_price = entry_price * (1 + tp2_pct / 100)  # ‚ùå –ù–µ—Ç * 1.2
    sl_price = entry_price * (1 - base_sl_pct / 100)  # ‚ùå –ù–µ—Ç * 0.8
```

## üîç –†–∞–∑–ª–∏—á–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | –ë–µ–∫—Ç–µ—Å—Ç | –†–∞–∑–Ω–∏—Ü–∞ |
|-----------|------------------|---------|---------|
| **TP1** | `tp1_pct * 1.2` | `tp1_pct` | +20% |
| **TP2** | `tp2_pct * 1.2` | `tp2_pct` | +20% |
| **SL** | `sl_pct * 0.8` | `sl_pct` | -20% |

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### **–¢–µ–∫—É—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–∫—Ç–µ—Å—Ç–∞:**
- Profit Factor: 0.80
- Win Rate: 45.10%
- –°—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫: -132.83 USDT > –°—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å: 127.45 USDT

### **–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **TP —É–≤–µ–ª–∏—á–µ–Ω –Ω–∞ 20%** ‚Üí –±–æ–ª—å—à–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç TP
- **SL —É–º–µ–Ω—å—à–µ–Ω –Ω–∞ 20%** ‚Üí –º–µ–Ω—å—à–µ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç SL
- **Profit Factor:** 0.80 ‚Üí **~1.0-1.2** (—É–ª—É—á—à–µ–Ω–∏–µ)
- **Win Rate:** 45% ‚Üí **~48-50%** (—É–ª—É—á—à–µ–Ω–∏–µ)

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±–µ–∫—Ç–µ—Å—Ç —Ç—É –∂–µ –ª–æ–≥–∏–∫—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, —á—Ç–æ –∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ:

```python
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è tp1_pct, tp2_pct, base_sl_pct
# –ü—Ä–∏–º–µ–Ω—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
tp1_pct_optimized = tp1_pct * 1.2
tp2_pct_optimized = tp2_pct * 1.2
sl_pct_optimized = base_sl_pct * 0.8

# –ó–∞—Ç–µ–º —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ü–µ–Ω—ã
if direction == "LONG":
    tp1_price = entry_price * (1 + tp1_pct_optimized / 100)
    tp2_price = entry_price * (1 + tp2_pct_optimized / 100)
    sl_price = entry_price * (1 - sl_pct_optimized / 100)
```

## üîß –¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. **SL –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `get_dynamic_sl_level(use_ai_optimization=True)`
   - –í –±–µ–∫—Ç–µ—Å—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `get_dynamic_sl_level()` —Å AI-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π

2. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –±–µ–∫—Ç–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—á–µ—Ç–∞, —á—Ç–æ –∏ —Ä–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

