# ‚ö° –ë–´–°–¢–†–´–ô –ì–ê–ô–î –ü–û –°–ï–†–í–ï–†–£

## üîó –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï:
```bash
ssh root@185.177.216.15
```
**–ü–∞—Ä–æ–ª—å:** `u44Ww9NmtQj,XG`

---

## üöÄ –°–ê–ú–ê–Ø –ë–´–°–¢–†–ê–Ø –ü–†–û–í–ï–†–ö–ê:

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ **–û–î–ù–£** –∫–æ–º–∞–Ω–¥—É:

```bash
cd /root/atra && ps aux | grep main.py | grep -v grep | wc -l && tail -3 system_improved.log && grep -c "callback_build" system_improved.log
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç—Ä–æ–∫–∞ 1: **1** = –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ | **0** = –Ω–µ –∑–∞–ø—É—â–µ–Ω ‚ùå | **>1** = –¥—É–±–ª–∏–∫–∞—Ç—ã ‚ö†Ô∏è
- –°—Ç—Ä–æ–∫–∞ 2-4: –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
- –°—Ç—Ä–æ–∫–∞ 5: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üîß –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:

### –ï—Å–ª–∏ –±–æ—Ç –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
cd /root/atra && pkill -9 -f main.py && rm -f *.lock && export ATRA_ENV=prod && nohup python3 main.py > server.log 2>&1 & && sleep 3 && ps aux | grep main.py | grep -v grep
```

### –ï—Å–ª–∏ –µ—Å—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã:
```bash
cd /root/atra && pkill -9 -f main.py && sleep 2 && rm -f *.lock && nohup python3 main.py > server.log 2>&1 & && sleep 3 && ps aux | grep main.py | grep -v grep
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì:

### –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
```bash
tail -f system_improved.log
```

### –°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã:
```bash
tail -f system_improved.log | grep callback_build
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
```bash
python3 -c "import sqlite3; conn = sqlite3.connect('trading.db'); cursor = conn.cursor(); cursor.execute('SELECT COUNT(*) FROM telemetry_cycles WHERE datetime(ts) >= datetime(\"now\", \"-1 hours\")'); print(f'–¶–∏–∫–ª–æ–≤ –∑–∞ —á–∞—Å: {cursor.fetchone()[0]}'); conn.close()"
```

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ù–û–†–ú–ê–õ–¨–ù–û–ô –†–ê–ë–û–¢–´:

- [ ] –ü—Ä–æ—Ü–µ—Å—Å–æ–≤ main.py: **—Ä–æ–≤–Ω–æ 1**
- [ ] –¶–∏–∫–ª–æ–≤ –∑–∞ —á–∞—Å: **> 0**
- [ ] –û—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö: **–º–∏–Ω–∏–º—É–º**
- [ ] Telegram polling: **–∑–∞–ø—É—â–µ–Ω**
- [ ] –°–∏–≥–Ω–∞–ª—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è: **callback_build –ø–æ—è–≤–ª—è—é—Ç—Å—è**

---

## üéØ –ß–ê–°–¢–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø:

| –ü—Ä–æ–±–ª–µ–º–∞ | –ö–æ–º–∞–Ω–¥–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|-------------------|
| –ë–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω | `nohup python3 main.py > server.log 2>&1 &` |
| –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã | `pkill -9 -f main.py && rm -f *.lock` |
| Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `grep "ERROR.*telegram" server.log` |
| –ù–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `grep "callback_build" system_improved.log \| tail` |
| –¶–∏–∫–ª–æ–≤ = 0 | –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (—Å–º. –≤—ã—à–µ) |

---

## üìû –ë–´–°–¢–†–ê–Ø –ü–û–ú–û–©–¨:

–ï—Å–ª–∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ —á—Ç–æ –¥–µ–ª–∞—Ç—å - –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
cd /root/atra
./diagnose_server.sh
```

–≠—Ç–æ –¥–∞—Å—Ç –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –ø–æ–¥—Å–∫–∞–∂–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å!
