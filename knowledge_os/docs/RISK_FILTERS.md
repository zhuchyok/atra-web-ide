# Фильтры риска для арбитража

## Описание

Система фильтров риска защищает от торговли высокорисковыми токенами, которые могут привести к убыткам из-за:

- Низкой ликвидности
- Высокой волатильности
- Больших спредов
- Мемкоинов и скам-токенов

## Настройки фильтров

### Переменные окружения (.env)

```bash
# Включение/отключение фильтров
ENABLE_RISK_FILTERS=true

# Минимальный объем торгов за 24 часа (USDT)
MIN_VOLUME_24H=50000

# Максимальный спред bid/ask (%)
MAX_SPREAD_PCT=2.0

# Диапазон допустимых цен
MIN_PRICE=0.0001
MAX_PRICE=1000000

# Максимальная волатильность (%)
MAX_VOLATILITY_PCT=10.0
```

## Команды Telegram бота

### Просмотр настроек

```
/risk_filters
```

### Управление фильтрами

```
/filters_on    - включить фильтры
/filters_off   - отключить фильтры
```

### Настройка параметров

```
/set_volume <число>      - минимальный объем (USDT)
/set_spread <число>      - максимальный спред (%)
/set_volatility <число>  - максимальная волатильность (%)
```

## Типы фильтров

### 1. Черный список токенов

Автоматически исключает известные высокорисковые токены:

- STOPUSDT, PEPEUSDT, DOGEUSDT, SHIBUSDT
- BONKUSDT, WIFUSDT, FLOKIUSDT
- И другие мемкоины и скам-токены

### 2. Фильтр по паттернам

Исключает токены по названию:

- Содержащие DOGE, SHIB, PEPE, MOON
- Содержащие BABY, SAFE, ELON, CAT
- Содержащие TURBO, BULL, BEAR, PUMP, DUMP
- И другие подозрительные паттерны

### 3. Фильтр по объему

Исключает токены с объемом торгов менее 50,000 USDT за 24 часа

### 4. Фильтр по спреду

Исключает токены со спредом bid/ask более 2%

### 5. Фильтр по цене

Исключает слишком дешевые (< 0.0001) или дорогие (> 1,000,000) токены

### 6. Фильтр по волатильности

Исключает токены с отклонением от последней цены более 10%

## Примеры использования

### Безопасные настройки для консервативной торговли

```bash
MIN_VOLUME_24H=100000    # Большой объем
MAX_SPREAD_PCT=1.0       # Маленький спред
MAX_VOLATILITY_PCT=5.0   # Низкая волатильность
```

### Агрессивные настройки для активной торговли

```bash
MIN_VOLUME_24H=25000     # Меньший объем
MAX_SPREAD_PCT=3.0       # Больший спред
MAX_VOLATILITY_PCT=15.0  # Высокая волатильность
```

## Логирование

Фильтры выводят в консоль информацию о пропущенных токенах:

```
SKIP: STOPUSDT - высокорисковый токен
SKIP: BTCUSDT - слишком большой спред bid=45000, ask=46000
SKIP: ETHUSDT - недостаточный объем торгов 25000
```

## Отключение фильтров

Если нужно временно отключить фильтры:

1. В Telegram: `/filters_off`
2. В .env: `ENABLE_RISK_FILTERS=false`

**Внимание**: Отключение фильтров увеличивает риск убытков!
