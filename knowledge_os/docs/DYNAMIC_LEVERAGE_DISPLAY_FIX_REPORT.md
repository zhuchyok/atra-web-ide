# –û—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–µ—á–∞ –≤ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: **"–≤ –Ω–æ–≤–æ–º —Ç–æ—Ä–≥–æ–≤–æ–º —Å–∏–≥–Ω–∞–ª–µ –ø–ª–µ—á–æ –≤—Å–µ–≥–¥–∞ 1 –∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"**

## üîç **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã**

### **–ß—Ç–æ –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ:**

1. **–§—É–Ω–∫—Ü–∏—è `get_dynamic_leverage()` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚úÖ
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–µ–Ω–¥–∞ –∏ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç 1x –¥–æ 20x –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π

2. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚ùå
   - –î–ª—è —Å–ø–æ—Ç–∞ –ø–ª–µ—á–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–æ–æ–±—â–µ
   - –î–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –í callback_data –¥–ª—è —Å–ø–æ—Ç–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–æ—Å—å –∑–Ω–∞—á–µ–Ω–∏–µ 1

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ:**
   ```
   –ë–∞–∑–æ–≤–æ–µ –ø–ª–µ—á–æ: 1x ‚Üí –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ: 1x (—Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫)
   –ë–∞–∑–æ–≤–æ–µ –ø–ª–µ—á–æ: 2x ‚Üí –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ: 1.9x (–≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫)
   –ë–∞–∑–æ–≤–æ–µ –ø–ª–µ—á–æ: 5x ‚Üí –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ: 4.8x (—Ç—Ä–µ–Ω–¥–æ–≤—ã–π —Ä—ã–Ω–æ–∫)
   ```

## ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **1. –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–ª–µ—á–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏:**

```python
# –ë—ã–ª–æ:
f"{f' | ‚ö° –ü–ª–µ—á–æ: <code>x{dynamic_leverage}</code>' if dynamic_leverage else ''}\n"

# –°—Ç–∞–ª–æ:
f"{f' | ‚ö° –ü–ª–µ—á–æ: <code>x{dynamic_leverage}</code>' if trade_mode == 'futures' and dynamic_leverage else ''}\n"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–ª–µ—á–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–ª–µ—á–∞ –≤ callback_data:**

```python
# –ë—ã–ª–æ:
callback_data=f'accept|{symbol}|{now.strftime("%Y-%m-%dT%H:%M")}|{price}|1.0|{side.lower()}|{risk_pct}|{dynamic_leverage or 1}'

# –°—Ç–∞–ª–æ:
leverage_for_callback = dynamic_leverage if trade_mode == 'futures' else None
callback_data=f'accept|{symbol}|{now.strftime("%Y-%m-%dT%H:%M")}|{price}|1.0|{side.lower()}|{risk_pct}|{leverage_for_callback or 1}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–ª—è —Å–ø–æ—Ç–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `None`, –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ

### **3. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```python
print(f"[DEBUG] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ –¥–ª—è {symbol}: {dynamic_leverage} (–±–∞–∑–æ–≤–æ–µ: {base_leverage})")
print(f"[DEBUG] –†–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏: {trade_mode}, –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ: {dynamic_leverage}")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç –ø–ª–µ—á–∞ –≤ –ª–æ–≥–∞—Ö

## üìä **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–µ—á–∞**

### **–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:**
```python
trend_factor = 1 + abs(trend) * 2  # –¥–æ 3x –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
volatility_factor = 1 / (1 + volatility * 3)  # —É–º–µ–Ω—å—à–∞–µ–º –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
dynamic_leverage = base_leverage * trend_factor * volatility_factor
```

### **–ü—Ä–∏–º–µ—Ä—ã:**
- **–°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫:** –±–∞–∑–æ–≤–æ–µ –ø–ª–µ—á–æ √ó 1.0 = —Ç–æ –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- **–¢—Ä–µ–Ω–¥–æ–≤—ã–π —Ä—ã–Ω–æ–∫:** –±–∞–∑–æ–≤–æ–µ –ø–ª–µ—á–æ √ó 1.5-2.0 = —É–≤–µ–ª–∏—á–µ–Ω–Ω–æ–µ –ø–ª–µ—á–æ
- **–í–æ–ª–∞—Ç–∏–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫:** –±–∞–∑–æ–≤–æ–µ –ø–ª–µ—á–æ √ó 0.7-0.9 = —É–º–µ–Ω—å—à–µ–Ω–Ω–æ–µ –ø–ª–µ—á–æ

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç**

### **‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. **–î–ª—è SPOT —Ç–æ—Ä–≥–æ–≤–ª–∏:** –ø–ª–µ—á–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–∏–≥–Ω–∞–ª–µ
2. **–î–ª—è FUTURES —Ç–æ—Ä–≥–æ–≤–ª–∏:** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ
3. **Callback data:** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–ª–µ—á–æ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### **üì± –ü—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

**SPOT —Å–∏–≥–Ω–∞–ª:**
```
üü¢ –ù–û–í–´–ô –¢–û–†–ì–û–í–´–ô –°–ò–ì–ù–ê–õ

üìä –°–∏–º–≤–æ–ª: BTCUSDT
üí∞ –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 50,000.00
üìà –°—Ç–æ—Ä–æ–Ω–∞: LONG
üéØ TP1: 51,000.00 (+2.0%)
üöÄ TP2: 52,000.00 (+4.0%)
‚ö†Ô∏è –†–∏—Å–∫: 2.50%
```

**FUTURES —Å–∏–≥–Ω–∞–ª:**
```
üü¢ –ù–û–í–´–ô –¢–û–†–ì–û–í–´–ô –°–ò–ì–ù–ê–õ

üìä –°–∏–º–≤–æ–ª: BTCUSDT
üí∞ –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 50,000.00
üìà –°—Ç–æ—Ä–æ–Ω–∞: LONG
üéØ TP1: 51,000.00 (+2.0%)
üöÄ TP2: 52,000.00 (+4.0%)
‚ö†Ô∏è –†–∏—Å–∫: 2.50% | ‚ö° –ü–ª–µ—á–æ: x1.8
```

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `signal_live.py` (—Å—Ç—Ä–æ–∫–∏ 2865-2978)

### **–§—É–Ω–∫—Ü–∏–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:**
- `check_and_send_signals()` - –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
- `get_dynamic_leverage()` - —Ä–∞—Å—á–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–ª–µ—á–∞

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- `dynamic_leverage` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤
- `trade_mode` - —Ä–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏ (spot/futures)
- `leverage_for_callback` - –ø–ª–µ—á–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤ callback

## üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!**

- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤
- ‚úÖ –î–ª—è —Å–ø–æ—Ç–∞ –ø–ª–µ—á–æ —Å–∫—Ä—ã—Ç–æ
- ‚úÖ Callback data –ø–µ—Ä–µ–¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ–ø–µ—Ä—å –≤ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö –ø–ª–µ—á–æ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** üöÄ