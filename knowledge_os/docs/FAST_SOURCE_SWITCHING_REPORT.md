# ‚ö° –û–¢–ß–ï–¢: –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

## üìã **–ü–†–û–ë–õ–ï–ú–ê**

–°–∏—Å—Ç–µ–º–∞ –¥–µ–ª–∞–ª–∞ **–ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏** –≤–º–µ—Å—Ç–æ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É 10 —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏:

- ‚ùå **–ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏** (1-2 —Å–µ–∫—É–Ω–¥—ã)
- ‚ùå **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚ùå **–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

## ‚úÖ **–†–ï–®–ï–ù–ò–ï**

### **1. –£–±—Ä–∞–Ω—ã –≤—Å–µ –∑–∞–¥–µ—Ä–∂–∫–∏**

**–§–∞–π–ª: `data_sources_manager.py`**
- ‚úÖ –£–±—Ä–∞–Ω—ã `await asyncio.sleep(1)`
- ‚úÖ –£–±—Ä–∞–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫

**–§–∞–π–ª: `improved_price_api.py`**
- ‚úÖ –£–±—Ä–∞–Ω—ã `await asyncio.sleep(wait_time)`
- ‚úÖ –£–±—Ä–∞–Ω—ã –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
- ‚úÖ –ü—Ä—è–º–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

### **2. –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ**

**–õ–æ–≥–∏–∫–∞:**
```
1. Binance (–æ—Å–Ω–æ–≤–Ω–æ–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
2. Bybit (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
3. MEXC (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
4. OKX (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
5. KuCoin (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
6. Gate.io (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
7. Huobi (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
8. Coinbase (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
9. CoinGecko (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π) ‚Üí –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
10. CryptoCompare (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
```

## üöÄ **–†–ï–ó–£–õ–¨–¢–ê–¢**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå **–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** (1-2 —Å–µ–∫—É–Ω–¥—ã –∑–∞–¥–µ—Ä–∂–∫–∏)
- ‚ùå **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚ùå **–í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã:** 5-10 —Å–µ–∫—É–Ω–¥

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
- ‚úÖ **–ë–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫** –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- ‚úÖ **–í—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–µ–Ω—ã:** 0.1-0.5 —Å–µ–∫—É–Ω–¥—ã

## üìä **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò**

### **–ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:**
```python
# –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
for source in sorted(sources, key=lambda x: x.priority):
    if not source.enabled:
        continue

    try:
        data = await self._fetch_from_source(source, symbol, base_symbol, data_type, **kwargs)
        if data:
            # –ö—ç—à–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            self.cache[cache_key] = (data, asyncio.get_event_loop().time())
            logging.info(f"‚úÖ –ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ {data_type} –¥–ª—è {symbol} –∏–∑ {source.name}")
            return data
    except Exception as e:
        logging.debug(f"‚ùå {source.name} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω: {e}")
        continue
```

### **–£–±—Ä–∞–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏:**
```python
# –ë–´–õ–û (–º–µ–¥–ª–µ–Ω–Ω–æ):
elif response.status == 429:
    logging.warning(f"‚ö†Ô∏è {source.name} API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Å—Ç–∞—Ç—É—Å: 429) - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤")
    await asyncio.sleep(1)  # ‚ùå –ó–ê–î–ï–†–ñ–ö–ê

# –°–¢–ê–õ–û (–±—ã—Å—Ç—Ä–æ):
elif response.status == 429:
    logging.warning(f"‚ö†Ô∏è {source.name} API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Å—Ç–∞—Ç—É—Å: 429) - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫")
    # ‚úÖ –ë–ï–ó –ó–ê–î–ï–†–ñ–ö–ò - —Å—Ä–∞–∑—É —Å–ª–µ–¥—É—é—â–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫
```

## üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê**

1. **‚ö° –°–∫–æ—Ä–æ—Å—Ç—å:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
2. **üîÑ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** 10 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
3. **üìä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** –ë–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
4. **üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ü–æ–ª—É—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –∑–∞ 0.1-0.5 —Å–µ–∫—É–Ω–¥—ã

---

**–î–∞—Ç–∞:** 2025-09-30
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚úÖ –ü–†–û–ô–î–ï–ù–û
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ê
