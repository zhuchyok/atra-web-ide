# üìä –û–¢–ß–ï–¢: –°–¢–ê–¢–£–° –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –†–ï–ñ–ò–ú–ê

**–î–∞—Ç–∞:** 2025-11-05

---

## ‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –†–ï–ñ–ò–ú –†–ï–ê–õ–ò–ó–û–í–ê–ù

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–∞ –≤ `send_signal()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–µ–∂–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –†–µ–∂–∏–º –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `user_settings` (–ø–æ–ª–µ `trade_mode`)
   - –ï—Å–ª–∏ `trade_mode = 'auto'` ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏:**
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `AutoExecutionService.execute_and_open()`
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –±–∏—Ä–∂–µ Bitget
   - –í—ã—Å—Ç–∞–≤–ª—è—é—Ç—Å—è TP1, TP2 –∏ Stop Loss –æ—Ä–¥–µ—Ä–∞
   - –ü–æ–∑–∏—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `active_positions`

3. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ-—Ä–µ–∂–∏–º–∞:**
   - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `trade_mode = 'auto'` –≤ `user_settings`
   - ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∫–ª—é—á–∏ –±–∏—Ä–∂–∏ Bitget –≤ `user_exchange_keys`
   - ‚úÖ –°–∏–≥–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Ñ–∏–ª—å—Ç—Ä—ã, –∫–∞—á–µ—Å—Ç–≤–æ, –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏)

---

## üìã –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –∞–≤—Ç–æ-—Ä–µ–∂–∏–º–µ:
- **User ID:** 556251171
- **–†–µ–∂–∏–º:** `auto`
- **–ö–ª—é—á–∏ Bitget:** ‚úÖ –ï—Å—Ç—å

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:

```python
# –í signal_live.py, —Ñ—É–Ω–∫—Ü–∏—è send_signal():

# 10. AUTO-–ú–û–î: –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º auto ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
mode = await adb.get_user_mode(int(user_id))

if mode == 'auto':
    # –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
    success = await auto_exec.execute_and_open(
        symbol=symbol,
        direction=signal_type,
        entry_price=signal_price,
        user_id=int(user_id),
        quantity_usdt=actual_entry_amount,
        user_balance=user_balance,
        leverage=actual_leverage,
        sl_price=sl_price,
        tp1_price=tp1_price,
        tp2_price=tp2_price,
        trade_mode=trade_mode
    )
```

---

## üîß –ß–¢–û –î–ï–õ–ê–ï–¢ AUTO-–†–ï–ñ–ò–ú

### 1. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏:
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –ø–æ —Ü–µ–Ω–µ —Å–∏–≥–Ω–∞–ª–∞
- ‚úÖ –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è –∑–∞ 90 —Å–µ–∫—É–Ω–¥ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –º–∞—Ä–∫–µ—Ç
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–ª–µ—á–æ (–¥–ª—è futures)
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏

### 2. –ó–∞—â–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞:
- ‚úÖ Stop Loss (100% –ø–æ–∑–∏—Ü–∏–∏)
- ‚úÖ Take Profit 1 (50% –ø–æ–∑–∏—Ü–∏–∏)
- ‚úÖ Take Profit 2 (–±—É–¥–µ—Ç –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –ø–æ—Å–ª–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è TP1)

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î:
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `signals_log` (PENDING ‚Üí OPEN)
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ `active_positions`
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ `audit_log`

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´

1. **Spot —Ä–µ–∂–∏–º:**
   - SHORT —Å–∏–≥–Ω–∞–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è
   - –û—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ LONG –ø–æ–∑–∏—Ü–∏–∏

2. **Futures —Ä–µ–∂–∏–º:**
   - –û—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∏ LONG –∏ SHORT –ø–æ–∑–∏—Ü–∏–∏
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–ª–µ—á–æ (–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

3. **–ö–ª—é—á–∏ –±–∏—Ä–∂–∏:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `/setup`
   - –•—Ä–∞–Ω—è—Ç—Å—è –≤ `user_exchange_keys` (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã)

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è

---

## üìä –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–£–°–ê

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∞–≤—Ç–æ-—Ä–µ–∂–∏–º–µ
sqlite3 trading.db "SELECT user_id, trade_mode FROM user_settings WHERE trade_mode = 'auto';"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–∏ –±–∏—Ä–∂–∏
sqlite3 trading.db "SELECT user_id, exchange_name, has_keys FROM user_exchange_keys WHERE exchange_name = 'bitget';"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∞–≤—Ç–æ-–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
grep -i "ü§ñ.*AUTO\|AUTO.*–æ—Ç–∫—Ä—ã—Ç" bot.log | tail -20
```

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!**

–ï—Å–ª–∏:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Ä–µ–∂–∏–º–µ `auto`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–ª—é—á–∏ Bitget
- ‚úÖ –°–∏–≥–Ω–∞–ª –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**‚Üí –°–¥–µ–ª–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ –±–∏—Ä–∂–µ!**

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

