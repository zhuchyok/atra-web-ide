# üî¥ –ü–†–û–ë–õ–ï–ú–ê: TP1 –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—é –ø–æ–∑–∏—Ü–∏—é –≤–º–µ—Å—Ç–æ 50%

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ TP1 –Ω–µ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –≤–º–µ—Å—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è (50%) –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –æ—Ä–¥–µ—Ä –Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ–π –ø–æ–∑–∏—Ü–∏–∏.

## üîç –ê–Ω–∞–ª–∏–∑

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

1. **auto_execution.py** (—Å—Ç—Ä–æ–∫–∞ 538):
   ```python
   tp1_amount = _normalize_amount(amount * 0.5)  # 50% –æ—Ç –ø–æ–∑–∏—Ü–∏–∏
   ```

2. **exchange_adapter.py** (—Å—Ç—Ä–æ–∫–∞ 563):
   ```python
   "size": str(size_precise),  # –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è 50% —Ä–∞–∑–º–µ—Ä–∞
   ```

3. **Bitget API**:
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `pos_profit` –ø–ª–∞–Ω-–æ—Ä–¥–µ—Ä
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `size` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–µ

### –ü—Ä–æ–±–ª–µ–º–∞:

**Bitget `pos_profit` –º–æ–∂–µ—Ç –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `size` –∏ –≤—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –≤—Å—é –ø–æ–∑–∏—Ü–∏—é.**

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **Bitget API –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: `pos_profit` –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ `size`
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç**: –ú–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥—Ä—É–≥–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–ª–∏ –º–µ—Ç–æ–¥ API
3. **V1 vs V2 API**: –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ API –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ-—Ä–∞–∑–Ω–æ–º—É

## üîß –†–µ—à–µ–Ω–∏–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π –ø–ª–∞–Ω-–æ—Ä–¥–µ—Ä –≤–º–µ—Å—Ç–æ `pos_profit`

–ï—Å–ª–∏ `pos_profit` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π –ø–ª–∞–Ω-–æ—Ä–¥–µ—Ä —Å `reduce_only=True`:

```python
# –í–º–µ—Å—Ç–æ pos_profit –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π –ø–ª–∞–Ω-–æ—Ä–¥–µ—Ä
plan_type = "normal_plan"  # –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–∏–ø
# size –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Bitget

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Bitget API:
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ `pos_profit` —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ?
- –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ TP1?
- –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è?

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ—Ä–¥–µ—Ä–∞

–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ TP1 –Ω–∞ 50%, –º–æ–∂–Ω–æ –≤—ã—Å—Ç–∞–≤–∏—Ç—å –¥–≤–∞ TP1 –æ—Ä–¥–µ—Ä–∞:
- TP1a: 25% –ø–æ–∑–∏—Ü–∏–∏
- TP1b: 25% –ø–æ–∑–∏—Ü–∏–∏
- –ò—Ç–æ–≥–æ: 50% –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fetch_plan_orders()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
   - –°—Ä–∞–≤–Ω–∏—Ç—å `size` –≤ –∑–∞–ø—Ä–æ—Å–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º `size` –Ω–∞ –±–∏—Ä–∂–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ª–∏ TP1 –≤—Å—é –ø–æ–∑–∏—Ü–∏—é –∏–ª–∏ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**:
   - –ò—Å–∫–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ `pos_profit`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –æ—Ä–¥–µ—Ä–æ–≤ –≤ `order_audit_log`

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
   - –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é
   - –í—ã—Å—Ç–∞–≤–∏—Ç—å TP1 –Ω–∞ 50%
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP1

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Bitget API –¥–ª—è `pos_profit`
2. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ —á–µ—Ä–µ–∑ API
3. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–æ–±—ã—á–Ω—ã–π –ø–ª–∞–Ω-–æ—Ä–¥–µ—Ä)
4. [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É TP1 –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—Å—è

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
- –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è TP1

