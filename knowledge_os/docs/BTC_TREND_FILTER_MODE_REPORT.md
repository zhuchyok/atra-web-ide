# üü¢üî¥ –¢–†–ï–ù–î BITCOIN –ò –†–ï–ñ–ò–ú–´ –§–ò–õ–¨–¢–†–û–í - –ü–û–õ–ù–ê–Ø –õ–û–ì–ò–ö–ê

## üéØ **–û–ë–©–ê–Ø –°–•–ï–ú–ê:**

### **üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–µ–Ω–¥–∞ Bitcoin:**
```python
# –í shared_utils.py
USE_BTC_TREND_FILTER = True  # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ –±–∏—Ç–∫–æ–∏–Ω–∞
BTC_TREND_FILTER_SOFT = True  # True = –º—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä, False = —Å—Ç—Ä–æ–≥–∏–π —Ñ–∏–ª—å—Ç—Ä
```

### **üîç –¢–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ç—Ä–µ–Ω–¥–∞ Bitcoin:**

#### **üü¢ –ú—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä (BTC_TREND_FILTER_SOFT = True):**
```python
def btc_trend_filter_soft(df_btc):
    """–ú—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ –±–∏—Ç–∫–æ–∏–Ω–∞: —Ç–æ–ª—å–∫–æ —Ü–µ–Ω–∞ > EMA200"""
    df_btc["ema200"] = ta.trend.EMAIndicator(df_btc["close"], window=200).ema_indicator()
    df_btc["trend"] = df_btc["close"] > df_btc["ema200"]
    return df_btc["trend"]
```

#### **üî¥ –°—Ç—Ä–æ–≥–∏–π —Ñ–∏–ª—å—Ç—Ä (BTC_TREND_FILTER_SOFT = False):**
```python
def btc_trend_filter(df_btc):
    """–°—Ç—Ä–æ–≥–∏–π —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ –±–∏—Ç–∫–æ–∏–Ω–∞: —Ü–µ–Ω–∞ > EMA200 –ò EMA25 —Ä–∞—Å—Ç—ë—Ç"""
    df_btc["ema200"] = ta.trend.EMAIndicator(df_btc["close"], window=200).ema_indicator()
    df_btc["ema25"] = ta.trend.EMAIndicator(df_btc["close"], window=25).ema_indicator()
    df_btc["trend"] = (df_btc["close"] > df_btc["ema200"]) & (df_btc["ema25"].diff() > 0)
    return df_btc["trend"]
```

---

## üîÑ **–õ–û–ì–ò–ö–ê –ì–ï–ù–ï–†–ê–¶–ò–ò –°–ò–ì–ù–ê–õ–û–í:**

### **üìà LONG —Å–∏–≥–Ω–∞–ª—ã:**
```python
if signal_type == "LONG" and btc_trend_status:  # –ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥ BTC
    print(f"–£—Å–ª–æ–≤–∏—è –¥–ª—è LONG –≤—ã–ø–æ–ª–Ω–µ–Ω—ã + –±—ã—á–∏–π —Ç—Ä–µ–Ω–¥ BTC, —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª!")
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º LONG —Å–∏–≥–Ω–∞–ª
```

### **üìâ SHORT —Å–∏–≥–Ω–∞–ª—ã:**
```python
elif signal_type == "SHORT" and not btc_trend_status:  # –ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥ BTC
    print(f"–£—Å–ª–æ–≤–∏—è –¥–ª—è SHORT –≤—ã–ø–æ–ª–Ω–µ–Ω—ã + –º–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥ BTC, —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª!")
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SHORT —Å–∏–≥–Ω–∞–ª
```

### **‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:**
```python
else:
    print(f"–°–∏–≥–Ω–∞–ª {signal_type} –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–Ω–¥—É BTC")
    # –°–∏–≥–Ω–∞–ª –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
```

---

## üéØ **–°–í–Ø–ó–¨ –° –†–ï–ñ–ò–ú–ê–ú–ò –§–ò–õ–¨–¢–†–û–í:**

### **üîç –í–ê–ñ–ù–û: –¢—Ä–µ–Ω–¥ Bitcoin –ù–ï –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ä–µ–∂–∏–º–∞–º —Ñ–∏–ª—å—Ç—Ä–æ–≤!**

#### **üìä –†–µ–∂–∏–º—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ (balanced/soft):**
- **–í–ª–∏—è—é—Ç –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è** –≤—Ö–æ–¥–∞ –≤ –ø–æ–∑–∏—Ü–∏—é
- **–û–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä–æ–≥–æ—Å—Ç—å** —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- **–ù–ï –≤–ª–∏—è—é—Ç** –Ω–∞ —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ Bitcoin

#### **üü¢üî¥ –§–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ Bitcoin:**
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º** —Ä–µ–∂–∏–º–∞–º —Ñ–∏–ª—å—Ç—Ä–æ–≤
- **–ù–µ–∑–∞–≤–∏—Å–∏–º** –æ—Ç —Ä–µ–∂–∏–º–æ–≤ balanced/soft

---

## üìã **–¢–ê–ë–õ–ò–¶–ê –ü–û–í–ï–î–ï–ù–ò–Ø:**

| –†–µ–∂–∏–º —Ñ–∏–ª—å—Ç—Ä–∞ | –¢—Ä–µ–Ω–¥ BTC | LONG —Å–∏–≥–Ω–∞–ª—ã | SHORT —Å–∏–≥–Ω–∞–ª—ã |
|---------------|-----------|--------------|---------------|
| **balanced** | üü¢ –ë–´–ß–ò–ô | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è | ‚ùå –ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è |
| **balanced** | üî¥ –ú–ï–î–í–ï–ñ–ò–ô | ‚ùå –ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è |
| **soft** | üü¢ –ë–´–ß–ò–ô | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è | ‚ùå –ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è |
| **soft** | üî¥ –ú–ï–î–í–ï–ñ–ò–ô | ‚ùå –ë–ª–æ–∫–∏—Ä—É—é—Ç—Å—è | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è |

---

## üéØ **–ü–†–ò–ú–ï–†–´ –°–¶–ï–ù–ê–†–ò–ï–í:**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥ Bitcoin**
```
–¢–µ–∫—É—â–∏–π —Ç—Ä–µ–Ω–¥: üü¢ –ë–´–ß–ò–ô (—Ü–µ–Ω–∞ BTC > EMA200)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 556251171 (SPOT + soft):
‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã
‚Ä¢ –¢—Ä–µ–Ω–¥ BTC: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç LONG
‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç LONG —Å–∏–≥–Ω–∞–ª

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 958930260 (FUTURES + soft):
‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã
‚Ä¢ –¢—Ä–µ–Ω–¥ BTC: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç LONG
‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç LONG —Å–∏–≥–Ω–∞–ª
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥ Bitcoin**
```
–¢–µ–∫—É—â–∏–π —Ç—Ä–µ–Ω–¥: üî¥ –ú–ï–î–í–ï–ñ–ò–ô (—Ü–µ–Ω–∞ BTC < EMA200)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 556251171 (SPOT + soft):
‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã
‚Ä¢ –¢—Ä–µ–Ω–¥ BTC: ‚ùå –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç LONG
‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå –ù–ï –ø–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 958930260 (FUTURES + soft):
‚Ä¢ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É—Å–ª–æ–≤–∏—è: ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω—ã
‚Ä¢ –¢—Ä–µ–Ω–¥ BTC: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç SHORT
‚Ä¢ –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç SHORT —Å–∏–≥–Ω–∞–ª
```

---

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø:**

### **1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞:**
```python
btc_trend_status = get_btc_trend_status(btc_df, use_soft_filter=BTC_TREND_FILTER_SOFT)
print(f"–¢—Ä–µ–Ω–¥ BTCUSDT: {'–ë–´–ß–ò–ô' if btc_trend_status else '–ú–ï–î–í–ï–ñ–ò–ô'} ({'–º—è–≥–∫–∏–π' if BTC_TREND_FILTER_SOFT else '—Å—Ç—Ä–æ–≥–∏–π'} —Ñ–∏–ª—å—Ç—Ä)")
```

### **2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞:**
```python
# –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ä–µ–∂–∏–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞
for user_id, user_data in user_data_dict.items():
    for filter_mode in ["balanced", "soft"]:
        signal_type, signal_price = get_entry_signal_by_mode(df, current_index, filter_mode)

        if signal_type == "LONG" and btc_trend_status:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º LONG —Å–∏–≥–Ω–∞–ª
        elif signal_type == "SHORT" and not btc_trend_status:
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SHORT —Å–∏–≥–Ω–∞–ª
        else:
            # –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª
```

### **3. –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
/btc_filter_on  - –≤–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ Bitcoin
/btc_filter_off - –≤—ã–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ Bitcoin

# –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø —Ñ–∏–ª—å—Ç—Ä–∞
/btc_filter_soft   - –º—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä (—Ç–æ–ª—å–∫–æ EMA200)
/btc_filter_strict - —Å—Ç—Ä–æ–≥–∏–π —Ñ–∏–ª—å—Ç—Ä (EMA200 + EMA25)
```

---

## üìä **–í–õ–ò–Ø–ù–ò–ï –ù–ê –°–ò–°–¢–ï–ú–£:**

### **‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤** –≤ –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–µ–º —Ç—Ä–µ–Ω–¥–µ
- **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤** –∑–∞ —Å—á–µ—Ç —Ç—Ä–µ–Ω–¥–∞ Bitcoin
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### **‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ú–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã** –≤ –±–æ–∫–æ–≤–æ–º —Ç—Ä–µ–Ω–¥–µ
- **–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–æ–≤** —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º** —Å–∏–º–≤–æ–ª–∞–º

---

## üéØ **–ò–¢–û–ì:**

### **üîë –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
1. **–¢—Ä–µ–Ω–¥ Bitcoin - –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä** –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–ù–ï –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–æ–≤** balanced/soft
3. **LONG —Å–∏–≥–Ω–∞–ª—ã** —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –±—ã—á—å–µ–º —Ç—Ä–µ–Ω–¥–µ Bitcoin
4. **SHORT —Å–∏–≥–Ω–∞–ª—ã** —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–µ–¥–≤–µ–∂—å–µ–º —Ç—Ä–µ–Ω–¥–µ Bitcoin

### **üìä –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- **–§–∏–ª—å—Ç—Ä –≤–∫–ª—é—á–µ–Ω:** `USE_BTC_TREND_FILTER = True`
- **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º:** `BTC_TREND_FILTER_SOFT = True`
- **–õ–æ–≥–∏–∫–∞:** —Ü–µ–Ω–∞ BTC > EMA200 = –±—ã—á–∏–π —Ç—Ä–µ–Ω–¥

### **üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:**
**–¢—Ä–µ–Ω–¥ Bitcoin —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∂–∏–º–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!**