# –ê–Ω–∞–ª–∏–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ç–µ–π–∫ –ø—Ä–æ—Ñ–∏—Ç–æ–≤ –≤ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ —Ç–µ–π–∫ –ø—Ä–æ—Ñ–∏—Ç—ã –≤ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö –∫–∞–∂—É—Ç—Å—è –Ω–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ TP —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `get_dynamic_tp_levels` –≤ `shared_utils.py` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

- **BTCUSDT**: TP1: 2.02%, TP2: 4.04% (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å: 0.34%)
- **ETHUSDT**: TP1: 2.05%, TP2: 4.10% (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å: 1.01%)
- **ADAUSDT**: TP1: 2.08%, TP2: 4.16% (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å: 1.86%)
- **SOLUSDT**: TP1: 2.05%, TP2: 4.10% (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å: 1.24%)

### üîß –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Fallback –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è**: –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ TP (1.0%, 2.0%) –∫–æ–≥–¥–∞:
   - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö (i < 21)
   - DataFrame –∏–ª–∏ current_index —Ä–∞–≤–Ω—ã None
   - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö

2. **–ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥–µ `/accept`**: –í `signal_live.py` —Å—Ç—Ä–æ–∫–∞ 3570 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `1.0` –≤–º–µ—Å—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ `tp1_pct`.

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏**: –ù–µ –±—ã–ª–æ –≤–∏–¥–Ω–æ, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

4. **–¢–æ–ª—å–∫–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ TP –±—ã–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, –±–µ–∑ —É—á–µ—Ç–∞ –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞.

## üõ†Ô∏è –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–§–∞–π–ª**: `shared_utils.py`
```python
def get_dynamic_tp_levels(df, i, side="long", base_tp1_pct=2.0, base_tp2_pct=4.0):
    import logging

    if i < 21:
        logging.info(f"[TP] –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ (i={i}), –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: {base_tp1_pct}%, {base_tp2_pct}%")
        return base_tp1_pct, base_tp2_pct

    # ... —Ä–∞—Å—á–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö TP ...

    logging.info(f"[TP] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –¥–ª—è {side}: –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å={volatility:.4f}, —Ñ–∞–∫—Ç–æ—Ä={volatility_factor:.2f}, TP1={final_tp1}%, TP2={final_tp2}%")
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/accept`

**–§–∞–π–ª**: `signal_live.py`
```python
# –ë—ã–ª–æ:
f"<code>/accept {symbol} {now.strftime('%Y-%m-%dT%H:%M')} {price:.2f} 1.0 {side.lower()} {risk_pct:.1f} {leverage_for_callback}</code>"

# –°—Ç–∞–ª–æ:
f"<code>/accept {symbol} {now.strftime('%Y-%m-%dT%H:%M')} {price:.2f} {tp1_pct:.1f} {side.lower()} {risk_pct:.1f} {leverage_for_callback}</code>"
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Å–∏–≥–Ω–∞–ª—ã

**–§–∞–π–ª**: `signal_live.py`
```python
print(f"[DEBUG] –í—ã–∑–æ–≤ get_dynamic_tp_levels –¥–ª—è {symbol}: df.shape={df.shape if df is not None else 'None'}, current_index={current_index}, side={side.lower()}")
tp1_pct, tp2_pct = get_dynamic_tp_levels(df, current_index, side.lower())
print(f"[DEBUG] –ü–æ–ª—É—á–µ–Ω—ã TP –¥–ª—è {symbol}: TP1={tp1_pct}%, TP2={tp2_pct}%")
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ DCA

**–§–∞–π–ª—ã**: `signal_live.py`, `telegram_bot.py`
```python
print(f"[DEBUG] DCA: –í—ã–∑–æ–≤ get_dynamic_tp_levels –¥–ª—è {side}: df.shape={df.shape}, current_index={current_index}")
dynamic_tp1_pct, dynamic_tp2_pct = get_dynamic_tp_levels(df, current_index, side)
print(f"[DEBUG] DCA: –ü–æ–ª—É—á–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ TP: {dynamic_tp1_pct}%, {dynamic_tp2_pct}%")
```

### 5. üÜï **–ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–´–ï –¢–ï–ô–ö –ü–†–û–§–ò–¢–´** (–ù–û–í–û–ï!)

**–§–∞–π–ª**: `shared_utils.py` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_dynamic_tp_levels`

–¢–µ–ø–µ—Ä—å TP —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ **–î–í–£–• —Ñ–∞–∫—Ç–æ—Ä–æ–≤**:

1. **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å** (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
2. **–ü–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞** (–ù–û–í–û–ï!)

```python
def get_dynamic_tp_levels(df, i, side="long", base_tp1_pct=2.0, base_tp2_pct=4.0):
    """
    –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω–µ–π Take Profit –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –ò –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞
    """
    # 1. –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
    closes = df["close"].iloc[i - 20 : i]
    volatility = closes.std() / closes.mean()
    volatility_factor = 1 + volatility * 2
    vol_tp1 = base_tp1_pct * volatility_factor
    vol_tp2 = base_tp2_pct * volatility_factor

    # 2. –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞
    if 'bb_middle' in df.columns and not pd.isna(df['bb_middle'].iloc[i]):
        bb_middle = df['bb_middle'].iloc[i]

        if side.lower() == "long":
            # –î–ª—è LONG: TP = —Å—Ä–µ–¥–Ω—è—è –ª–∏–Ω–∏—è BB + –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç
            bb_tp1_pct = ((bb_middle * 1.015) / current_price - 1) * 100  # +1.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏
            bb_tp2_pct = ((bb_middle * 1.025) / current_price - 1) * 100  # +2.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏
        else:  # short
            # –î–ª—è SHORT: TP = —Å—Ä–µ–¥–Ω—è—è –ª–∏–Ω–∏—è BB - –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç
            bb_tp1_pct = (1 - (bb_middle * 0.985) / current_price) * 100  # -1.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏
            bb_tp2_pct = (1 - (bb_middle * 0.975) / current_price) * 100  # -2.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏

    # 3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –±–µ—Ä–µ–º –º–∞–∫—Å–∏–º—É–º –¥–ª—è LONG, –º–∏–Ω–∏–º—É–º –¥–ª—è SHORT
    if bb_tp1 is not None:
        if side.lower() == "long":
            final_tp1 = max(vol_tp1, bb_tp1)
            final_tp2 = max(vol_tp2, bb_tp2)
        else:  # short
            final_tp1 = min(vol_tp1, bb_tp1)
            final_tp2 = min(vol_tp2, bb_tp2)
    else:
        # Fallback –Ω–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
        final_tp1 = vol_tp1
        final_tp2 = vol_tp2
```

## üìà –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ TP

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞

```python
# –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
base_tp1_pct = 2.0  # 2%
base_tp2_pct = 4.0  # 4%

# 1. –†–∞—Å—á–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (20 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–≤–µ—á–µ–π)
closes = df["close"].iloc[i - 20 : i]
volatility = closes.std() / closes.mean()
volatility_factor = 1 + volatility * 2
vol_tp1 = base_tp1_pct * volatility_factor
vol_tp2 = base_tp2_pct * volatility_factor

# 2. –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞
bb_middle = df['bb_middle'].iloc[i]

# –î–ª—è LONG –ø–æ–∑–∏—Ü–∏–π:
bb_tp1_pct = ((bb_middle * 1.015) / current_price - 1) * 100  # +1.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏
bb_tp2_pct = ((bb_middle * 1.025) / current_price - 1) * 100  # +2.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏

# –î–ª—è SHORT –ø–æ–∑–∏—Ü–∏–π:
bb_tp1_pct = (1 - (bb_middle * 0.985) / current_price) * 100  # -1.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏
bb_tp2_pct = (1 - (bb_middle * 0.975) / current_price) * 100  # -2.5% –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏

# 3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥
final_tp1 = max(vol_tp1, bb_tp1) if side == "long" else min(vol_tp1, bb_tp1)
final_tp2 = max(vol_tp2, bb_tp2) if side == "long" else min(vol_tp2, bb_tp2)

# 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
final_tp1 = max(0.5, min(final_tp1, 10))  # –æ—Ç 0.5% –¥–æ 10%
final_tp2 = max(1.0, min(final_tp2, 15))  # –æ—Ç 1.0% –¥–æ 15%
```

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö TP

| –°–∏–º–≤–æ–ª | –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å | BB —Å—Ä–µ–¥–Ω—è—è | TP1 (LONG) | TP2 (LONG) | TP1 (SHORT) | TP2 (SHORT) |
|--------|---------------|------------|------------|------------|-------------|-------------|
| BTCUSDT | 0.34% | 116802 | 2.02% | 4.04% | 1.37% | 2.37% |
| ETHUSDT | 1.00% | 3868 | 2.05% | 4.10% | 2.05% | 3.27% |
| ADAUSDT | 1.84% | 0.774 | 2.08% | 4.16% | 2.08% | 4.16% |

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏**: –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å = –±–æ–ª—å—à–∏–µ TP
2. **–£—á–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä—ã–Ω–∫–∞**: –ü–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞ —É—á–∏—Ç—ã–≤–∞—é—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ü–µ–Ω—ã
3. **–†–∞–∑–Ω—ã–µ TP –¥–ª—è LONG/SHORT**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
4. **Fallback —Å–∏—Å—Ç–µ–º–∞**: –ï—Å–ª–∏ BB –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

–¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:
- –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ TP –∏ –ø–æ—á–µ–º—É
- –ö–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ BB –ø–æ–ª—É—á–∞—é—Ç—Å—è
- –ö–∞–∫–æ–π –º–µ—Ç–æ–¥ (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ BB) –¥–∞–ª –±–æ–ª—å—à–∏–π TP
- –í—Å–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏ `get_dynamic_tp_levels`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –ü–æ–ª—É—á–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–º–∏–Ω–∏–º—É–º 21 —Å–≤–µ—á–∞)
- DataFrame —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ª–æ–Ω–∫–∏ 'close' –∏ 'bb_middle'
- current_index –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è TP (—Å–µ–π—á–∞—Å 2% –∏ 4%)
- –ú–Ω–æ–∂–∏—Ç–µ–ª—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (—Å–µ–π—á–∞—Å 2)
- –ü—Ä–æ—Ü–µ–Ω—Ç—ã –æ—Ç —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏ BB (—Å–µ–π—á–∞—Å 1.5% –∏ 2.5%)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–π–∫ –ø—Ä–æ—Ñ–∏—Ç—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ **–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ—Å–Ω–æ–≤–µ**:

1. **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å** - –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ä—ã–Ω–æ—á–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º
2. **–ü–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞** - —É—á–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ü–µ–Ω—ã
3. **–£–º–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è** - –º–∞–∫—Å–∏–º—É–º –¥–ª—è LONG, –º–∏–Ω–∏–º—É–º –¥–ª—è SHORT
4. **Fallback —Å–∏—Å—Ç–µ–º–∞** - –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
- ‚úÖ Fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥–µ `/accept`
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –¢–æ–ª—å–∫–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (–¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞)

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–π–∫ –ø—Ä–æ—Ñ–∏—Ç–æ–≤.

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã**: `shared_utils.py`, `signal_live.py`, `telegram_bot.py`
- **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞**: –≤–æ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–∞ TP
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞**: `/accept` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ TP
- **–ù–û–í–û–ï**: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ TP —Å –ø–æ–ª–æ—Å–∞–º–∏ –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞
- **–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç**: `test_combined_tp.py` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–π–∫ –ø—Ä–æ—Ñ–∏—Ç–æ–≤.
