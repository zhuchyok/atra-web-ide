# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–¥–µ–ª–æ–∫

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–¥–µ–ª–æ–∫ –∏ –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –Ω–∏—Ö, **–±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**. –í—Å–µ –∫–Ω–æ–ø–∫–∏ HITL feedback —É–±—Ä–∞–Ω—ã ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è.

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–¥–µ–ª–æ–∫

**–ú–æ–¥—É–ª—å:** `observability/auto_analyzer.py`

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `trades` –≤ –ë–î
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ:
  - **RSI** (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
  - **MACD** (–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
  - **BTC —Ç—Ä–µ–Ω–¥** (–Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–Ω–¥–∞)
  - **–û–±—ä—ë–º** (–Ω–∏–∑–∫–∏–π –æ–±—ä—ë–º)
  - **Confidence** (–Ω–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
  - **AI Score** (–Ω–∏–∑–∫–∏–π —Å–∫–æ—Ä)
  - **PnL** (–∫—Ä—É–ø–Ω—ã–µ —É–±—ã—Ç–∫–∏, —Å—Ç–æ–ø-–∞—É—Ç—ã)

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤

**–ú–æ–¥—É–ª—å:** `observability/feedback.py`

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–¥–µ–ª–∫–∏ –ø–æ –ø—Ä–æ–±–ª–µ–º–∞–º
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç—å (win rate) –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —É—Ä–æ–∫–∏ –≤ `observability/lessons.json`

### 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏–π

**–ú–æ–¥—É–ª—å:** `observability/guidance.py`

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç —É—Ä–æ–∫–∏ –∫ –∞–≥–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ `GuidanceStore`
- –û–±–Ω–æ–≤–ª—è–µ—Ç `configs/guidance/<agent>.json`
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤ `configs/prompts/<agent>.yaml` –∏ `docs/guidance/<agent>.md`
- –ê–≥–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç —É—Ä–æ–∫–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –ü—Ä–∏–º–µ—Ä 1: RSI –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è LONG

**–ü—Ä–æ–±–ª–µ–º–∞:** `rsi_overbought_long`

**–£—Å–ª–æ–≤–∏–µ:** LONG —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ RSI > 75

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤: 15
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 20% (3 –∏–∑ 15)
- –°—Ä–µ–¥–Ω–∏–π PnL: -5.2 USD

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
> "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å LONG —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ RSI > 75 –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä RSI –¥–ª—è LONG. –ö—Ä–∏—Ç–∏—á–Ω–æ: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å 20%, —Å—Ä–µ–¥–Ω–∏–π PnL -5.2 USD."

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç LONG —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ RSI > 75 –≤ –±—É–¥—É—â–µ–º.

---

### –ü—Ä–∏–º–µ—Ä 2: BTC —Ç—Ä–µ–Ω–¥ –Ω–µ —É—á—Ç—ë–Ω –¥–ª—è SHORT

**–ü—Ä–æ–±–ª–µ–º–∞:** `btc_bullish_short`

**–£—Å–ª–æ–≤–∏–µ:** SHORT —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –±—ã—á—å–µ–º BTC —Ç—Ä–µ–Ω–¥–µ

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤: 8
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 25% (2 –∏–∑ 8)
- –°—Ä–µ–¥–Ω–∏–π PnL: -3.1 USD

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
> "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å SHORT —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –±—ã—á—å–µ–º BTC —Ç—Ä–µ–Ω–¥–µ –∏–ª–∏ —É—Å–∏–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É BTC alignment. –í–Ω–∏–º–∞–Ω–∏–µ: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å 25%, —Å—Ä–µ–¥–Ω–∏–π PnL -3.1 USD."

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å–∏–ª–∏–≤–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É BTC alignment –¥–ª—è SHORT —Å–∏–≥–Ω–∞–ª–æ–≤.

---

### –ü—Ä–∏–º–µ—Ä 3: –ù–∏–∑–∫–∏–π –æ–±—ä—ë–º

**–ü—Ä–æ–±–ª–µ–º–∞:** `low_volume`

**–£—Å–ª–æ–≤–∏–µ:** –°–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –æ–±—ä—ë–º–µ

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤: 12
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 33% (4 –∏–∑ 12)
- –°—Ä–µ–¥–Ω–∏–π PnL: -2.5 USD

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
> "–£–≤–µ–ª–∏—á–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –æ–±—ä—ë–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤. –í–Ω–∏–º–∞–Ω–∏–µ: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å 33%, —Å—Ä–µ–¥–Ω–∏–π PnL -2.5 USD."

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –æ–±—ä—ë–º–∞.

---

## üöÄ –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫:

```bash
# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —É–ª—É—á—à–µ–Ω–∏–π
python scripts/run_auto_analysis.py --db trading.db --lookback-days 30 --apply-guidance

# –¢–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏–∑ –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
python scripts/run_auto_analysis.py --db trading.db --lookback-days 30
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:

**Cron job:** `infrastructure/cron/auto_analysis.cron`

```cron
# –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 03:00 MSK
0 3 * * * cd /root/atra && /root/atra/.venv/bin/python scripts/run_auto_analysis.py --db trading.db --lookback-days 30 --apply-guidance >> logs/auto_analysis.log 2>&1
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
observability/
‚îú‚îÄ‚îÄ auto_analyzer.py          # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–¥–µ–ª–æ–∫
‚îú‚îÄ‚îÄ feedback.py                # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
‚îú‚îÄ‚îÄ guidance.py                # –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–∫–æ–≤
‚îî‚îÄ‚îÄ lessons.json               # –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —É—Ä–æ–∫–∏

configs/
‚îú‚îÄ‚îÄ guidance/
‚îÇ   ‚îú‚îÄ‚îÄ signal_live.json       # –£—Ä–æ–∫–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ signal_live
‚îÇ   ‚îú‚îÄ‚îÄ auto_execution.json    # –£—Ä–æ–∫–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ auto_execution
‚îÇ   ‚îî‚îÄ‚îÄ risk_monitor.json      # –£—Ä–æ–∫–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ risk_monitor
‚îî‚îÄ‚îÄ prompts/
    ‚îú‚îÄ‚îÄ signal_live.yaml       # –≠–∫—Å–ø–æ—Ä—Ç –≤ YAML
    ‚îî‚îÄ‚îÄ ...

docs/
‚îî‚îÄ‚îÄ guidance/
    ‚îú‚îÄ‚îÄ signal_live.md         # –≠–∫—Å–ø–æ—Ä—Ç –≤ Markdown
    ‚îî‚îÄ‚îÄ ...
```

---

## üîç –û–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:

- `rsi_overbought_long` ‚Äî LONG –ø—Ä–∏ RSI > 75
- `rsi_oversold_short` ‚Äî SHORT –ø—Ä–∏ RSI < 25
- `macd_bearish_long` ‚Äî LONG –ø—Ä–∏ –º–µ–¥–≤–µ–∂—å–µ–º MACD
- `macd_bullish_short` ‚Äî SHORT –ø—Ä–∏ –±—ã—á—å–µ–º MACD
- `btc_bearish_long` ‚Äî LONG –ø—Ä–∏ –º–µ–¥–≤–µ–∂—å–µ–º BTC —Ç—Ä–µ–Ω–¥–µ
- `btc_bullish_short` ‚Äî SHORT –ø—Ä–∏ –±—ã—á—å–µ–º BTC —Ç—Ä–µ–Ω–¥–µ

### –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–∞:

- `low_volume` ‚Äî –ù–∏–∑–∫–∏–π –æ–±—ä—ë–º
- `low_confidence` ‚Äî –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (< 60%)
- `low_ai_score` ‚Äî –ù–∏–∑–∫–∏–π AI score (< 50)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

- `large_loss` ‚Äî –ö—Ä—É–ø–Ω—ã–µ —É–±—ã—Ç–∫–∏ (< -10 USD)
- `stopped_out` ‚Äî –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Å—Ç–æ–ø-–ª–æ—Å—Å—É

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞

–î–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç:

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª—É—á–∞–µ–≤** ‚Äî —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—Ä–æ–±–ª–µ–º–∞ –≤—Å—Ç—Ä–µ—á–∞–ª–∞—Å—å
2. **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å (win rate)** ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
3. **–°—Ä–µ–¥–Ω–∏–π PnL** ‚Äî —Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ –≤ USD
4. **–ü—Ä–∏–º–µ—Ä—ã** ‚Äî –¥–æ 5 –ø—Ä–∏–º–µ—Ä–æ–≤ —Å–¥–µ–ª–æ–∫ —Å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π

---

## üéì –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É—Ä–æ–∫–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

1. **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑** (03:00 MSK) ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ cron
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ä–æ–∫–æ–≤** ‚Äî –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 30 –¥–Ω–µ–π —Å–¥–µ–ª–æ–∫
3. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ guidance** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
4. **–≠–∫—Å–ø–æ—Ä—Ç** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤ YAML –∏ Markdown

### –†—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:

```bash
# –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
python scripts/process_feedback.py --db trading.db --apply-guidance
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–∞–º–∏

### –ê–≥–µ–Ω—Ç `signal_live`:

```python
from observability.guidance import get_guidance

# –ó–∞–≥—Ä—É–∑–∫–∞ —É—Ä–æ–∫–æ–≤
guidance_entries = get_guidance("signal_live", limit=3)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∏–∫–µ
for entry in guidance_entries:
    if entry.issue == "rsi_overbought_long":
        # –ë–ª–æ–∫–∏—Ä—É–µ–º LONG –ø—Ä–∏ RSI > 75
        if direction == "LONG" and rsi > 75:
            return False
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏:

```bash
# –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
tail -f logs/auto_analysis.log

# –õ–æ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
grep "auto_analysis" logs/system.log
```

### –ú–µ—Ç—Ä–∏–∫–∏:

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫–æ–≤
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è guidance

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∞–ª–∏–∑–∞:

```python
analyzer = AutoTradeAnalyzer(
    db_path="trading.db",
    lookback_days=30,  # –ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ (–¥–Ω–∏)
)

# –ú–∏–Ω–∏–º—É–º —Å–¥–µ–ª–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
analyzer.min_trades_for_analysis = 10
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Ä–æ–∫–æ–≤:

```python
# –ú–∏–Ω–∏–º—É–º —Å–ª—É—á–∞–µ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–∞
min_cases = 3

# –ú–∞–∫—Å–∏–º—É–º –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ —É—Ä–æ–∫–µ
max_samples = 5
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã

1. **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞** ‚Äî –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–û–±—É—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–¥–µ–ª–æ–∫
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** ‚Äî —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
4. **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ** ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ —Å –∫–∞–∂–¥–æ–π —Å–¥–µ–ª–∫–æ–π
5. **–û–±—ä–µ–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑** ‚Äî –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ, –∞ –Ω–µ –Ω–∞ —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ü–µ–Ω–∫–∞—Ö

---

## üìù –ü—Ä–∏–º–µ—Ä—ã —É—Ä–æ–∫–æ–≤

### –£—Ä–æ–∫ 1: RSI –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å

```json
{
  "agent": "signal_live",
  "issue": "rsi_overbought_long",
  "count": 15,
  "recommendation": "–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å LONG —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ RSI > 75 –∏–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä RSI –¥–ª—è LONG. –ö—Ä–∏—Ç–∏—á–Ω–æ: —É—Å–ø–µ—à–Ω–æ—Å—Ç—å 20%, —Å—Ä–µ–¥–Ω–∏–π PnL -5.2 USD.",
  "success_rate": 0.2,
  "avg_pnl": -5.2,
  "samples": [
    {
      "symbol": "BTCUSDT",
      "direction": "LONG",
      "pnl_usd": -8.5,
      "pnl_percent": -2.1,
      "exit_reason": "stop_loss"
    }
  ]
}
```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ `lookback_days` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 60)
- –£–º–µ–Ω—å—à–∏—Ç–µ `min_trades_for_analysis` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ 5)

### –ü—Ä–æ–±–ª–µ–º–∞: –£—Ä–æ–∫–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `logs/auto_analysis.log`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–ª–∞–≥ `--apply-guidance` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ `configs/guidance/`

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º–µ –æ–±—É—á–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `logs/auto_analysis.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Ä–æ–∫–∏: `observability/lessons.json`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ guidance: `configs/guidance/<agent>.json`

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-13  
**–ê–≤—Ç–æ—Ä:** ATRA Team

