# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –î–í–û–ô–ù–û–ì–û –ù–ê–ñ–ê–¢–ò–Ø –ö–ù–û–ü–û–ö (–§–ò–ù–ê–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø)

## ‚ùå **–ü–†–û–ë–õ–ï–ú–´:**

1. –ö–Ω–æ–ø–∫–∏ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞ - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –≤—Ç–æ—Ä–æ–π —Ä–∞–∑, –∞ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ —É–∂–µ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
2. DCA –∫–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ —Å–∏–≥–Ω–∞–ª—ã (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã)

---

## ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### 1. **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø—Ä–∏–Ω—è—Ç–∏—è –æ–±—ã—á–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤**

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è **–æ–±—ã—á–Ω—ã—Ö (–Ω–µ DCA) —Å–∏–≥–Ω–∞–ª–æ–≤** –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Å–∏–≥–Ω–∞–ª–∞:

```python
if pl['is_dca']:
    # DCA –ª–æ–≥–∏–∫–∞ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
    is_dca_signal = True
else:
    # –û–±—ã—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª
    is_dca_signal = False
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –¢–û–õ–¨–ö–û –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
    entry_time = pl.get('ts', "")
    signal_key = f"{symbol}_{entry_time}"
    if "accepted_signals" in user_data:
        if any(s.get("signal_key") == signal_key for s in user_data["accepted_signals"]):
            await query.edit_message_text(
                "‚úÖ <b>–°–∏–≥–Ω–∞–ª —É–∂–µ –ø—Ä–∏–Ω—è—Ç</b>\n\n"
                f"–°–∏–º–≤–æ–ª: {symbol}\n"
                f"–¶–µ–Ω–∞: {entry_price}\n\n"
                f"üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É DCA –¥–ª—è —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏",
                parse_mode='HTML'
            )
            return
```

### 2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**

- –í `db.py`: –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id` –≤ `get_last_signal_log(user_id=None)`
- –í `telegram_commands.py`: –∫–æ–º–∞–Ω–¥–∞ `/last_signal` –ø–µ—Ä–µ–¥–∞–µ—Ç `user_id` —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–∏–≥–Ω–∞–ª—ã

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

‚úÖ **DCA —Å–∏–≥–Ω–∞–ª—ã** - —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è –ª—é–±—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–æ–≤—ã—Ö –∏ —Å—Ç–∞—Ä—ã—Ö), —É—Å—Ä–µ–¥–Ω—è—é—Ç –ø–æ–∑–∏—Ü–∏—é
‚úÖ **–û–±—ã—á–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã** - –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–≤–æ–π–Ω–æ–≥–æ –ø—Ä–∏–Ω—è—Ç–∏—è
‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ** - –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DCA
‚úÖ **–ö–æ–º–∞–Ω–¥–∞ /last_signal** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ –Ω–µ –¥—Ä—É–≥–∏—Ö

---

## üìù **–ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´:**

- `telegram_handlers.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- `db.py` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `user_id` –≤ `get_last_signal_log()`
- `telegram_commands.py` - –ø–µ—Ä–µ–¥–∞—á–∞ `user_id` –≤ –∫–æ–º–∞–Ω–¥–µ `/last_signal`

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω** ‚úÖ
**–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–∞—Ä—ã–µ –∏ –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã** ‚úÖ
**DCA –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** ‚úÖ
