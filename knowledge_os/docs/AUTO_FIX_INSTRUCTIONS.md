# üöÄ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–ó–ò–¶–ò–ô

## ‚úÖ –í–°–ï –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω—ã, –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ git. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ –±–æ–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

---

## üìã –ö–û–ú–ê–ù–î–´ –î–õ–Ø –°–ï–†–í–ï–†–ê

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –ù–∞ –±–æ–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
cd /path/to/atra
git pull  # –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
python3 scripts/auto_fix_all_positions.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç –≤—Å–µ —à–∞–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏
2. ‚úÖ –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PUMPUSDT
3. ‚úÖ –û–±—â–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π

---

### **–í–∞—Ä–∏–∞–Ω—Ç 2: Bash —Å–∫—Ä–∏–ø—Ç**

```bash
# –ù–∞ –±–æ–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
cd /path/to/atra
git pull
bash scripts/run_all_fixes.sh
```

---

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ—à–∞–≥–æ–≤–æ (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å)**

```bash
# –ù–∞ –±–æ–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ:
cd /path/to/atra
git pull

# –®–∞–≥ 1: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
python3 scripts/sync_positions_with_exchange.py

# –®–∞–≥ 2: PUMPUSDT
python3 scripts/emergency_fix_pumpusdt.py

# –®–∞–≥ 3: –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏
python3 scripts/fix_open_positions_tp_sl.py
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–û–í

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ù–∞ –±–∏—Ä–∂–µ:**
   - PUMPUSDT –∏–º–µ–µ—Ç TP1, TP2, SL
   - –í—Å–µ –¥—Ä—É–≥–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã

2. **–í –ë–î:**
   ```sql
   -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏
   SELECT * FROM active_positions WHERE symbol = 'PUMPUSDT';
   
   -- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä–¥–µ—Ä–∞
   SELECT * FROM order_audit_log 
   WHERE symbol LIKE '%PUMP%' 
     AND datetime(created_at) > datetime('now', '-1 hour')
   ORDER BY created_at DESC;
   ```

3. **–í –ª–æ–≥–∞—Ö:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ —Å–æ–∑–¥–∞–Ω–∏–∏ TP1/TP2/SL
   - –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

- –°–∫—Ä–∏–ø—Ç—ã **–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã** - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- –ï—Å–ª–∏ TP/SL —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç, —Å–∫—Ä–∏–ø—Ç—ã –∏—Ö –ø—Ä–æ–ø—É—Å—Ç—è—Ç
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `order_audit_log`

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

- ‚úÖ PUMPUSDT –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ë–î
- ‚úÖ TP1 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: 0.003175 (50% –æ–±—ä–µ–º–∞)
- ‚úÖ TP2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: 0.003110 (50% –æ–±—ä–µ–º–∞)
- ‚úÖ SL –ø—Ä–æ–≤–µ—Ä–µ–Ω/—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: 0.003293
- ‚úÖ –í—Å–µ –¥—Ä—É–≥–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã

---

## üìû –ï–°–õ–ò –ß–¢–û-–¢–û –ü–û–®–õ–û –ù–ï –¢–ê–ö

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á–∏ Bitget –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∏—Ä–∂–∏
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ–≤—Ç–æ—Ä–Ω–æ (–æ–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã)

