# üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï ORDER FLOW –§–ò–õ–¨–¢–†–ê

## üìÖ –î–∞—Ç–∞: 2024

## ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–´ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´

### üìä –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- **`required_confirmations: 0`** (–≤ –º—è–≥–∫–æ–º —Ä–µ–∂–∏–º–µ)
- **`pr_threshold: 0.6`**

### üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

**–§–∞–π–ª:** `src/filters/order_flow_filter.py`

#### –î–ª—è LONG —Å–∏–≥–Ω–∞–ª–æ–≤:
```python
# –ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º (strict_mode=False):
# - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¢–û–õ–¨–ö–û Pressure Ratio
# - –ü–æ—Ä–æ–≥: PR > 0.6 (–≤–º–µ—Å—Ç–æ PR > 1.0)
# - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ—Ç CDV/VD

if not strict_mode:
    pr_ok = pr_value > 0.6 if pr_value is not None else True
    return pr_ok, None if pr_ok else f"Pressure Ratio {pr_value:.3f} <= 0.6"
```

#### –î–ª—è SHORT —Å–∏–≥–Ω–∞–ª–æ–≤:
```python
# –ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º (strict_mode=False):
# - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¢–û–õ–¨–ö–û Pressure Ratio
# - –ü–æ—Ä–æ–≥: PR < 1.0 (–ø—Ä–µ–æ–±–ª–∞–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂)

if not strict_mode:
    pr_ok = pr_value < 1.0 if pr_value is not None else True
    return pr_ok, None if pr_ok else f"Pressure Ratio {pr_value:.3f} >= 1.0"
```

### üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

**–°—Ç–∞—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (`required_confirmations: 1, pr_threshold: 0.7`):
- –°–∏–≥–Ω–∞–ª–æ–≤: 203
- Return: 40,295.24%

**–ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (`required_confirmations: 0, pr_threshold: 0.6`):
- –°–∏–≥–Ω–∞–ª–æ–≤: 133
- Return: 6,421.30%

### üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–ú–µ–Ω—å—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**: –§–∏–ª—å—Ç—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ Pressure Ratio, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –æ—Ç CDV/VD
2. **–ë–æ–ª–µ–µ –º—è–≥–∫–∏–π –ø–æ—Ä–æ–≥**: PR > 0.6 –≤–º–µ—Å—Ç–æ PR > 1.0/1.2
3. **–ë–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤**: –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –±–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è—è –±–∞–∑–æ–≤—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é

### üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

–§–∏–ª—å—Ç—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ **–º—è–≥–∫–æ–º —Ä–µ–∂–∏–º–µ** (`strict_mode=False`), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `soft_entry_signal`.

–í **—Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ** (`strict_mode=True`) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ 7 –¥–Ω—è—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è 5 –º–æ–Ω–µ—Ç
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ `backtests/order_flow_optimal_params.json`
- –§–∏–ª—å—Ç—Ä –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ü–û–°–õ–ï baseline** (–∫–∞–∫ –ø–æ–∫–∞–∑–∞–ª–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

