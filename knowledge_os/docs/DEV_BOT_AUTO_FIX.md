# üõ°Ô∏è –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: DEV –±–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

–°–∏–≥–Ω–∞–ª—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ DEV –±–æ—Ç (@piu_piu_dev_bot, —Ç–æ–∫–µ–Ω `8141444679`), –Ω–æ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –±–∏—Ä–∂–µ. DEV –±–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å **—Ç–æ–ª—å–∫–æ –≤ manual —Ä–µ–∂–∏–º–µ**.

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞:

**`signal_live.py` (—Å—Ç—Ä–æ–∫–∞ 4220):**
```python
if ATRA_ENV != "prod":
    logger.info("‚è≠Ô∏è [AUTO] %s: –æ–∫—Ä—É–∂–µ–Ω–∏–µ=%s, –∞–≤—Ç–æ-–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ", symbol, ATRA_ENV)
    return
```

**`auto_execution.py` (—Å—Ç—Ä–æ–∫–∞ 52):**
```python
if ATRA_ENV != "prod":
    logger.error("üö´ [AUTO BLOCKED] %s: –ê–í–¢–û-–ò–°–ü–û–õ–ù–ï–ù–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û! –û–∫—Ä—É–∂–µ–Ω–∏–µ=%s", symbol, ATRA_ENV)
    return False
```

### 2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ, –∫–∞–∫–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∞–≤—Ç–æ-–∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.

## üìã –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –°–ï–†–í–ï–†–ê

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é DEV –±–æ—Ç–∞

```bash
cd /root/atra
echo "=== –ü–†–û–í–ï–†–ö–ê DEV –ë–û–¢–ê ==="
echo ""
echo "1. –ü—Ä–æ–≤–µ—Ä—è–µ–º ATRA_ENV:"
grep "^ATRA_ENV" env
echo ""
echo "2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω:"
grep "^TELEGRAM_TOKEN_DEV" env
echo ""
echo "3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã:"
ps aux | grep "python.*main" | grep -v grep
```

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å ATRA_ENV –¥–ª—è DEV –±–æ—Ç–∞

**–ï—Å–ª–∏ `ATRA_ENV=prod` –¥–ª—è DEV –±–æ—Ç–∞, –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:**

```bash
cd /root/atra
# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp env env.backup

# –ú–µ–Ω—è–µ–º ATRA_ENV –Ω–∞ dev
sed -i 's/^ATRA_ENV=.*/ATRA_ENV=dev/' env

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
grep "^ATRA_ENV" env
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /root/atra
git pull origin main  # –∏–ª–∏ master, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Ç–∫–∏
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å DEV –±–æ—Ç

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEV –±–æ—Ç
pkill -f "python.*main"  # –∏–ª–∏ systemctl stop atra-dev (–µ—Å–ª–∏ –µ—Å—Ç—å —Å–µ—Ä–≤–∏—Å)

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç—å DEV –±–æ—Ç
cd /root/atra
nohup python3 main.py > logs/dev_bot.log 2>&1 &
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f logs/dev_bot.log | grep -E "AUTO|ATRA_ENV|BLOCKED"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep "python.*main" | grep -v grep
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:

1. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª** –≤ DEV –±–æ—Ç
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   üö´ [AUTO BLOCKED] SYMBOL: –ê–í–¢–û-–ò–°–ü–û–õ–ù–ï–ù–ò–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û! –û–∫—Ä—É–∂–µ–Ω–∏–µ=dev
   ```
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∏—Ä–∂—É** - –ø–æ–∑–∏—Ü–∏—è –ù–ï –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å manual —Ä–µ–∂–∏–º** - –∫–æ–º–∞–Ω–¥–∞ `/accept` –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å

## ‚ö†Ô∏è –í–ê–ñ–ù–û

- **DEV –±–æ—Ç** –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `ATRA_ENV=dev` –≤ —Ñ–∞–π–ª–µ `env`
- **PROD –±–æ—Ç** –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `ATRA_ENV=prod` –≤ —Ñ–∞–π–ª–µ `env`
- –ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—â–µ–Ω—ã –æ–±–∞ –±–æ—Ç–∞, —É –∫–∞–∂–¥–æ–≥–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–π `env` —Ñ–∞–π–ª –∏–ª–∏ —Å–≤–æ—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

## üìä –ü–†–û–í–ï–†–ö–ê –£–°–ü–ï–®–ù–û–°–¢–ò

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

‚úÖ –°–∏–≥–Ω–∞–ª—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ DEV –±–æ—Ç  
‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
‚úÖ –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ `üö´ [AUTO BLOCKED]`  
‚úÖ Manual —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç (`/accept` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é)

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π `ATRA_ENV` —á–∏—Ç–∞–µ—Ç –±–æ—Ç:
   ```bash
   cd /root/atra
   python3 -c "import os; from dotenv import load_dotenv; load_dotenv('env'); print('ATRA_ENV:', os.getenv('ATRA_ENV'))"
   ```

2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞:
   ```bash
   tail -100 logs/dev_bot.log | grep -E "AUTO CHECK|ATRA_ENV|BLOCKED"
   ```

3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω:
   ```bash
   cd /root/atra
   git log --oneline -5
   grep -A 5 "–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê" auto_execution.py
   ```

