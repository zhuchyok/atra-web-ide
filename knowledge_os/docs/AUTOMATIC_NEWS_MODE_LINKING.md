# üîó –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–ò–í–Ø–ó–ö–ê –†–ï–ñ–ò–ú–û–í –ù–û–í–û–°–¢–ï–ô

## üéØ **–ò–ó–ú–ï–ù–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´:**

### ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞:**
- **–°—Ç—Ä–æ–≥–∏–π (balanced)** ‚Üí **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (conservative)**
- **–ú—è–≥–∫–∏–π (soft)** ‚Üí **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (aggressive)**

## üîß **–ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´:**

### üìã **telegram_bot.py:**

#### üéØ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫:**
```python
# filter_mode_balanced
elif action == "filter_mode_balanced":
    user_data["filter_mode"] = "balanced"
    user_data["news_filter_mode"] = "conservative"  # ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
    save_user_data(context)
    # –°–æ–æ–±—â–µ–Ω–∏–µ: "üì∞ –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"

# filter_mode_soft
elif action == "filter_mode_soft":
    user_data["filter_mode"] = "soft"
    user_data["news_filter_mode"] = "aggressive"    # ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
    save_user_data(context)
    # –°–æ–æ–±—â–µ–Ω–∏–µ: "üì∞ –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"
```

#### üéØ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```python
# setup_filter_mode_balanced
elif action == "setup_filter_mode_balanced":
    user_data["filter_mode"] = "balanced"
    user_data["news_filter_mode"] = "conservative"  # ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò

# setup_filter_mode_soft
elif action == "setup_filter_mode_soft":
    user_data["filter_mode"] = "soft"
    user_data["news_filter_mode"] = "aggressive"    # ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
```

#### üéØ **–ö–æ–º–∞–Ω–¥—ã:**
```python
# set_filter_balanced_cmd
async def set_filter_balanced_cmd(update, context):
    user_data["filter_mode"] = "balanced"
    user_data["news_filter_mode"] = "conservative"  # ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
    # –°–æ–æ–±—â–µ–Ω–∏–µ: "üì∞ –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"

# set_filter_soft_cmd
async def set_filter_soft_cmd(update, context):
    user_data["filter_mode"] = "soft"
    user_data["news_filter_mode"] = "aggressive"    # ‚Üê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
    # –°–æ–æ–±—â–µ–Ω–∏–µ: "üì∞ –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"
```

#### üéØ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
```python
# add_user_cmd
async def add_user_cmd(update, context):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    if news_mode is None:
        if filter_mode == "balanced":
            news_mode = "conservative"
        else:
            news_mode = "aggressive"
```

### üìã **manage_users.py:**

#### üéØ **–§—É–Ω–∫—Ü–∏—è add_user:**
```python
def add_user(user_id: str, deposit: float = 1000,
             trade_mode: str = "spot", filter_mode: str = "balanced",
             news_filter_mode: str = None, base_leverage: float = 1) -> bool:

    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    if news_filter_mode is None:
        if filter_mode == "balanced":
            news_filter_mode = "conservative"
        else:
            news_filter_mode = "aggressive"
```

#### üéØ **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞:**
```python
news_mode - –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: conservative, aggressive (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —Ä–µ–∂–∏–º—É —Ñ–∏–ª—å—Ç—Ä–æ–≤)
```

## üéØ **–õ–û–ì–ò–ö–ê –ü–†–ò–í–Ø–ó–ö–ò:**

### üìä **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (balanced) ‚Üí –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (conservative):**
- ‚úÖ **–ë–ª–æ–∫–∏—Ä—É–µ—Ç SHORT** –ø—Ä–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
- ‚úÖ **–£—Å–∏–ª–∏–≤–∞–µ—Ç LONG** –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏
- ‚úÖ **–ë–ª–æ–∫–∏—Ä—É–µ—Ç spot** –ø—Ä–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
- ‚úÖ **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SHORT** –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ –ø—Ä–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
- üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üìä **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º (soft) ‚Üí –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (aggressive):**
- ‚ùå **–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç SHORT** –ø—Ä–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
- ‚úÖ **–£—Å–∏–ª–∏–≤–∞–µ—Ç LONG** –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏
- ‚ùå **–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç** –ø–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º
- ‚ùå **–ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SHORT** –ø–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º
- üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## üéØ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ô –ü–†–ò–í–Ø–ó–ö–ò:**

### ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**
- **–û–¥–∏–Ω –≤—ã–±–æ—Ä** –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
- **–õ–æ–≥–∏—á–Ω–∞—è —Å–≤—è–∑—å** –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- **–ú–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:**
- **–°—Ç—Ä–æ–≥–∏–π —Ñ–∏–ª—å—Ç—Ä** + **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏** = –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **–ú—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä** + **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏** = –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**

### ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã
- **Graceful fallback** –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**

## üîß **–û–ë–†–ê–¢–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨:**

### ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:**
```python
# –ï—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—ã–ª technical_only –∏–ª–∏ news_only:
news_mode = user_data.get('news_filter_mode', 'conservative')
mode_settings = NEWS_FILTER_MODES.get(news_mode, NEWS_FILTER_MODES['conservative'])
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∏—Ç conservative –∫–∞–∫ fallback
```

### ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- **–ù–µ—Ç –æ—à–∏–±–æ–∫** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **Graceful fallback** –Ω–∞ conservative
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**

## üìä **–ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:**

### üéØ **–ü—Ä–∏ –≤—ã–±–æ—Ä–µ "–°—Ç—Ä–æ–≥–∏–π" —Ä–µ–∂–∏–º:**
```
üéØ –°–¢–†–û–ì–ò–ô —Ä–µ–∂–∏–º —Ñ–∏–ª—å—Ç—Ä–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!

‚Ä¢ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤
‚Ä¢ –ú–µ–Ω—å—à–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤
‚Ä¢ –°–∏–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

üì∞ –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

### üéØ **–ü—Ä–∏ –≤—ã–±–æ—Ä–µ "–ú—è–≥–∫–∏–π" —Ä–µ–∂–∏–º:**
```
üéØ –ú–Ø–ì–ö–ò–ô —Ä–µ–∂–∏–º —Ñ–∏–ª—å—Ç—Ä–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!

‚Ä¢ –ë–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤
‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
‚Ä¢ –°–ª–∞–±—ã–µ —É—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

üì∞ –†–µ–∂–∏–º –Ω–æ–≤–æ—Å—Ç–µ–π: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üéØ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:**

**‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!**

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–£–ø—Ä–æ—â–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –æ–¥–∏–Ω –≤—ã–±–æ—Ä –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö
- **–õ–æ–≥–∏—á–Ω–∞—è —Å–≤—è–∑—å** –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –Ω–æ–≤–æ—Å—Ç–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

### üöÄ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**
- **–°—Ç—Ä–æ–≥–∏–π** ‚Üí **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π** (–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è)
- **–ú—è–≥–∫–∏–π** ‚Üí **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π** (–∞–∫—Ç–∏–≤–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ

---
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
**–î–∞—Ç–∞:** 2024-01-27
**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:** telegram_bot.py, manage_users.py