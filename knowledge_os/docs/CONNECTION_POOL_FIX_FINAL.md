# ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò CONNECTION_POOL

## üéØ –ü–†–û–ë–õ–ï–ú–ê

–û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∞—Ö:
```
ERROR:src.database.db:‚ùå [DB] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: cannot import name 'get_connection' from 'src.database.connection_pool'
```

## üîç –ê–ù–ê–õ–ò–ó

1. **–í `src/database/connection_pool.py`** –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ `SQLiteConnectionPool` —Å –º–µ—Ç–æ–¥–æ–º `get_connection()`, –Ω–æ –Ω–µ –±—ã–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ `get_connection()` –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è
2. **–í `src/database/__init__.py`** –±—ã–ª `get_db_pool` –≤ `__all__`, –Ω–æ –Ω–µ –±—ã–ª–æ `get_connection`
3. **–ì–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –∏–º–ø–æ—Ä—Ç `from src.database.connection_pool import get_connection`, –∫–æ—Ç–æ—Ä—ã–π –ø–∞–¥–∞–ª

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### –®–∞–≥ 1: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_connection()` –≤ `connection_pool.py`

```python
def get_connection(db_path: str = None, max_connections: int = 5):
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑ connection pool (context manager)
    """
    pool = get_db_pool(db_path, max_connections)
    return pool.get_connection()
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω `src/database/__init__.py`

–î–æ–±–∞–≤–ª–µ–Ω `get_connection` –≤ `__all__` –∏ –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢

- ‚úÖ –§—É–Ω–∫—Ü–∏—è `get_connection()` –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
- ‚úÖ –û—à–∏–±–∫–∞ `cannot import name 'get_connection'` —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

## üîß –°–¢–ê–¢–£–°

**–ò–°–ü–†–ê–í–õ–ï–ù–û:** –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞, —Ñ—É–Ω–∫—Ü–∏—è `get_connection` –¥–æ—Å—Ç—É–ø–Ω–∞.

---

**–î–∞—Ç–∞:** 2025-01-XX  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** –ö–æ–º–∞–Ω–¥–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ ATRA (21 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫)
