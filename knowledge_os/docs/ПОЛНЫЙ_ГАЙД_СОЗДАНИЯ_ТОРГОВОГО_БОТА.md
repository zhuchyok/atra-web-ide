# üöÄ –ü–û–õ–ù–´–ô –ì–ê–ô–î –°–û–ó–î–ê–ù–ò–Ø –¢–û–†–ì–û–í–û–ì–û –ë–û–¢–ê ATRA

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï
1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
4. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
6. [Telegram –±–æ—Ç](#telegram-–±–æ—Ç)
7. [–°–∏—Å—Ç–µ–º–∞ —Å–∏–≥–Ω–∞–ª–æ–≤](#—Å–∏—Å—Ç–µ–º–∞-—Å–∏–≥–Ω–∞–ª–æ–≤)
8. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
9. [API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#api-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
10. [–ó–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–∑–∞–ø—É—Å–∫-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)

---

## üéØ –û–ë–ó–û–† –°–ò–°–¢–ï–ú–´

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- **Telegram –±–æ—Ç** –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**: –ø—Ä–æ–±–æ–π, –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ä–µ–¥–Ω–µ–π, —Å–∂–∞—Ç–∏–µ –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞
- **–§–∏–ª—å—Ç—Ä—ã —Ä–∏—Å–∫–∞** –∏ –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–∏—Ç–æ–≤** –∏ –∞–Ω–∞–ª–∏–∑ –æ–±—ä–µ–º–Ω—ã—Ö –±–ª–æ–∫–æ–≤
- **–°–∏—Å—Ç–µ–º–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤** (DCA)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ SPOT –∏ —Ñ—å—é—á–µ—Ä—Å–æ–≤**

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:
- Bollinger Bands (20, 2.0)
- EMA (12, 39, 50)
- RSI (14)
- ATR (15)
- Volume analysis
- Fear & Greed Index

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
trading_bot/
‚îú‚îÄ‚îÄ main.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ telegram_bot.py        # Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ signal_live.py         # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
‚îú‚îÄ‚îÄ db.py                  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ state.py               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ exchange_api.py        # API –±–∏—Ä–∂
‚îú‚îÄ‚îÄ ohlc_utils.py          # –ü–æ–ª—É—á–µ–Ω–∏–µ OHLC –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ shared_utils.py        # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ user_utils.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ trading.db             # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ user_data.json         # –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ logs/                  # –õ–æ–≥–∏
‚îú‚îÄ‚îÄ backups/               # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îî‚îÄ‚îÄ system_cache/          # –ö—ç—à —Å–∏—Å—Ç–µ–º—ã
```

---

## ‚öôÔ∏è –£–°–¢–ê–ù–û–í–ö–ê –ò –ù–ê–°–¢–†–û–ô–ö–ê

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env
```env
# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
TELEGRAM_TOKEN=your_bot_token_here
TELEGRAM_TOKEN_DEV=your_dev_bot_token_here
TELEGRAM_CHAT_IDS=[123456789,987654321]

# API –∫–ª—é—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ETHERSCAN_API_KEY=your_etherscan_key
BSCSCAN_API_KEY=your_bscscan_key
POLYGONSCAN_API_KEY=your_polygonscan_key
ARBISCAN_API_KEY=your_arbiscan_key

# –ù–æ–≤–æ—Å—Ç–Ω—ã–µ API
CRYPTOPANIC_API_KEY=390212cf54403e087e19347f4f3e4a2f4459c79c
NEWSDATA_API_KEY=pub_9259f5b0818a4d40baabae05a908af4f
```

---

## üîß –û–°–ù–û–í–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 1. main.py - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
```python
#!/usr/bin/env python3
import asyncio
import logging
import signal
import sys

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('system.log'),
        logging.StreamHandler()
    ]
)

async def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞"""
    logger = logging.getLogger(__name__)
    logger.info("üöÄ –ó–∞–ø—É—Å–∫ —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã ATRA...")

    # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    await asyncio.gather(
        run_telegram_bot(),
        run_signals(),
        run_optimization()
    )

if __name__ == "__main__":
    asyncio.run(main())
```

### 2. config.py - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```python
import os
from dotenv import load_dotenv

load_dotenv()

# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DATABASE = "trading.db"
TELEGRAM_TOKEN = os.getenv("TELEGRAM_TOKEN")
TELEGRAM_TOKEN_DEV = os.getenv("TELEGRAM_TOKEN_DEV", "")
TELEGRAM_CHAT_IDS = os.getenv("TELEGRAM_CHAT_IDS")

# –§–∏–ª—å—Ç—Ä—ã —Ä–∏—Å–∫–∞
RISK_FILTERS = {
    "min_volume_24h": 50_000_000,
    "max_spread_pct": 2.0,
    "min_price": 0.01,
    "max_price": 100_000,
    "max_volatility_pct": 15.0,
    "min_profit_pct": 0.5,
    "max_profit_pct": 5.0,
    "enable_risk_filters": True,
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
ENHANCED_STRATEGY_CONFIG = {
    "bb_window": 20,
    "bb_std": 2.0,
    "ema_fast": 12,
    "ema_slow": 39,
    "ema_trend": 50,
    "rsi_window": 14,
    "rsi_overbought": 90,
    "rsi_oversold": 10,
    "atr_window": 15,
    "atr_multiplier_sl": 1.7,
}
```

---

## ü§ñ TELEGRAM –ë–û–¢

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `/start` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
- `/help` - –°–ø—Ä–∞–≤–∫–∞
- `/balance` - –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å
- `/deposit <amount>` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ–ø–æ–∑–∏—Ç
- `/positions` - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- `/trade_history` - –ò—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫
- `/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `/myreport` - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

### –ö–Ω–æ–ø–∫–∏:
- **–ü—Ä–∏–Ω—è—Ç—å** - –ü—Ä–∏–Ω—è—Ç—å —Å–∏–≥–Ω–∞–ª
- **–û—Ç–∫–ª–æ–Ω–∏—Ç—å** - –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª
- **–ó–∞–∫—Ä—ã—Ç—å** - –ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
- **DCA** - –î–æ–∫—É–ø–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ telegram_bot.py:
```python
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler

class TradingBot:
    def __init__(self):
        self.app = Application.builder().token(TOKEN).build()
        self.setup_handlers()

    def setup_handlers(self):
        """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥"""
        self.app.add_handler(CommandHandler("start", self.start_command))
        self.app.add_handler(CommandHandler("balance", self.balance_command))
        self.app.add_handler(CommandHandler("deposit", self.deposit_command))
        self.app.add_handler(CallbackQueryHandler(self.button_handler))

    async def start_command(self, update: Update, context):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start"""
        keyboard = [
            [InlineKeyboardButton("üí∞ –ë–∞–ª–∞–Ω—Å", callback_data="balance")],
            [InlineKeyboardButton("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", callback_data="settings")],
            [InlineKeyboardButton("üìä –û—Ç—á–µ—Ç", callback_data="report")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)

        await update.message.reply_text(
            "üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Ç–æ—Ä–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É ATRA!\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup=reply_markup
        )
```

---

## üìä –°–ò–°–¢–ï–ú–ê –°–ò–ì–ù–ê–õ–û–í

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

#### 1. –ü—Ä–æ–±–æ–π –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞
```python
def breakout_strategy(df):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø—Ä–æ–±–æ—è –ø–æ–ª–æ—Å –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞"""
    bb_upper = df['bb_upper'].iloc[-1]
    bb_lower = df['bb_lower'].iloc[-1]
    close = df['close'].iloc[-1]

    # LONG —Å–∏–≥–Ω–∞–ª
    if close > bb_upper and df['volume'].iloc[-1] > df['volume'].rolling(20).mean().iloc[-1]:
        return "LONG"

    # SHORT —Å–∏–≥–Ω–∞–ª
    if close < bb_lower and df['volume'].iloc[-1] > df['volume'].rolling(20).mean().iloc[-1]:
        return "SHORT"

    return None
```

#### 2. –í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ä–µ–¥–Ω–µ–π
```python
def mean_reversion_strategy(df):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å—Ä–µ–¥–Ω–µ–π"""
    bb_middle = df['bb_middle'].iloc[-1]
    close = df['close'].iloc[-1]
    rsi = df['rsi'].iloc[-1]

    # LONG —Å–∏–≥–Ω–∞–ª
    if close < bb_middle and rsi < 30:
        return "LONG"

    # SHORT —Å–∏–≥–Ω–∞–ª
    if close > bb_middle and rsi > 70:
        return "SHORT"

    return None
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:
```python
async def generate_signals():
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤"""
    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç
    symbols = await get_filtered_top_usdt_pairs()

    signals = []
    for symbol in symbols:
        # –ü–æ–ª—É—á–∞–µ–º OHLC –¥–∞–Ω–Ω—ã–µ
        ohlc_data = await get_ohlc_data(symbol)
        df = create_dataframe(ohlc_data)

        # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
        df = add_indicators(df)

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
        signal = check_strategies(df, symbol)
        if signal:
            signals.append(signal)

    return signals
```

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ SQLite:
```sql
-- –¢–∞–±–ª–∏—Ü–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
CREATE TABLE signals (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    ts TEXT,
    symbol TEXT,
    signal_type TEXT,
    entry_price REAL,
    tp1 REAL,
    tp2 REAL,
    sl REAL,
    status TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞ —Å–¥–µ–ª–æ–∫
CREATE TABLE trades (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    signal_id INTEGER,
    user_id INTEGER,
    symbol TEXT,
    side TEXT,
    entry_price REAL,
    exit_price REAL,
    quantity REAL,
    profit REAL,
    status TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE TABLE users (
    id INTEGER PRIMARY KEY,
    username TEXT,
    deposit REAL DEFAULT 0,
    balance REAL DEFAULT 0,
    settings TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### –ö–ª–∞—Å—Å Database:
```python
class Database:
    def __init__(self, db_path="trading.db"):
        self.conn = sqlite3.connect(db_path)
        self.cursor = self.conn.cursor()
        self.init_tables()

    def init_tables(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü"""
        self.cursor.execute("""
            CREATE TABLE IF NOT EXISTS signals (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                ts TEXT,
                symbol TEXT,
                signal_type TEXT,
                entry_price REAL,
                tp1 REAL,
                tp2 REAL,
                sl REAL,
                status TEXT,
                created_at DATETIME DEFAULT CURRENT_TIMESTAMP
            )
        """)
        self.conn.commit()

    def save_signal(self, signal_data):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞"""
        self.cursor.execute("""
            INSERT INTO signals (ts, symbol, signal_type, entry_price, tp1, tp2, sl, status)
            VALUES (?, ?, ?, ?, ?, ?, ?, ?)
        """, (
            signal_data['timestamp'],
            signal_data['symbol'],
            signal_data['type'],
            signal_data['entry_price'],
            signal_data['tp1'],
            signal_data['tp2'],
            signal_data['sl'],
            'active'
        ))
        self.conn.commit()
```

---

## üîå API –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### 1. Binance API
```python
class BinanceAPI:
    BASE_URL = "https://api.binance.com"

    @staticmethod
    async def get_ohlc(symbol, interval="1h", limit=300):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ OHLC –¥–∞–Ω–Ω—ã—Ö"""
        url = f"{BinanceAPI.BASE_URL}/api/v3/klines"
        params = {
            "symbol": symbol,
            "interval": interval,
            "limit": limit
        }

        async with aiohttp.ClientSession() as session:
            async with session.get(url, params=params) as response:
                data = await response.json()
                return [
                    {
                        "timestamp": int(item[0]),
                        "open": float(item[1]),
                        "high": float(item[2]),
                        "low": float(item[3]),
                        "close": float(item[4]),
                        "volume": float(item[5])
                    }
                    for item in data
                ]

    @staticmethod
    async def get_prices(symbols):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö —Ü–µ–Ω"""
        url = f"{BinanceAPI.BASE_URL}/api/v3/ticker/bookTicker"

        async with aiohttp.ClientSession() as session:
            async with session.get(url) as response:
                data = await response.json()
                return {item["symbol"]: float(item["bidPrice"]) for item in data}
```

### 2. –ù–æ–≤–æ—Å—Ç–Ω—ã–µ API
```python
class NewsAPI:
    def __init__(self):
        self.cryptopanic_key = os.getenv("CRYPTOPANIC_API_KEY")
        self.newsdata_key = os.getenv("NEWSDATA_API_KEY")

    async def get_crypto_news(self, symbol):
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–µ"""
        url = f"https://cryptopanic.com/api/v1/posts/"
        params = {
            "auth_token": self.cryptopanic_key,
            "currencies": symbol.replace("USDT", ""),
            "filter": "hot"
        }

        async with aiohttp.ClientSession() as session:
            async with session.get(url, params=params) as response:
                data = await response.json()
                return data.get("results", [])
```

---

## üöÄ –ó–ê–ü–£–°–ö –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì

### 1. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
source venv/bin/activate

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python main.py
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f system.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" system.log

# –ü–æ–∏—Å–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
grep "SIGNAL" system.log
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞
sudo nano /etc/systemd/system/trading-bot.service

[Unit]
Description=Trading Bot ATRA
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/trading_bot
Environment=PATH=/path/to/trading_bot/venv/bin
ExecStart=/path/to/trading_bot/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl enable trading-bot
sudo systemctl start trading-bot
sudo systemctl status trading-bot
```

---

## üìà –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ò –ù–ê–°–¢–†–û–ô–ö–ê

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```python
# –í config.py
ENHANCED_STRATEGY_CONFIG = {
    # –î–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
    "rsi_overbought": 85,  # –ë—ã–ª–æ 90
    "rsi_oversold": 15,    # –ë—ã–ª–æ 10

    # –î–ª—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
    "rsi_overbought": 95,  # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π
    "rsi_oversold": 5,     # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π
}
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞
```python
RISK_FILTERS = {
    "min_volume_24h": 100_000_000,  # –£–≤–µ–ª–∏—á–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º
    "max_volatility_pct": 10.0,     # –£–º–µ–Ω—å—à–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
    "min_profit_pct": 1.0,          # –£–≤–µ–ª–∏—á–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å
}
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
```python
# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ:
# - –í–∏–Ω—Ä–µ–π—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–¥–µ–ª–æ–∫
# - –°—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å
# - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
# - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤
```

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### 1. –ó–∞—â–∏—Ç–∞ API –∫–ª—é—á–µ–π
- –í—Å–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env —Ñ–∞–π–ª–µ
- .env –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
```python
def validate_signal(signal_data):
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞"""
    required_fields = ['symbol', 'type', 'entry_price', 'tp1', 'sl']

    for field in required_fields:
        if field not in signal_data:
            raise ValueError(f"–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ: {field}")

    if signal_data['entry_price'] <= 0:
        raise ValueError("–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π")

    return True
```

### 3. –õ–∏–º–∏—Ç—ã —Ä–∏—Å–∫–∞
```python
GLOBAL_RISK_LIMIT_PCT = 30  # –ú–∞–∫—Å–∏–º—É–º 30% –¥–µ–ø–æ–∑–∏—Ç–∞ –≤ –ø–æ–∑–∏—Ü–∏—è—Ö
MAX_POSITIONS_PER_SYMBOL = 1
MAX_DAILY_TRADES = 10
```

---

## üìä –ê–ù–ê–õ–ò–¢–ò–ö–ê –ò –û–¢–ß–ï–¢–´

### 1. –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
```python
async def generate_daily_report():
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞"""
    today = datetime.now().strftime("%Y-%m-%d")

    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
    signals_count = db.get_signals_count(today)
    signals_profit = db.get_signals_profit(today)

    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫
    trades_count = db.get_trades_count(today)
    trades_profit = db.get_trades_profit(today)

    report = f"""
üìä –ï–ñ–ï–î–ù–ï–í–ù–´–ô –û–¢–ß–ï–¢ {today}

üìà –°–ò–ì–ù–ê–õ–´:
‚Ä¢ –í—Å–µ–≥–æ: {signals_count}
‚Ä¢ –ü—Ä–∏–±—ã–ª—å: {signals_profit:.2f} USDT

üí∞ –°–î–ï–õ–ö–ò:
‚Ä¢ –í—Å–µ–≥–æ: {trades_count}
‚Ä¢ –ü—Ä–∏–±—ã–ª—å: {trades_profit:.2f} USDT

üìä –û–ë–©–ê–Ø –ü–†–ò–ë–´–õ–¨: {signals_profit + trades_profit:.2f} USDT
    """

    return report
```

### 2. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```python
def analyze_performance():
    """–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã"""
    # –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤
    # –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–æ–≤
    pass
```

---

## üõ†Ô∏è –£–°–¢–†–ê–ù–ï–ù–ò–ï –ù–ï–ü–û–õ–ê–î–û–ö

### 1. –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
curl "https://api.telegram.org/bot<YOUR_TOKEN>/getMe"

# –û—á–∏—Å—Ç–∫–∞ webhook
curl "https://api.telegram.org/bot<YOUR_TOKEN>/deleteWebhook"
```

#### –û—à–∏–±–∫–∏ API –±–∏—Ä–∂
```python
# –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É
async def get_ohlc_with_retry(symbol, max_retries=3):
    for attempt in range(max_retries):
        try:
            return await get_ohlc(symbol)
        except Exception as e:
            if attempt == max_retries - 1:
                raise e
            await asyncio.sleep(2 ** attempt)
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
sqlite3 trading.db "PRAGMA integrity_check;"

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
sqlite3 trading.db ".backup backup_$(date +%Y%m%d_%H%M%S).db"
```

### 2. –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
```python
# –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    level=logging.DEBUG,
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª
logging.FileHandler('debug.log')
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### 1. –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏
- [Telegram Bot API](https://core.telegram.org/bots/api)
- [Binance API](https://binance-docs.github.io/apidocs/spot/en/)
- [Technical Analysis Library](https://technical-analysis-library-in-python.readthedocs.io/)

### 2. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–Ω–∏–≥–∏
- "Technical Analysis of the Financial Markets" - John J. Murphy
- "Building Algorithmic Trading Systems" - Kevin J. Davey
- "Python for Finance" - Yves Hilpisch

### 3. –°–æ–æ–±—â–µ—Å—Ç–≤–∞
- Telegram –∫–∞–Ω–∞–ª—ã –ø–æ –∫—Ä–∏–ø—Ç–æ—Ç—Ä–µ–π–¥–∏–Ω–≥—É
- Reddit r/algotrading
- Stack Overflow –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–≠—Ç–æ—Ç –≥–∞–π–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å –Ω—É–ª—è. –°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:

‚úÖ **–ü–æ–ª–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** —Å –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
‚úÖ **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏** —Ç–æ—Ä–≥–æ–≤–ª–∏
‚úÖ **–°–∏—Å—Ç–µ–º—É —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞**
‚úÖ **–ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚úÖ **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å –±–∏—Ä–∂–∞–º–∏
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é**
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–æ –ø–æ—Ä—è–¥–∫—É, –Ω–∞—á–∏–Ω–∞—è —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

**–£–¥–∞—á–∏ –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ! üöÄüìà**
