# üîí –û–¢–ß–ï–¢: –í–ù–ï–î–†–ï–ù–ò–ï HTTPS –î–õ–Ø REST API

**–î–∞—Ç–∞:** 2025-11-05  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –û–±–Ω–æ–≤–ª–µ–Ω `rest_api.py`

#### **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä `use_https` –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö `run_rest_api()` –∏ `run_rest_api_async()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- Fallback –Ω–∞ HTTP –µ—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

#### **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SSL:**
- –ü—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  - `SSL_KEYFILE` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `ssl/key.pem`)
  - `SSL_CERTFILE` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `ssl/cert.pem`)

### 2. –û–±–Ω–æ–≤–ª–µ–Ω `main.py`

#### **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS —á–µ—Ä–µ–∑ env:**
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `USE_HTTPS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `false`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### 3. –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### **`scripts/generate_self_signed_ssl.sh`:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (4096-bit RSA)
- –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 365 –¥–Ω–µ–π
- –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `ssl/` —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

---

## üìã –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (self-signed):

```bash
# 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
chmod +x scripts/generate_self_signed_ssl.sh
./scripts/generate_self_signed_ssl.sh

# 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export USE_HTTPS=true

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
python3 main.py
```

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (Let's Encrypt):

```bash
# 1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º certbot (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
# sudo apt-get install certbot

# 2. –ü–æ–ª—É—á–∞–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot certonly --standalone -d your-domain.com

# 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export SSL_KEYFILE=/etc/letsencrypt/live/your-domain.com/privkey.pem
export SSL_CERTFILE=/etc/letsencrypt/live/your-domain.com/fullchain.pem
export USE_HTTPS=true

# 4. –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
python3 main.py
```

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –í–∫–ª—é—á–∏—Ç—å HTTPS
USE_HTTPS=true

# –ü—É—Ç–∏ –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SSL_KEYFILE=ssl/key.pem
SSL_CERTFILE=ssl/cert.pem
```

### –í —Ñ–∞–π–ª–µ `env`:

```bash
USE_HTTPS=true
SSL_KEYFILE=ssl/key.pem
SSL_CERTFILE=ssl/cert.pem
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

1. **Self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã:**
   - –ë—Ä–∞—É–∑–µ—Ä—ã –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
   - –ü–æ–¥—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:**
   - Let's Encrypt: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ certbot
   - Self-signed: –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –•—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
   - –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á–∏ –≤ git
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (600)

---

## üìä –°–¢–ê–¢–£–°

- ‚úÖ HTTPS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚úÖ Self-signed –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å main.py –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

