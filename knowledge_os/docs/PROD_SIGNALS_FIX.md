# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü–æ—á–µ–º—É —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –∏–¥—É—Ç –≤ PROD

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–°–∏–≥–Ω–∞–ª—ã –∏–¥—É—Ç –≤ **DEV**, –Ω–æ –Ω–µ –∏–¥—É—Ç –≤ **PROD**.

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (prod) –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `ATRA_ENV=prod`, –ø–æ—ç—Ç–æ–º—É —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DEV —Ç–æ–∫–µ–Ω –≤–º–µ—Å—Ç–æ PROD —Ç–æ–∫–µ–Ω–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
ssh root@185.177.216.15
cd /path/to/atra
cat env | grep ATRA_ENV
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PROD –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç 1: –í —Ñ–∞–π–ª–µ env (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/atra
nano env
# –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
ATRA_ENV=prod
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X)
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ export**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
export ATRA_ENV=prod
# –î–æ–±–∞–≤—å—Ç–µ –≤ ~/.bashrc –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–∞:
echo 'export ATRA_ENV=prod' >> ~/.bashrc
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

```bash
# PROD —Ç–æ–∫–µ–Ω (–æ—Å–Ω–æ–≤–Ω–æ–π)
TELEGRAM_TOKEN=PROD_TOKEN_REDACTED

# DEV —Ç–æ–∫–µ–Ω (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
TELEGRAM_TOKEN_DEV=DEV_TOKEN_REDACTED

# Chat IDs (–≤–∞—à–∏ ID)
TELEGRAM_CHAT_IDS=556251171,958930260
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /path/to/atra
python3 scripts/check_environment.py
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
```
üìä –û–∫—Ä—É–∂–µ–Ω–∏–µ: PROD
   ‚úÖ PROD —Ä–µ–∂–∏–º - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TELEGRAM_TOKEN
üéØ –ê–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–∫–µ–Ω: TELEGRAM_TOKEN (PROD)
```

### 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `ATRA_ENV` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
systemctl stop atra  # –∏–ª–∏ –≤–∞—à —Å–ø–æ—Å–æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
systemctl start atra  # –∏–ª–∏ –≤–∞—à —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
systemctl status atra
```

## üìä –õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–æ–∫–µ–Ω–∞

–í `config.py`:

```python
ATRA_ENV = os.getenv("ATRA_ENV", "dev").lower().strip()

# prod -> TELEGRAM_TOKEN, –∏–Ω–∞—á–µ -> TELEGRAM_TOKEN_DEV
TOKEN = (
    TELEGRAM_TOKEN if ATRA_ENV == "prod" else (
        TELEGRAM_TOKEN_DEV or TELEGRAM_TOKEN
    )
)
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ `ATRA_ENV=prod` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `TELEGRAM_TOKEN` (PROD —Ç–æ–∫–µ–Ω)
- –ï—Å–ª–∏ `ATRA_ENV=dev` –∏–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `TELEGRAM_TOKEN_DEV` (DEV —Ç–æ–∫–µ–Ω)

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   echo $ATRA_ENV
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: prod
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª env:**
   ```bash
   grep ATRA_ENV env
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ATRA_ENV=prod
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã:**
   ```bash
   grep TELEGRAM_TOKEN env
   # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±–∞ —Ç–æ–∫–µ–Ω–∞
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -f logs/system.log | grep -i "telegram\|signal\|token"
   ```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   ```bash
   python3 scripts/check_environment.py
   ```

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/atra

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PROD –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤ env —Ñ–∞–π–ª–µ
sed -i 's/ATRA_ENV=dev/ATRA_ENV=prod/' env

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ
grep ATRA_ENV env

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
systemctl restart atra  # –∏–ª–∏ –≤–∞—à —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -f logs/system.log
```

## üéØ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ `ATRA_ENV=dev` –≤–º–µ—Å—Ç–æ `ATRA_ENV=prod`

**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `ATRA_ENV=prod` –≤ —Ñ–∞–π–ª–µ `env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python3 scripts/check_environment.py` - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å `–û–∫—Ä—É–∂–µ–Ω–∏–µ: PROD`

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-13  
**–ê–≤—Ç–æ—Ä:** ATRA Team

