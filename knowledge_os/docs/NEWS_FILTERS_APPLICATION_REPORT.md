# üì∞ –ö–û–ì–î–ê –ü–†–ò–ú–ï–ù–Ø–Æ–¢–°–Ø –ù–û–í–û–°–¢–ù–´–ï –§–ò–õ–¨–¢–†–´

## üéØ –û–¢–í–ï–¢ –ù–ê –í–û–ü–†–û–°

**–ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –í–°–ï–ì–î–ê**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ñ–ª–∞–≥–∞ `NEWS_FILTER_ACTIVE`. –≠—Ç–æ—Ç —Ñ–ª–∞–≥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ `config.py`, –Ω–æ **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø** –≤ –∫–æ–¥–µ.

## üîç –ê–ù–ê–õ–ò–ó –ö–û–î–ê

### ‚ùå –§–ª–∞–≥ `NEWS_FILTER_ACTIVE` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```python
# config.py
NEWS_FILTER_ACTIVE = False  # –≠—Ç–æ—Ç —Ñ–ª–∞–≥ –ù–ï –ü–†–û–í–ï–†–Ø–ï–¢–°–Ø –≤ –∫–æ–¥–µ
```

### ‚úÖ –ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ–≥–¥–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `check_and_send_signals` (—Å—Ç—Ä–æ–∫–∏ 2355-2388) –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã **–í–°–ï–ì–î–ê** –≤—ã–∑—ã–≤–∞—é—Ç—Å—è:

```python
# --- –§–∏–ª—å—Ç—Ä –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º ---
news_blocked, block_until, news_post = await is_negative_news(symbol)

# --- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π ---
positive_news_found, positive_news_post = await is_positive_news(symbol)
```

## üìã –ö–û–ì–î–ê –ü–†–ò–ú–ï–ù–Ø–Æ–¢–°–Ø –§–ò–õ–¨–¢–†–´

### 1. **–ü—Ä–∏ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–∏–≥–Ω–∞–ª–æ–≤**
- –ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –¥–ª—è **–∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã** –≤ —Ü–∏–∫–ª–µ
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å** –∫ 9 –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –Ω–æ–≤–æ—Å—Ç–µ–π
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 —á–∞—Å

### 2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**
–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```python
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∂–∏–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if news_blocked is True:
    for user_id, user_data in user_data_dict.items():
        news_mode = user_data.get('news_filter_mode', 'conservative')
        mode_settings = NEWS_FILTER_MODES.get(news_mode, NEWS_FILTER_MODES['conservative'])
        trade_mode = user_data.get('trade_mode', 'spot')
```

### 3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤**
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ª–∏ SHORT —Å–∏–≥–Ω–∞–ª –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏
if signal_type == "SHORT" and positive_news_flag and mode_settings['block_short_on_positive']:
    print(f"[DEBUG] SHORT —Å–∏–≥–Ω–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏")
    signal_type = None  # –û—Ç–º–µ–Ω—è–µ–º —Å–∏–≥–Ω–∞–ª

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤–æ—Å—Ç–Ω–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞
if signal_type == "LONG" and positive_news_flag and mode_settings['enable_positive_news']:
    has_news_enhancement = True
    print(f"[DEBUG] LONG —Å–∏–≥–Ω–∞–ª —É—Å–∏–ª–µ–Ω –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏")
```

## üéØ –†–ï–ñ–ò–ú–´ –§–ò–õ–¨–¢–†–ê–¶–ò–ò

### Conservative —Ä–µ–∂–∏–º (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π)
```python
"conservative": {
    "enable_negative_news": True,    # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º
    "enable_positive_news": True,    # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å LONG –ø–æ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º
    "block_short_on_positive": True, # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å SHORT –ø—Ä–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö
}
```

### Aggressive —Ä–µ–∂–∏–º (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π)
```python
"aggressive": {
    "enable_negative_news": False,   # –ù–ï –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º
    "enable_positive_news": True,    # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å LONG –ø–æ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º
    "block_short_on_positive": False, # –ù–ï –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å SHORT –ø—Ä–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö
}
```

## üìä –õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´

### –î–ª—è SPOT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **Conservative**: –ë–ª–æ–∫–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
- **Aggressive**: –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏

### –î–ª—è FUTURES –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏**: –í–°–ï–ì–î–ê —É—Å–∏–ª–∏–≤–∞—é—Ç SHORT —Å–∏–≥–Ω–∞–ª—ã
- **–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏**: –£—Å–∏–ª–∏–≤–∞—é—Ç LONG —Å–∏–≥–Ω–∞–ª—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–∏–∫–∏:
```python
if trade_mode == 'futures':
    # –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ñ—å—é—á–µ—Ä—Å–∞–º–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –í–°–ï–ì–î–ê —É—Å–∏–ª–∏–≤–∞—é—Ç SHORT —Å–∏–≥–Ω–∞–ª—ã
    negative_news_flag = True
elif mode_settings['enable_negative_news']:
    # –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ spot - –±–ª–æ–∫–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω —Ä–µ–∂–∏–º
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–≥–Ω–∞–ª
```

## ‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å:
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** –∫ 9 –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ 1 —á–∞—Å
- **–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è** –Ω–æ–≤–æ—Å—Ç–µ–π
- **Fallback** –Ω–∞ CoinGecko –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```
[DEBUG] –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–Ω–µ—Ç—ã: BTCUSDT
[DEBUG] BTCUSDT: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å - –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π LONG —Å–∏–≥–Ω–∞–ª
[DEBUG] BTCUSDT: LONG —Å–∏–≥–Ω–∞–ª —É—Å–∏–ª–µ–Ω –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–º–∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 123456789
```

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ñ–ª–∞–≥**
–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `NEWS_FILTER_ACTIVE` –≤ –∫–æ–¥:

```python
# –í –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ check_and_send_signals
if not NEWS_FILTER_ACTIVE:
    print("[DEBUG] –ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –æ—Ç–∫–ª—é—á–µ–Ω—ã")
    # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–æ–≤–æ—Å—Ç–µ–π
    return
```

### 2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- –£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å API –ª–∏–º–∏—Ç—ã
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ù–æ–≤–æ—Å—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –í–°–ï–ì–î–ê** –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É —Å–∏–≥–Ω–∞–ª—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ, —É—á–∏—Ç—ã–≤–∞—è:
- –†–µ–∂–∏–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (conservative/aggressive)
- –†–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏ (spot/futures)
- –ù–∞–ª–∏—á–∏–µ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö/–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ —É—Å–∏–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

–§–ª–∞–≥ `NEWS_FILTER_ACTIVE = False` –≤ `config.py` **–ù–ï –†–ê–ë–û–¢–ê–ï–¢** –∏ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.