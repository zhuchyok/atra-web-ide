# üìä –ê–ù–ê–õ–ò–ó: –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ SL –ø–æ –º–µ—Ä–µ –¥–≤–∏–∂–µ–Ω–∏—è –∫ TP1

## üéØ –í–û–ü–†–û–°
–°—Ç–æ–∏—Ç –ª–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å —Å—Ç–æ–ø-–ª–æ—Å—Å (SL) –ø–æ –º–µ—Ä–µ –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã –∫ TP1, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —É–±—ã—Ç–æ–∫?

## üìã –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

### –ß—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å:
1. **Trailing Stop Manager** - —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
   - –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ +1% –ø—Ä–∏–±—ã–ª–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ATR –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
   - –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç SL —Ç–æ–ª—å–∫–æ –≤–≤–µ—Ä—Ö (–¥–ª—è LONG), –Ω–µ —É—Ö—É–¥—à–∞–µ—Ç

2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–Ω–æ—Å –≤ –±–µ–∑—É–±—ã—Ç–æ–∫ –ø–æ—Å–ª–µ TP1**
   - –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP1 SL –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –≤ –±–µ–∑—É–±—ã—Ç–æ–∫
   - –£—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ (0.2%)

### –ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:
- –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ SL **–¥–æ** –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP1
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è SL –ø–æ –º–µ—Ä–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è –∫ TP1

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è SL –∫ TP1

### 1. **–°–Ω–∏–∂–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É–±—ã—Ç–∫–∞**
```
–ü—Ä–∏–º–µ—Ä:
- –í—Ö–æ–¥: 100 USDT
- –ù–∞—á–∞–ª—å–Ω—ã–π SL: 98 USDT (-2%)
- TP1: 102.75 USDT (+2.75%)

–ï—Å–ª–∏ —Ü–µ–Ω–∞ –¥–≤–∏–∂–µ—Ç—Å—è –∫ TP1:
- –ü—Ä–∏ 101 USDT (+1%): SL –º–æ–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å –¥–æ 99.5 USDT (-0.5%)
- –ü—Ä–∏ 101.5 USDT (+1.5%): SL –º–æ–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å –¥–æ 100 USDT (–±–µ–∑—É–±—ã—Ç–æ–∫)
- –ü—Ä–∏ 102 USDT (+2%): SL –º–æ–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É—Ç—å –¥–æ 100.5 USDT (+0.5%)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–º–µ—Å—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ —É–±—ã—Ç–∫–∞ -2% –ø–æ–ª—É—á–∞–µ–º –∑–∞—â–∏—Ç—É –ø—Ä–∏–±—ã–ª–∏

### 2. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤**
- –ï—Å–ª–∏ —Ü–µ–Ω–∞ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç—Å—è –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP1, —É–±—ã—Ç–æ–∫ –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ
- –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤

### 3. **–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–æ–º—Ñ–æ—Ä—Ç**
- –¢—Ä–µ–π–¥–µ—Ä –≤–∏–¥–∏—Ç, —á—Ç–æ —Ä–∏—Å–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
- –ú–µ–Ω—å—à–µ —Å—Ç—Ä–µ—Å—Å–∞ –ø—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–∏

---

## ‚ùå –ù–ï–î–û–°–¢–ê–¢–ö–ò –∏ –†–ò–°–ö–ò

### 1. **–ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏**
```
–ü—Ä–æ–±–ª–µ–º–∞:
- –¶–µ–Ω–∞ –¥–≤–∏–∂–µ—Ç—Å—è –∫ TP1: 100 ‚Üí 101.5 USDT
- SL –ø–æ–¥—Ç—è–Ω—É—Ç –¥–æ 100.5 USDT
- –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–æ 100.8 USDT (–Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
- ‚ùå –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ SL, —Ö–æ—Ç—è —Ç—Ä–µ–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–ø—É—â–µ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –∏–∑-–∑–∞ —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ–≥–æ SL

### 2. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π**
- –ë–æ–ª–µ–µ —á–∞—Å—Ç—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ SL
- –°–Ω–∏–∂–µ–Ω–∏–µ Win Rate
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π

### 3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è**
- –°–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ ‚Üí –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- –°–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ ‚Üí –Ω–µ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
- –ù—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞

### 4. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π**
- –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å trailing stop (–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ +1%)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞–º

---

## üîç –ê–ù–ê–õ–ò–ó: –ö–û–ì–î–ê –≠–¢–û –ò–ú–ï–ï–¢ –°–ú–´–°–õ

### ‚úÖ **–°—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏:**

1. **–í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–∞**
   - –ë–æ–ª—å—à–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è ‚Üí –Ω—É–∂–Ω–∞ –∑–∞—â–∏—Ç–∞
   - –ü—Ä–∏–º–µ—Ä: –∞–ª—å—Ç–∫–æ–∏–Ω—ã, –º–µ–º–∫–æ–∏–Ω—ã

2. **–°–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥**
   - –ù–µ—É–≤–µ—Ä–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ TP1
   - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

3. **–ë–æ–ª—å—à–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ TP1**
   - TP1 > 3% –æ—Ç –≤—Ö–æ–¥–∞
   - –ï—Å—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –º–∞–Ω–µ–≤—Ä–∞

4. **–ù–∏–∑–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å**
   - –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤
   - –ù—É–∂–Ω–∞ —Ä–∞–Ω–Ω—è—è –∑–∞—â–∏—Ç–∞

### ‚ùå **–ù–ï —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –µ—Å–ª–∏:**

1. **–°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥**
   - –£–≤–µ—Ä–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ TP1
   - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

2. **–ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**
   - –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
   - –ú–∞–ª–æ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

3. **–ë–ª–∏–∑–∫–∏–π TP1**
   - TP1 < 2% –æ—Ç –≤—Ö–æ–¥–∞
   - –ú–∞–ª–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –¥–ª—è –º–∞–Ω–µ–≤—Ä–∞

4. **–í—ã—Å–æ–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å**
   - –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
   - –ú–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üí° –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø –°–¢–†–ê–¢–ï–ì–ò–Ø

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π (–¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤)**

```python
# –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ SL –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–≤–∏–∂–µ–Ω–∏—é –∫ TP1
progress_to_tp1 = (current_price - entry_price) / (tp1_price - entry_price)

if progress_to_tp1 > 0.3:  # –ü—Ä–æ—à–ª–∏ 30% –ø—É—Ç–∏ –∫ TP1
    # SL –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ 50% –æ—Ç –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
    sl_progress = progress_to_tp1 * 0.5
    new_sl = entry_price + (tp1_price - entry_price) * sl_progress
    # –ù–æ –Ω–µ –±–ª–∏–∂–µ —á–µ–º ATR * 1.5
    min_distance = atr * 1.5
    new_sl = max(new_sl, current_price - min_distance)
```

**–ü–ª—é—Å—ã:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞  
**–ú–∏–Ω—É—Å—ã:** –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π

---

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```python
# –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ SL —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
progress_to_tp1 = (current_price - entry_price) / (tp1_price - entry_price)

if progress_to_tp1 > 0.5:  # –ü—Ä–æ—à–ª–∏ 50% –ø—É—Ç–∏ –∫ TP1
    # SL –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ 30% –æ—Ç –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
    sl_progress = progress_to_tp1 * 0.3
    new_sl = entry_price + (tp1_price - entry_price) * sl_progress
    # –ú–∏–Ω–∏–º—É–º - –±–µ–∑—É–±—ã—Ç–æ–∫
    breakeven = entry_price * 1.002  # –° —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π
    new_sl = max(new_sl, breakeven)
    # –ù–æ –Ω–µ –±–ª–∏–∂–µ —á–µ–º ATR * 2.0
    min_distance = atr * 2.0
    new_sl = max(new_sl, current_price - min_distance)
```

**–ü–ª—é—Å—ã:** –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∑–∞—â–∏—Ç–æ–π –∏ —É–ø—É—â–µ–Ω–Ω–æ–π –ø—Ä–∏–±—ã–ª—å—é  
**–ú–∏–Ω—É—Å—ã:** –ú–µ–Ω—å—à–∞—è –∑–∞—â–∏—Ç–∞ –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö

---

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π)**

```python
# –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏ —Ç—Ä–µ–Ω–¥
atr_pct = (atr / current_price) * 100
trend_strength = calculate_trend_strength(df, current_index)

progress_to_tp1 = (current_price - entry_price) / (tp1_price - entry_price)

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR
if atr_pct > 3.0:  # –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
    min_distance_multiplier = 2.5
elif atr_pct < 1.5:  # –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
    min_distance_multiplier = 1.5
else:
    min_distance_multiplier = 2.0

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
if progress_to_tp1 > 0.4:  # 40% –ø—É—Ç–∏ –∫ TP1
    # –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É
    sl_progress = progress_to_tp1 * 0.4
    new_sl = entry_price + (tp1_price - entry_price) * sl_progress
    
    # –ú–∏–Ω–∏–º—É–º - –±–µ–∑—É–±—ã—Ç–æ–∫
    breakeven = entry_price * 1.002
    new_sl = max(new_sl, breakeven)
    
    # –ù–æ –Ω–µ –±–ª–∏–∂–µ —á–µ–º ATR * multiplier
    min_distance = atr * min_distance_multiplier
    new_sl = max(new_sl, current_price - min_distance)
```

**–ü–ª—é—Å—ã:** –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è  
**–ú–∏–Ω—É—Å—ã:** –°–ª–æ–∂–Ω–µ–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –° –¢–ï–ö–£–©–ò–ú TRAILING STOP

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–∫—É—â–∏–π Trailing Stop | –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∫ TP1 |
|----------|----------------------|-------------------|
| **–ê–∫—Ç–∏–≤–∞—Ü–∏—è** | –ü—Ä–∏ +1% –ø—Ä–∏–±—ã–ª–∏ | –ü—Ä–∏ 30-50% –ø—É—Ç–∏ –∫ TP1 |
| **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ** | ATR * 1.5-2.0 | –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É |
| **–ó–∞—â–∏—Ç–∞** | –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ | –° —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–æ–≤ |
| **–†–∏—Å–∫ –∑–∞–∫—Ä—ã—Ç–∏–π** | –ù–∏–∑–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π-–≤—ã—Å–æ–∫–∏–π |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –ü—Ä–æ—Å—Ç–∞—è | –°—Ä–µ–¥–Ω—è—è |

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### **–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –í–ù–ï–î–†–ò–¢–¨, –ù–û –û–°–¢–û–†–û–ñ–ù–û**

#### **–≠—Ç–∞–ø 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –Ω–µ–¥–µ–ª–∏)**
1. –í–Ω–µ–¥—Ä–∏—Ç—å **–í–∞—Ä–∏–∞–Ω—Ç 2 (–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π)** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤ (ATR > 2%)
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å:
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ Win Rate
   - –°—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ vs —Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å

#### **–≠—Ç–∞–ø 2: –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤**
- –ï—Å–ª–∏ Win Rate –Ω–µ —Å–Ω–∏–∑–∏–ª—Å—è ‚Üí –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å
- –ï—Å–ª–∏ –º–Ω–æ–≥–æ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π ‚Üí –æ—Å–ª–∞–±–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –∫ –í–∞—Ä–∏–∞–Ω—Ç—É 3 (–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π)

#### **–≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥ –∫–∞–∂–¥—ã–π –∞–∫—Ç–∏–≤ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ç–µ–∫—É—â–∏–º trailing stop
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (—Ç—Ä–µ–Ω–¥, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å)

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´

### 1. **–ù–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É**
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `trailing_stop_manager`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SL

### 2. **–£—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏**
- –ü—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –±–µ–∑—É–±—ã—Ç–∫–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ (0.2%)
- –ù–µ —Å—Ç–∞–≤–∏—Ç—å SL —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ –±–µ–∑—É–±—ã—Ç–∫—É

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è SL
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏–π
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### 4. **–ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫**
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∏—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —É–±—ã—Ç–∫–∞ –Ω–∞ 30-40%
- ‚úÖ Win Rate –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–ª–∏ —É–ª—É—á—à–∞–µ—Ç—Å—è
- ‚úÖ Profit Factor —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 10-15%

### **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —É–±—ã—Ç–∫–∞ –Ω–∞ 15-25%
- ‚ö†Ô∏è Win Rate –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å—Å—è –Ω–∞ 2-5%
- ‚úÖ Profit Factor —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ 5-10%

### **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**
- ‚ùå –°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —É–±—ã—Ç–∫–∞ –Ω–∞ 5-10%
- ‚ùå Win Rate —Å–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞ 5-8%
- ‚ùå Profit Factor –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∏–ª–∏ —É—Ö—É–¥—à–∞–µ—Ç—Å—è

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `price_monitor_system.py`:**

```python
async def check_trailing_to_tp1(self, symbol: str, entry_price: float, 
                                 tp1_price: float, current_price: float,
                                 atr: float, side: str = "LONG"):
    """–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ SL –ø–æ –º–µ—Ä–µ –¥–≤–∏–∂–µ–Ω–∏—è –∫ TP1"""
    
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∫ TP1
    if side == "LONG":
        progress = (current_price - entry_price) / (tp1_price - entry_price)
    else:
        progress = (entry_price - current_price) / (entry_price - tp1_price)
    
    # –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ 40%+ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    if progress < 0.4:
        return None
    
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –Ω–æ–≤—ã–π SL
    sl_progress = progress * 0.3  # 30% –æ—Ç –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ –ø—É—Ç–∏
    if side == "LONG":
        new_sl = entry_price + (tp1_price - entry_price) * sl_progress
        breakeven = entry_price * 1.002  # –° —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π
        min_distance = atr * 2.0
        new_sl = max(new_sl, breakeven, current_price - min_distance)
    else:
        new_sl = entry_price - (entry_price - tp1_price) * sl_progress
        breakeven = entry_price * 0.998
        min_distance = atr * 2.0
        new_sl = min(new_sl, breakeven, current_price + min_distance)
    
    return new_sl
```

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–î–ê, –°–¢–û–ò–¢ –í–ù–ï–î–†–ò–¢–¨, –ù–û:**

1. ‚úÖ –ù–∞—á–∞—Ç—å —Å **–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞** (–í–∞—Ä–∏–∞–Ω—Ç 2)
2. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º –Ω–∞–±–æ—Ä–µ –∞–∫—Ç–∏–≤–æ–≤
3. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã 1-2 –Ω–µ–¥–µ–ª–∏
4. ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º trailing stop

**–ù–ï —Å—Ç–æ–∏—Ç:**
- ‚ùå –í–Ω–µ–¥—Ä—è—Ç—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤ —Å—Ä–∞–∑—É
- ‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
- ‚ùå –°—Ç–∞–≤–∏—Ç—å SL —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ —Ü–µ–Ω–µ

---

## üìù –í–´–í–û–î–´

–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ SL –∫ TP1 - **–ø–æ–ª–µ–∑–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç:
- –û—Å—Ç–æ—Ä–æ–∂–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ê–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ —Ä—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

**–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** —ç—Ç–æ –º–æ–∂–µ—Ç:
- –°–Ω–∏–∑–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫
- –£–ª—É—á—à–∏—Ç—å Profit Factor
- –ü–æ–≤—ã—Å–∏—Ç—å –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∫–æ–º—Ñ–æ—Ä—Ç

**–ü—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** —ç—Ç–æ –º–æ–∂–µ—Ç:
- –°–Ω–∏–∑–∏—Ç—å Win Rate
- –£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–∂–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π
- –£—Ö—É–¥—à–∏—Ç—å –æ–±—â—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–Ω–µ–¥—Ä–∏—Ç—å —Å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö.

