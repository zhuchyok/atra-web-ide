# üéØ –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–ò –ö–ù–û–ü–ö–ò –ü–†–ò–ù–Ø–¢–ò–Ø –°–ò–ì–ù–ê–õ–ê

## üéØ –°—Ç–∞—Ç—É—Å: ‚úÖ –ö–ù–û–ü–ö–ê –ü–†–ò–ù–Ø–¢–ò–Ø –°–ò–ì–ù–ê–õ–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê!

---

## üìã **–ü–†–û–ë–õ–ï–ú–ê**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: *"–ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–∏–Ω—è—Ç—å —Å–∏–≥–Ω–∞–ª ‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞"*

---

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´**

### **‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ `callback_data` –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–Ω–æ–ø–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.

### **üîç –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞:**

1. **–í —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–µ (`src/telegram/formatters.py`):**
   ```python
   # –°–¢–ê–†–´–ô –§–û–†–ú–ê–¢ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô)
   "callback_data": f"accept_{symbol}_{entry_price}_{signal_type}"
   ```

2. **–í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ (`telegram_handlers.py`):**
   ```python
   # –û–ñ–ò–î–ê–ï–ú–´–ô –§–û–†–ú–ê–¢
   parts = data.split('_')
   symbol = parts[1]        # –°–∏–º–≤–æ–ª
   entry_price = float(parts[2])  # –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞
   tp_price = float(parts[3])     # Take Profit
   side = parts[4]          # –°—Ç–æ—Ä–æ–Ω–∞ (LONG/SHORT)
   ```

### **üéØ –ü—Ä–æ–±–ª–µ–º–∞:**
- –§–æ—Ä–º–∞—Ç—Ç–µ—Ä —Å–æ–∑–¥–∞–≤–∞–ª: `accept_BTCUSDT_50000.0_LONG`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–∂–∏–¥–∞–ª: `accept_BTCUSDT_50000.0_52000.0_LONG`
- –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –ø–∞—Ä–∞–º–µ—Ç—Ä `take_profit_1` –≤ callback_data

---

## üîß **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï**

### **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –≤ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–µ:**

```python
def create_signal_buttons(self, signal_data: Dict[str, Any]) -> List[List[Dict[str, Any]]]:
    """–°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –¥–ª—è —Å–∏–≥–Ω–∞–ª–∞"""
    try:
        symbol = signal_data.get('symbol', 'UNKNOWN')
        signal_type = signal_data.get('signal', 'LONG')
        entry_price = signal_data.get('entry_price', 0)
        take_profit_1 = signal_data.get('take_profit_1', entry_price)  # –î–û–ë–ê–í–õ–ï–ù–û

        buttons = [
            [
                {
                    "text": f"‚úÖ –ü—Ä–∏–Ω—è—Ç—å {signal_type}",
                    "callback_data": f"accept_{symbol}_{entry_price}_{take_profit_1}_{signal_type}"  # –ò–°–ü–†–ê–í–õ–ï–ù–û
                },
                {
                    "text": "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å",
                    "callback_data": f"reject_{symbol}_{entry_price}"
                }
            ],
            [
                {
                    "text": "üìä –î–µ—Ç–∞–ª–∏",
                    "callback_data": f"details_{symbol}_{entry_price}"
                },
                {
                    "text": "üîÑ –û–±–Ω–æ–≤–∏—Ç—å",
                    "callback_data": f"refresh_{symbol}"
                }
            ]
        ]

        return buttons

    except Exception as e:
        return []
```

### **üéØ –ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `take_profit_1` –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–∞
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç `callback_data` –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è—Ç—å"
3. ‚úÖ –¢–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

---

## üß™ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **‚úÖ –¢–µ—Å—Ç 1: –§–æ—Ä–º–∞—Ç –∫–Ω–æ–ø–∫–∏**
```
üìä –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:
   ‚úÖ –ü—Ä–∏–Ω—è—Ç—å LONG -> accept_BTCUSDT_50000.0_52000.0_LONG
   ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å -> reject_BTCUSDT_50000.0
   üìä –î–µ—Ç–∞–ª–∏ -> details_BTCUSDT_50000.0
   üîÑ –û–±–Ω–æ–≤–∏—Ç—å -> refresh_BTCUSDT

‚úÖ –ö–Ω–æ–ø–∫–∞ '–ü—Ä–∏–Ω—è—Ç—å' –Ω–∞–π–¥–µ–Ω–∞:
   –¢–µ–∫—Å—Ç: ‚úÖ –ü—Ä–∏–Ω—è—Ç—å LONG
   Callback: accept_BTCUSDT_50000.0_52000.0_LONG

üìã –ê–Ω–∞–ª–∏–∑ callback_data:
   –ß–∞—Å—Ç–∏: ['accept', 'BTCUSDT', '50000.0', '52000.0', 'LONG']
   –î–µ–π—Å—Ç–≤–∏–µ: accept
   –°–∏–º–≤–æ–ª: BTCUSDT
   –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 50000.0
   Take Profit: 52000.0
   –°—Ç–æ—Ä–æ–Ω–∞: LONG

üéØ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞:
   –û–∂–∏–¥–∞–µ–º—ã–π: accept_BTCUSDT_50000.0_52000.0_LONG
   –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π: accept_BTCUSDT_50000.0_52000.0_LONG
   ‚úÖ –§–æ—Ä–º–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É!
```

### **‚úÖ –¢–µ—Å—Ç 2: –ü–∞—Ä—Å–∏–Ω–≥ –∫–Ω–æ–ø–∫–∏**
```
üìã –¢–µ—Å—Ç–∏—Ä—É–µ–º callback_data: accept_BTCUSDT_50000.0_52000.0_LONG
üìã –ß–∞—Å—Ç–∏ –ø–æ—Å–ª–µ split: ['accept', 'BTCUSDT', '50000.0', '52000.0', 'LONG']
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —É—Å–ø–µ—à–µ–Ω:
   –î–µ–π—Å—Ç–≤–∏–µ: accept
   –°–∏–º–≤–æ–ª: BTCUSDT
   –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 50000.0
   Take Profit: 52000.0
   –°—Ç–æ—Ä–æ–Ω–∞: LONG
   ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã!
```

### **‚úÖ –¢–µ—Å—Ç 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
```
üìä –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è SHORT —Å–∏–≥–Ω–∞–ª–∞:
‚úÖ –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∞: accept_ETHUSDT_3000.0_2850.0_SHORT
‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫–Ω–æ–ø–∫—É –∫–∞–∫ 'accept_'
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –≤ handle_accept_button —É—Å–ø–µ—à–µ–Ω:
   –°–∏–º–≤–æ–ª: ETHUSDT
   –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 3000.0
   Take Profit: 2850.0
   –°—Ç–æ—Ä–æ–Ω–∞: SHORT
```

---

## üìä **–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

### **–¢–µ—Å—Ç 1: –§–æ—Ä–º–∞—Ç –∫–Ω–æ–ø–∫–∏** ‚úÖ
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –§–æ—Ä–º–∞—Ç callback_data: ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: ‚úÖ –ü–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### **–¢–µ—Å—Ç 2: –ü–∞—Ä—Å–∏–Ω–≥ –∫–Ω–æ–ø–∫–∏** ‚úÖ
- –†–∞–∑–±–æ—Ä callback_data: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö: ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### **–¢–µ—Å—Ç 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚úÖ
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–∞—Ä—Å–∏–Ω–≥ –≤ handle_accept_button: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ SHORT —Å–∏–≥–Ω–∞–ª–æ–≤: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üöÄ **–ì–û–¢–û–í–ù–û–°–¢–¨ –ö –†–ê–ë–û–¢–ï**

### ‚úÖ **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –§–æ—Ä–º–∞—Ç callback_data –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è—Ç—å"
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–º –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º
- –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫–Ω–æ–ø–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìù **–û–¢–í–ï–¢ –ù–ê –ü–†–û–ë–õ–ï–ú–£ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø**

### **‚ùì "–ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–∏–Ω—è—Ç—å —Å–∏–≥–Ω–∞–ª ‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞"**

### **‚úÖ –û–¢–í–ï–¢: –ü–†–û–ë–õ–ï–ú–ê –ò–°–ü–†–ê–í–õ–ï–ù–ê!**

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Ñ–æ—Ä–º–∞—Ç–∞ callback_data:**

1. ‚úÖ **–ü—Ä–∏—á–∏–Ω–∞:** –§–æ—Ä–º–∞—Ç—Ç–µ—Ä —Å–æ–∑–¥–∞–≤–∞–ª –∫–Ω–æ–ø–∫—É —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
2. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `take_profit_1` –≤ callback_data
3. ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –±–æ–ª—å—à–µ –Ω–µ –≤—ã–¥–∞–µ—Ç "‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞"
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Å–∏–≥–Ω–∞–ª–∞ –ò–°–ü–†–ê–í–õ–ï–ù–ê - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** üöÄ

---

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–Ω–æ–ø–∫–æ–π –ø—Ä–∏–Ω—è—Ç–∏—è —Å–∏–≥–Ω–∞–ª–∞ —Ä–µ—à–µ–Ω–∞!**

- ‚úÖ –§–æ—Ä–º–∞—Ç callback_data –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –∫–Ω–æ–ø–∫—É
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è LONG –∏ SHORT —Å–∏–≥–Ω–∞–ª–æ–≤

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π –ø—Ä–∏–Ω—è—Ç–∏—è —Å–∏–≥–Ω–∞–ª–∞!** üéØ
