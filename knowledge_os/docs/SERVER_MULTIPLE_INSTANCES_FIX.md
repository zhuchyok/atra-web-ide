# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–• –≠–ö–ó–ï–ú–ü–õ–Ø–†–û–í –ù–ê –°–ï–†–í–ï–†–ï

## üö® **–ü–†–û–ë–õ–ï–ú–ê**

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–æ–≥—É—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —Å–∏—Å—Ç–µ–º—ã ATRA –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (`database is locked`)
- –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã
- –û—à–∏–±–∫–∞–º `talib` –∏ –¥—Ä—É–≥–∏–º –ø—Ä–æ–±–ª–µ–º–∞–º
- –ó–∞–≤–∏—Å–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã

## ‚úÖ **–†–ï–®–ï–ù–ò–ï**

–°–æ–∑–¥–∞–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤:

### 1. **–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** (`check_processes.py`)
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ATRA
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- –ú–æ–∂–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫** (`safe_start.py`)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ª–∏—à–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

### 3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π systemd —Å–µ—Ä–≤–∏—Å** (`atra_improved.service`)
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫

## üõ†Ô∏è **–ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –°–ï–†–í–ï–†–ê**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã
python3 check_processes.py

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
lsof trading.db
```

### **2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã ATRA
python3 check_processes.py
# –í—ã–±–µ—Ä–∏—Ç–µ "y" –∫–æ–≥–¥–∞ —Å–ø—Ä–æ—Å–∏—Ç –æ–± –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

# –ò–ª–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
pkill -f "main.py"
```

### **3. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ
python3 safe_start.py
```

### **4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd (–¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞):**
```bash
# –ö–æ–ø–∏—Ä—É–µ–º —É–ª—É—á—à–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
sudo cp atra_improved.service /etc/systemd/system/

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º systemd
sudo systemctl daemon-reload

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–∏—Å
sudo systemctl stop atra.service

# –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å
sudo systemctl start atra_improved.service

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable atra_improved.service

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo systemctl status atra_improved.service
```

## üîç **–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú**

### **–ü—Ä–∏–∑–Ω–∞–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤:**
- –û—à–∏–±–∫–∏ `database is locked`
- –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/RAM
- –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã
- –û—à–∏–±–∫–∏ `talib` –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π

### **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | grep main.py | grep -v grep | wc -l

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 1 (–∏–ª–∏ 0 –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ)
# –ï—Å–ª–∏ –±–æ–ª—å—à–µ 1 - –ø—Ä–æ–±–ª–µ–º–∞!

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
lsof trading.db | wc -l
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 0 (–∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ)
# –ï—Å–ª–∏ –º–Ω–æ–≥–æ - –ø—Ä–æ–±–ª–µ–º–∞!
```

## üöÄ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò**

### **1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```bash
python3 safe_start.py
```

### **2. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã:**
```bash
python3 check_processes.py
```

### **3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—è—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å–∞–º–∏

### **4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status atra_improved.service

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u atra_improved.service -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
python3 check_processes.py
```

## üìä **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –†–ï–®–ï–ù–ò–Ø**

### ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ª–∏—à–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- Graceful shutdown –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

### ‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ:**
- –ü—Ä–æ—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏

## üéØ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

**–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê!**

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è:
1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏** –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞** —Å–∏—Å—Ç–µ–º—ã
3. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è** –ø—Ä–æ–±–ª–µ–º –≤ –±—É–¥—É—â–µ–º
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `python3 safe_start.py` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!** üöÄ
