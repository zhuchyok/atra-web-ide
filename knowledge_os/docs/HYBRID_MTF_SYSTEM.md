# üéØ –ì–ò–ë–†–ò–î–ù–ê–Ø MTF –°–ò–°–¢–ï–ú–ê - –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-20  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö PRODUCTION**

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã](#–∞–ª–≥–æ—Ä–∏—Ç–º-—Ä–∞–±–æ—Ç—ã)
4. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
5. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
8. [Troubleshooting](#troubleshooting)

---

## üéØ –û–ë–ó–û–†

### –ß—Ç–æ —ç—Ç–æ?

–ì–∏–±—Ä–∏–¥–Ω–∞—è MTF (Multi-Timeframe) —Å–∏—Å—Ç–µ–º–∞ - —ç—Ç–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö, –∫–æ—Ç–æ—Ä–∞—è:

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **4h** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–π–º—Ñ—Ä–µ–π–º (Binance –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç)
- ‚úÖ –ö–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ **H1** –∞–Ω–∞–ª–∏–∑
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç **—Ä—ã–Ω–æ—á–Ω—ã–π –∏–º–ø—É–ª—å—Å** (BTC, ETH, SOL)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–∏–ª—å–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–∞—Ö

### –ó–∞—á–µ–º?

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç–∞—Ä–∞—è MTF —Å–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ —Å–∏–≥–Ω–∞–ª—ã –≤–æ –≤—Ä–µ–º—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–æ—Å—Ç–∞ —Ä—ã–Ω–∫–∞ –∏–∑-–∑–∞ –∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏—è H4.

**–†–µ—à–µ–Ω–∏–µ:** –ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑:
- –ê–Ω–∞–ª–∏–∑ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ H1
- –£—á–µ—Ç —Ä—ã–Ω–æ—á–Ω–æ–≥–æ –∏–º–ø—É–ª—å—Å–∞ (BTC/ETH/SOL)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤** –Ω–∞ 30-50%
- ‚úÖ **–°–Ω–∏–∂–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** –Ω–∞ 60-80%
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞** —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     HybridMTFConfirmation               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  _check_h4_confirmation()        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - EMA (8, 21)                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - MACD (12, 26, 9)              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Confidence: 0.0-1.0          ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  _analyze_h1_trend_strength()     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - EMA (9, 21, 50)                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - RSI (14)                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Volume ratio                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Strength: 0.0-1.0             ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  _analyze_market_momentum()       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - BTC change 12h (35%)           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - ETH change 12h (25%)           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - SOL change 12h (20%) ‚úÖ        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Market regime (20%)            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Momentum: 0.0-1.0              ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  _apply_hybrid_compensation()      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - H1 boost: –¥–æ 0.28              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Market boost: –¥–æ 0.175         ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Max boost: 0.35                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Final confidence                ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
Signal ‚Üí HybridMTFConfirmation
    ‚Üì
1. –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ H4 –∏ H1
    ‚Üì
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å H4 (EMA, MACD)
    ‚Üì
3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å H1 —Ç—Ä–µ–Ω–¥
    ‚Üì
4. –ü–æ–ª—É—á–∏—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (BTC/ETH/SOL)
    ‚Üì
5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—é
    ‚Üì
6. –í–µ—Ä–Ω—É—Ç—å (confirmed, confidence, details)
```

---

## üîß –ê–õ–ì–û–†–ò–¢–ú –†–ê–ë–û–¢–´

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ H4

```python
# EMA —Ä–∞—Å—á–µ—Ç—ã
ema_fast = df_h4['close'].ewm(span=8).mean()
ema_slow = df_h4['close'].ewm(span=21).mean()

# MACD
macd = EMA(12) - EMA(26)
signal_line = EMA(macd, 9)
histogram = macd - signal_line

# Confidence –¥–ª—è LONG:
if price > ema_fast > ema_slow:
    confidence = 0.85  # –°–∏–ª—å–Ω—ã–π –±—ã—á–∏–π —Ç—Ä–µ–Ω–¥
elif price > ema_slow and ema_fast > ema_slow:
    confidence = 0.75  # –ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥
elif price > ema_slow:
    confidence = 0.65  # –¶–µ–Ω–∞ –≤—ã—à–µ –º–µ–¥–ª–µ–Ω–Ω–æ–π EMA
else:
    confidence = 0.4   # –ù–µ –±—ã—á–∏–π

# –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ MACD
if macd > signal and histogram > 0:
    confidence += 0.15  # MACD –±—ã—á–∏–π
elif macd < signal:
    confidence -= 0.1   # MACD –º–µ–¥–≤–µ–∂–∏–π
```

### –®–∞–≥ 2: –ê–Ω–∞–ª–∏–∑ H1 —Ç—Ä–µ–Ω–¥–∞

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –¥–ª—è LONG
bullish_conditions = 0
total_conditions = 5

if price > EMA(9): bullish_conditions += 1
if EMA(9) > EMA(21): bullish_conditions += 1
if EMA(21) > EMA(50): bullish_conditions += 1
if RSI > 50: bullish_conditions += 1
if RSI > 60: bullish_conditions += 0.5  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–∞–ª–ª

trend_strength = bullish_conditions / total_conditions

# –£—Å–∏–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –æ–±—ä–µ–º–µ
if volume_ratio > 1.5:
    trend_strength += 0.2
elif volume_ratio > 1.2:
    trend_strength += 0.1
```

### –®–∞–≥ 3: –†—ã–Ω–æ—á–Ω—ã–π –∏–º–ø—É–ª—å—Å

```python
momentum_score = 0.5  # –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π

# BTC (35%)
if btc_change_12h > 0.04:  # +4%
    momentum_score += 0.35
elif btc_change_12h > 0.02:  # +2%
    momentum_score += 0.175

# ETH (25%)
if eth_change_12h > 0.04:
    momentum_score += 0.25
elif eth_change_12h > 0.02:
    momentum_score += 0.125

# SOL (20%) ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û
if sol_change_12h > 0.04:
    momentum_score += 0.2
elif sol_change_12h > 0.02:
    momentum_score += 0.1

# –†—ã–Ω–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (20%)
if market_regime == 'BULL_TREND':
    momentum_score += 0.2
```

### –®–∞–≥ 4: –ì–∏–±—Ä–∏–¥–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è

```python
hybrid_boost = 0.0

# –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –æ—Ç H1
if h1_trend_strength >= 0.9:
    hybrid_boost += min(0.35 * 0.8, 0.28)  # –û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π
elif h1_trend_strength >= 0.8:
    hybrid_boost += min(0.35 * 0.6, 0.21)  # –°–∏–ª—å–Ω—ã–π
# ... –∏ —Ç.–¥.

# –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –æ—Ç —Ä—ã–Ω–∫–∞
if market_momentum >= 0.8:
    hybrid_boost += min(0.35 * 0.5, 0.175)  # –°–∏–ª—å–Ω—ã–π —Ä—ã–Ω–æ–∫
# ... –∏ —Ç.–¥.

# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –±—É—Å—Ç–∞
hybrid_boost = min(hybrid_boost, 0.35)

# –§–∏–Ω–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
final_confidence = min(1.0, h4_confidence + hybrid_boost)
final_confirmed = final_confidence >= min_h4_confidence (0.6)
```

---

## ‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### config.py

```python
HYBRID_MTF_CONFIG = {
    'enabled': True,                    # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å
    'primary_timeframe': '4h',          # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–π–º—Ñ—Ä–µ–π–º
    'compensation_timeframe': '1h',     # –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–∞–π–º—Ñ—Ä–µ–π–º
    'min_h4_confidence': 0.6,          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å H4
    'max_hybrid_boost': 0.35,          # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±—É—Å—Ç –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏
    'h1_trend_thresholds': {
        'VERY_STRONG': 0.9,
        'STRONG': 0.8,
        'MODERATE': 0.7,
        'WEAK': 0.6
    },
    'market_momentum_thresholds': {
        'VERY_STRONG': 0.8,
        'STRONG': 0.7,
        'MODERATE': 0.6
    }
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å
HYBRID_MTF_ENABLED=true

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å H4
HYBRID_MTF_MIN_H4_CONFIDENCE=0.6

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±—É—Å—Ç
HYBRID_MTF_MAX_BOOST=0.35
```

---

## üîå –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### signal_live.py

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ `signal_live.py`:

```python
# –ò–º–ø–æ—Ä—Ç
from src.analysis.hybrid_mtf import HybridMTFConfirmation

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ _run_mtf_confirmation_with_logging
if HYBRID_MTF_AVAILABLE and HYBRID_MTF_CONFIG['enabled']:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–∏–±—Ä–∏–¥–Ω—É—é —Å–∏—Å—Ç–µ–º—É
    confirmed, confidence, details = await hybrid_mtf.check_hybrid_mtf_confirmation(
        symbol, direction, df_h4, df_h1, market_context
    )
else:
    # Fallback –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é MTF
    confirmed, error = await check_mtf_confirmation(symbol, direction, '4h', regime_data)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```python
# –§—É–Ω–∫—Ü–∏—è _get_data_with_fallback –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –ü—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é
# 2. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∏–∑ –¥—Ä—É–≥–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤:
#    - 4h ‚Üê 2h (resample)
#    - 1h ‚Üê 30m (resample)
```

### –†—ã–Ω–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

```python
# –§—É–Ω–∫—Ü–∏—è _get_market_context_with_sol –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –ü–æ–ª—É—á–∞–µ—Ç BTC –¥–∞–Ω–Ω—ã–µ –∑–∞ 12 —á–∞—Å–æ–≤
# 2. –ü–æ–ª—É—á–∞–µ—Ç ETH –¥–∞–Ω–Ω—ã–µ –∑–∞ 12 —á–∞—Å–æ–≤
# 3. –ü–æ–ª—É—á–∞–µ—Ç SOL –¥–∞–Ω–Ω—ã–µ –∑–∞ 12 —á–∞—Å–æ–≤ ‚úÖ
# 4. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
# 5. –î–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### Unit —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/unit/test_hybrid_mtf.py -v
```

### –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

1. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–ø—É—Å—Ç—ã–µ, None, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç—Ä–æ–∫)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ H4 (–±—ã—á–∏–π/–º–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥)
3. ‚úÖ –ê–Ω–∞–ª–∏–∑ H1 —Ç—Ä–µ–Ω–¥–∞
4. ‚úÖ –†—ã–Ω–æ—á–Ω—ã–π –∏–º–ø—É–ª—å—Å —Å SOL
5. ‚úÖ –ì–∏–±—Ä–∏–¥–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è
6. ‚úÖ –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ MTF
7. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Integration —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ integration —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/integration/test_hybrid_mtf_integration.py -v
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –õ–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≥–∏–±—Ä–∏–¥–Ω–æ–π MTF
tail -f logs/atr_bot.log | grep -i "–≥–∏–±—Ä–∏–¥–Ω—ã–π\|hybrid.*mtf"
```

### –ú–µ—Ç—Ä–∏–∫–∏

- `hybrid_mtf_confidence` - –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- `hybrid_boost_applied` - –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–π –±—É—Å—Ç
- `compensation_success_rate` - –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏
- `signals_increase_pct` - –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤

### –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
python scripts/monitoring/hybrid_mtf_monitor.py
```

---

## üîß TROUBLESHOOTING

### –ü—Ä–æ–±–ª–µ–º–∞: –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í—Ä–µ–º–µ–Ω–Ω–æ —Å–Ω–∏–∑–∏—Ç—å min_h4_confidence
HYBRID_MTF_CONFIG['min_h4_confidence'] = 0.55
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –£–≤–µ–ª–∏—á–∏—Ç—å min_h4_confidence
HYBRID_MTF_CONFIG['min_h4_confidence'] = 0.65
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –£–≤–µ–ª–∏—á–∏—Ç—å max_hybrid_boost
HYBRID_MTF_CONFIG['max_hybrid_boost'] = 0.4
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Binance API
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limits
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

---

## üìà –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤:** +30-50%
- ‚úÖ **–°–Ω–∏–∂–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫:** -60-80%
- ‚úÖ **–ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤:** –ë–µ–∑ —É—Ö—É–¥—à–µ–Ω–∏—è
- ‚úÖ **Latency:** < 100ms –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- `signals_per_hour` > 2
- `mtf_block_rate` < 20%
- `hybrid_compensation_rate` > 60%
- `error_rate` < 1%

---

## üéØ –í–´–í–û–î–´

–ì–∏–±—Ä–∏–¥–Ω–∞—è MTF —Å–∏—Å—Ç–µ–º–∞:

- ‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏—è H4
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–π –∏–º–ø—É–ª—å—Å (BTC/ETH/SOL)
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ production

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **10/10** - –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ 7 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤*

