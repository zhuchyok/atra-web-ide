# ‚úÖ –ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (L3-L4) - –∑–∞–≤–µ—Ä—à–µ–Ω–æ

**–î–∞—Ç–∞:** 2025-11-13  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û**

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. AgentCoordinator - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∞–≥–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `observability/agent_coordinator.py`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ `SharedMemory` - –æ–±—â–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
- ‚úÖ `EventBus` - —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
- ‚úÖ `AgentCoordinator` - –≥–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
- ‚úÖ `EventType` - —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- Event-driven –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ EventBus
- Shared memory –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π –∞–≥–µ–Ω—Ç–æ–≤

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –∞–≥–µ–Ω—Ç—ã

**signal_live:**
- ‚úÖ –ü—É–±–ª–∏–∫—É–µ—Ç `SIGNAL_GENERATED` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–∏–≥–Ω–∞–ª –≤ shared memory –¥–ª—è auto_execution

**auto_execution:**
- ‚úÖ –ü—É–±–ª–∏–∫—É–µ—Ç `POSITION_OPENED` –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç shared context –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∏–∑ shared memory

**risk_monitor:**
- ‚úÖ –ü—É–±–ª–∏–∫—É–µ—Ç `RISK_ALERT` –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫—Ä—É–ø–Ω—ã—Ö —É–±—ã—Ç–∫–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ shared memory –¥–ª—è signal_live

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Ç–æ–∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏:

1. **signal_live –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª:**
   ```python
   publish_agent_event(
       EventType.SIGNAL_GENERATED,
       agent="signal_live",
       data={"symbol": "BTCUSDT", "signal_type": "BUY", ...}
   )
   ```
   - –°–æ–±—ã—Ç–∏–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ EventBus
   - –°–∏–≥–Ω–∞–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ shared memory
   - auto_execution –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

2. **auto_execution –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é:**
   ```python
   # –ü–æ–ª—É—á–∞–µ—Ç shared context
   shared_context = coordinator.get_shared_context(
       agent="auto_execution",
       context_keys=["signal:BTCUSDT:BUY", "risk_block:max_dd"]
   )
   
   # –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ
   publish_agent_event(
       EventType.POSITION_OPENED,
       agent="auto_execution",
       data={"symbol": "BTCUSDT", "direction": "BUY", ...}
   )
   ```
   - –ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ shared memory
   - risk_monitor –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

3. **risk_monitor –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É:**
   ```python
   publish_agent_event(
       EventType.RISK_ALERT,
       agent="risk_monitor",
       data={"alert_type": "large_loss", ...}
   )
   ```
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ shared memory
   - signal_live –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã

---

## üîÑ –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

- `SIGNAL_GENERATED` - —Å–∏–≥–Ω–∞–ª —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- `SIGNAL_ACCEPTED` - —Å–∏–≥–Ω–∞–ª –ø—Ä–∏–Ω—è—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- `POSITION_OPENED` - –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞
- `POSITION_CLOSED` - –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞
- `ORDER_EXECUTED` - –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω
- `RISK_ALERT` - —Ä–∏—Å–∫-–∞–ª–µ—Ä—Ç
- `PROTECTION_UPDATED` - –∑–∞—â–∏—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è:** –ê–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ, –∞ –Ω–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ
2. **–û–±–º–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:** Shared memory –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
3. **Event-driven:** –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤

---

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **Self-Evolving System** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
2. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π** - –±–æ–ª—å—à–µ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏** - –º–µ—Ç—Ä–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥—ã

---

**–°–º. —Ç–∞–∫–∂–µ:**
- [AGENT_DEVELOPMENT_ROADMAP.md](./AGENT_DEVELOPMENT_ROADMAP.md) - –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
- [AGENT_OPS_COMPLETE.md](./AGENT_OPS_COMPLETE.md) - Agent Ops

