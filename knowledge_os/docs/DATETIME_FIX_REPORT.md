# –û—Ç—á—ë—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ datetime

## üéØ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

### ‚ùå **–û—à–∏–±–∫–∞:**
```
TypeError: can't subtract offset-naive and offset-aware datetimes
```

### üîç **–ü—Ä–∏—á–∏–Ω–∞:**
–ü—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- `now` –∏–º–µ–ª —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å (offset-aware)
- `last_signal_time` –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ –∏–º–µ–ª —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ (offset-naive)

### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É:

```python
# –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –æ–±–∞ datetime –∏–º–µ—é—Ç —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
if last_signal_time.tzinfo is None:
    last_signal_time = last_signal_time.replace(tzinfo=MSK)
if now.tzinfo is None:
    now = now.replace(tzinfo=MSK)
```

### üîß **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å–±—Ä–æ—Å–∞** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏** - –≤—Ä–µ–º—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º MSK
3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏** - –æ–±–∞ datetime –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ **–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞** - –Ω–µ—Ç –±–æ–ª—å—à–µ TypeError
- ‚úÖ **–í—Ä–µ–º—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è** - –ª–æ–≥–∏–∫–∞ —Å–±—Ä–æ—Å–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–°–∏–≥–Ω–∞–ª—ã —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è** —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞** - –Ω–µ—Ç –æ—à–∏–±–æ–∫ datetime

### üöÄ **–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏** ‚Üí —Å —á–∞—Å–æ–≤—ã–º –ø–æ—è—Å–æ–º MSK
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏** ‚Üí –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
3. **–°–±—Ä–æ—Å —Å–∏–≥–Ω–∞–ª–æ–≤** ‚Üí —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
4. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã** ‚Üí –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π

### üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:**

**–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!** –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å:

- ‚úÖ **–ù–µ –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–æ–∫** datetime
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç** –≤—Ä–µ–º—è
- ‚úÖ **–°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã** —á–µ—Ä–µ–∑ 4 —á–∞—Å–∞
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ** —Å–∏–≥–Ω–∞–ª—ã

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ**
