# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê: –ü–æ—á–µ–º—É –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ PROD –±–æ—Ç–µ (@PiuX_Trade_bot)

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

- **PROD –±–æ—Ç**: @PiuX_Trade_bot (—Ç–æ–∫–µ–Ω `8156844481`)
- **DEV –±–æ—Ç**: @piu_piu_dev_bot (—Ç–æ–∫–µ–Ω `8141444679`)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–∏–≥–Ω–∞–ª—ã –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ PROD –±–æ—Ç

## üîç –õ–û–ì–ò–ö–ê –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –¢–û–ö–ï–ù–ê

–í `config.py` (—Å—Ç—Ä–æ–∫–∏ 166-173):
```python
ATRA_ENV = os.getenv("ATRA_ENV", "dev").lower().strip()
TOKEN = (
    TELEGRAM_TOKEN if ATRA_ENV == "prod" else (
        TELEGRAM_TOKEN_DEV or TELEGRAM_TOKEN
    )
)
```

**–ö—Ä–∏—Ç–∏—á–Ω–æ**: –ï—Å–ª–∏ `ATRA_ENV != "prod"`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DEV —Ç–æ–∫–µ–Ω!

## ‚ö†Ô∏è –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ATRA_ENV –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è PROD –±–æ—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è PROD –±–æ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `ATRA_ENV=dev`, —Ç–æ:
- –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è DEV —Ç–æ–∫–µ–Ω (`8141444679`)
- –°–∏–≥–Ω–∞–ª—ã –ø–æ–π–¥—É—Ç –≤ DEV –±–æ—Ç (@piu_piu_dev_bot)
- PROD –±–æ—Ç –Ω–µ –ø–æ–ª—É—á–∏—Ç —Å–∏–≥–Ω–∞–ª—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**:
```bash
cd /root/atra
echo "=== –ü–†–û–í–ï–†–ö–ê PROD –ë–û–¢–ê ==="
echo ""
echo "1. –ü—Ä–æ–≤–µ—Ä—è–µ–º ATRA_ENV:"
grep "^ATRA_ENV" env
echo ""
echo "2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–∫–µ–Ω PROD:"
grep "^TELEGRAM_TOKEN=" env | head -1
echo ""
echo "3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã:"
ps aux | grep "python.*main" | grep -v grep
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```bash
cd /root/atra
# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp env env.backup

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ATRA_ENV=prod –¥–ª—è PROD –±–æ—Ç–∞
sed -i 's/^ATRA_ENV=.*/ATRA_ENV=prod/' env

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
grep "^ATRA_ENV" env
```

### 2. PROD –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep "python.*main" | grep -v grep

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
tail -50 logs/*.log | grep -i "telegram\|bot\|start"
```

**–ó–∞–ø—É—Å–∫ PROD –±–æ—Ç–∞**:
```bash
cd /root/atra
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ATRA_ENV=prod –≤ env —Ñ–∞–π–ª–µ
nohup python3 main.py > logs/prod_bot.log 2>&1 &
```

### 3. –°–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è, –Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ DEV –±–æ—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤**:
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ —Å–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
tail -100 logs/*.log | grep -E "—Å–∏–≥–Ω–∞–ª|SIGNAL|notify_user" | tail -20

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–æ–π —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
grep -E "TOKEN|ATRA_ENV" logs/*.log | tail -10
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
cd /root/atra
python3 -c "
import os
from dotenv import load_dotenv
load_dotenv('env')

print('=== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê ===')
print(f'ATRA_ENV: {os.getenv(\"ATRA_ENV\")}')
print(f'TELEGRAM_TOKEN (–ø–µ—Ä–≤—ã–µ 20 —Å–∏–º–≤–æ–ª–æ–≤): {os.getenv(\"TELEGRAM_TOKEN\", \"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\")[:20]}...')
print(f'TELEGRAM_TOKEN_DEV (–ø–µ—Ä–≤—ã–µ 20 —Å–∏–º–≤–æ–ª–æ–≤): {os.getenv(\"TELEGRAM_TOKEN_DEV\", \"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\")[:20]}...')

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–æ–π —Ç–æ–∫–µ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω
from config import TOKEN, ATRA_ENV
print(f'')
print(f'–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π TOKEN (–ø–µ—Ä–≤—ã–µ 20 —Å–∏–º–≤–æ–ª–æ–≤): {TOKEN[:20] if TOKEN else \"–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\"}...')
print(f'ATRA_ENV –∏–∑ config: {ATRA_ENV}')
"
```

### 4. –°–∏–≥–Ω–∞–ª—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤–æ–æ–±—â–µ (—Ñ–∏–ª—å—Ç—Ä—ã –±–ª–æ–∫–∏—Ä—É—é—Ç)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤**:
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
tail -200 logs/*.log | grep -E "—Å–∏–≥–Ω–∞–ª|SIGNAL|generate|–±–ª–æ–∫|block" | tail -30

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
tail -100 logs/*.log | grep -E "check_and_send|_generate_signal" | tail -20
```

## üîß –ü–û–®–ê–ì–û–í–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /root/atra
echo "=== –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê ==="
echo ""
echo "1. ATRA_ENV:"
grep "^ATRA_ENV" env
echo ""
echo "2. –¢–æ–∫–µ–Ω—ã:"
grep "^TELEGRAM_TOKEN" env
echo ""
echo "3. –ü—Ä–æ—Ü–µ—Å—Å—ã:"
ps aux | grep "python.*main" | grep -v grep
```

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å ATRA_ENV –¥–ª—è PROD –±–æ—Ç–∞

```bash
cd /root/atra
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ATRA_ENV=prod
sed -i 's/^ATRA_ENV=.*/ATRA_ENV=prod/' env

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
grep "^ATRA_ENV" env
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
cd /root/atra
git pull origin main  # –∏–ª–∏ master
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PROD –±–æ—Ç

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å
pkill -f "python.*main"

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ó–∞–ø—É—Å—Ç–∏—Ç—å PROD –±–æ—Ç
cd /root/atra
nohup python3 main.py > logs/prod_bot.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫
sleep 3
ps aux | grep "python.*main" | grep -v grep
tail -20 logs/prod_bot.log
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏
tail -f logs/prod_bot.log | grep -E "—Å–∏–≥–Ω–∞–ª|SIGNAL|notify_user|ATRA_ENV"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
grep "TOKEN\|ATRA_ENV" logs/prod_bot.log | head -10
```

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

- [ ] `ATRA_ENV=prod` –≤ —Ñ–∞–π–ª–µ `env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] `TELEGRAM_TOKEN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (—Ç–æ–∫–µ–Ω PROD –±–æ—Ç–∞ `8156844481`)
- [ ] PROD –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PROD —Ç–æ–∫–µ–Ω–∞
- [ ] –°–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏)
- [ ] –°–∏–≥–Ω–∞–ª—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ PROD –±–æ—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram)

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   ATRA_ENV: prod
   –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π TOKEN: 8156844481...
   ```

2. **–î–æ–∂–¥–∞—Ç—å—Å—è —Å–∏–≥–Ω–∞–ª–∞** –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é:
   ```bash
   tail -100 logs/prod_bot.log | grep "—Å–∏–≥–Ω–∞–ª\|SIGNAL"
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram** - —Å–∏–≥–Ω–∞–ª—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –≤ @PiuX_Trade_bot

## ‚ö†Ô∏è –í–ê–ñ–ù–û

- **PROD –±–æ—Ç** –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `ATRA_ENV=prod` –≤ —Ñ–∞–π–ª–µ `env`
- **DEV –±–æ—Ç** –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å `ATRA_ENV=dev` –≤ —Ñ–∞–π–ª–µ `env`
- –ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—â–µ–Ω—ã –æ–±–∞ –±–æ—Ç–∞, —É –∫–∞–∂–¥–æ–≥–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–π `env` —Ñ–∞–π–ª –∏–ª–∏ —Å–≤–æ—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ª–∏ —Å–∏–≥–Ω–∞–ª—ã**:
   ```bash
   tail -500 logs/*.log | grep -E "check_and_send|_generate_signal" | tail -50
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã**:
   ```bash
   tail -500 logs/*.log | grep -E "–±–ª–æ–∫|block|—Ñ–∏–ª—å—Ç—Ä|filter" | tail -50
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram API**:
   ```bash
   tail -100 logs/*.log | grep -E "Telegram\|API\|error\|Error" | tail -20
   ```

