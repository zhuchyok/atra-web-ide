# üìä –§–ò–õ–¨–¢–†–´ MOMENTUM –ò TREND STRENGTH

## ‚úÖ –°–¢–ê–¢–£–°: –í–ö–õ–Æ–ß–ï–ù–´ –ò –†–ê–ë–û–¢–ê–Æ–¢

### üìä MOMENTUM FILTER

**–§–∞–π–ª:** `src/filters/momentum_filter.py`

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
- **Money Flow Index (MFI)** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ü–µ–Ω—ã –∏ –æ–±—ä–µ–º–∞
- **Stochastic RSI (Stoch RSI)** - –±–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è RSI

**–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**

#### LONG —Å–∏–≥–Ω–∞–ª—ã:
- **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º:** –¢—Ä–µ–±—É—é—Ç—Å—è –æ–±–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - MFI < 30.0 (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
  - Stoch RSI < 20.0 (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
- **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - MFI < 40.0 –ò–õ–ò Stoch RSI < 30.0

#### SHORT —Å–∏–≥–Ω–∞–ª—ã:
- **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º:** –¢—Ä–µ–±—É—é—Ç—Å—è –æ–±–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - MFI > 70.0 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å)
  - Stoch RSI > 80.0 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å)
- **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - MFI > 60.0 –ò–õ–ò Stoch RSI > 70.0

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –í `soft_entry_signal` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–º—è–≥–∫–∏–π —Ä–µ–∂–∏–º** (`strict_mode=False`)

---

### üìä TREND STRENGTH FILTER

**–§–∞–π–ª:** `src/filters/trend_strength_filter.py`

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
- **ADX (Average Directional Index)** - —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞
- **TSI (True Strength Index)** - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞

**–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**

#### –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º:** ADX > 25.0 (—Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥)
- **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º:** ADX > 20.0 (—É–º–µ—Ä–µ–Ω–Ω—ã–π —Ç—Ä–µ–Ω–¥)

#### LONG —Å–∏–≥–Ω–∞–ª—ã:
- **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º:** –¢—Ä–µ–±—É—é—Ç—Å—è –æ–±–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - ADX –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ = 'up' (–≤–æ—Å—Ö–æ–¥—è—â–∏–π)
  - TSI > 0 (–≤–æ—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥)
- **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - ADX –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ = 'up' –ò–õ–ò TSI > 0

#### SHORT —Å–∏–≥–Ω–∞–ª—ã:
- **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º:** –¢—Ä–µ–±—É—é—Ç—Å—è –æ–±–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - ADX –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ = 'down' (–Ω–∏—Å—Ö–æ–¥—è—â–∏–π)
  - TSI < 0 (–Ω–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥)
- **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–¥–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  - ADX –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ = 'down' –ò–õ–ò TSI < 0

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –í `soft_entry_signal` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–º—è–≥–∫–∏–π —Ä–µ–∂–∏–º** (`strict_mode=False`)

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

**–§–∞–π–ª:** `config.py`

```python
# –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Momentum —Ñ–∏–ª—å—Ç—Ä–∞
USE_MOMENTUM_FILTER = os.getenv("USE_MOMENTUM_FILTER", "true").lower() in ("1", "true", "yes")

# –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Trend Strength —Ñ–∏–ª—å—Ç—Ä–∞
USE_TREND_STRENGTH_FILTER = os.getenv("USE_TREND_STRENGTH_FILTER", "true").lower() in ("1", "true", "yes")
```

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –û–±–∞ —Ñ–∏–ª—å—Ç—Ä–∞ **–í–ö–õ–Æ–ß–ï–ù–´** (`True`)

---

## üìç –ú–ï–°–¢–û –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

**–§–∞–π–ª:** `src/signals/core.py`

–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–ü–û–°–õ–ï baseline** –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `soft_entry_signal`:

```python
# Momentum —Ñ–∏–ª—å—Ç—Ä (–≤ –º—è–≥–∫–æ–º —Ä–µ–∂–∏–º–µ)
if MOMENTUM_FILTER_AVAILABLE and USE_MOMENTUM_FILTER and long_base_ok:
    mom_ok, mom_reason = check_momentum_filter(df, i, "long", strict_mode=False)
    if not mom_ok:
        logger.debug("LONG (soft) –æ—Ç–∫–ª–æ–Ω–µ–Ω Momentum —Ñ–∏–ª—å—Ç—Ä–æ–º: %s", mom_reason)
        long_base_ok = False

# Trend Strength —Ñ–∏–ª—å—Ç—Ä (–≤ –º—è–≥–∫–æ–º —Ä–µ–∂–∏–º–µ)
if TREND_STRENGTH_FILTER_AVAILABLE and USE_TREND_STRENGTH_FILTER and long_base_ok:
    trend_ok, trend_reason = check_trend_strength_filter(df, i, "long", strict_mode=False)
    if not trend_ok:
        logger.debug("LONG (soft) –æ—Ç–∫–ª–æ–Ω–µ–Ω Trend Strength —Ñ–∏–ª—å—Ç—Ä–æ–º: %s", trend_reason)
        long_base_ok = False
```

---

## üéØ –ü–û–†–Ø–î–û–ö –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø –§–ò–õ–¨–¢–†–û–í

1. **Volume Profile** (VP) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
2. **VWAP** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
3. **Baseline** (–æ—Å–ª–∞–±–ª–µ–Ω–Ω—ã–π, 70% —É—Å–ª–æ–≤–∏–π)
4. **Order Flow** - –ü–û–°–õ–ï baseline
5. **Microstructure** - –ü–û–°–õ–ï baseline
6. **Momentum** - –ü–û–°–õ–ï baseline ‚¨ÖÔ∏è
7. **Trend Strength** - –ü–û–°–õ–ï baseline ‚¨ÖÔ∏è
8. **AMT** - –ü–û–°–õ–ï baseline

---

## üí° –û–°–û–ë–ï–ù–ù–û–°–¢–ò

- –û–±–∞ —Ñ–∏–ª—å—Ç—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ **–º—è–≥–∫–æ–º —Ä–µ–∂–∏–º–µ** –¥–ª—è `soft_entry_signal`
- –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** - –µ—Å–ª–∏ –æ–¥–∏–Ω –±–ª–æ–∫–∏—Ä—É–µ—Ç, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
- –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —Ñ–∏–ª—å—Ç—Ä **–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç** —Å–∏–≥–Ω–∞–ª (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG

---

## üîÑ –í–û–ó–ú–û–ñ–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –ø–æ–¥–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ –¥–ª—è MFI, Stoch RSI, ADX
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
3. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –≤–∑–≤–µ—à–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç–æ–≥–æ OR/AND

