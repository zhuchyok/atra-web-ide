# üîç –õ–û–ì–ò–ö–ê –ü–†–û–í–ï–†–ö–ò –¢–†–ï–ù–î–ê –ë–ò–¢–ö–û–ò–ù–ê

## üìã **–û–¢–í–ï–¢ –ù–ê –í–ê–® –í–û–ü–†–û–°**

**–ù–ï–¢, –ª–æ–Ω–≥ —Å–∏–≥–Ω–∞–ª—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –ù–ï —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –±—ã—á—å–µ–º —Ç—Ä–µ–Ω–¥–µ –±–∏—Ç–∫–æ–∏–Ω–∞!**

–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

## üéØ **–ü–†–ê–í–ò–õ–ê –ì–ï–ù–ï–†–ê–¶–ò–ò –°–ò–ì–ù–ê–õ–û–í**

### ‚úÖ **LONG —Å–∏–≥–Ω–∞–ª—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è:**
- **–ü—Ä–∏ –ë–´–ß–¨–ï–ú —Ç—Ä–µ–Ω–¥–µ BTC** (btc_trend_status = True)
- **–ò–õ–ò –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ BTC** (USE_BTC_TREND_FILTER = False)

### ‚úÖ **SHORT —Å–∏–≥–Ω–∞–ª—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è:**
- **–ü—Ä–∏ –ú–ï–î–í–ï–ñ–¨–ï–ú —Ç—Ä–µ–Ω–¥–µ BTC** (btc_trend_status = False)
- **–ò–õ–ò –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–µ BTC** (USE_BTC_TREND_FILTER = False)

## üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø**

### 1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ BTC:**

```python
def btc_trend_filter_soft(df_btc):
    """–ú—è–≥–∫–∏–π —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ –±–∏—Ç–∫–æ–∏–Ω–∞: —Ç–æ–ª—å–∫–æ —Ü–µ–Ω–∞ > EMA200"""
    df_btc["ema200"] = ta.trend.EMAIndicator(df_btc["close"], window=200).ema_indicator()
    df_btc["trend"] = df_btc["close"] > df_btc["ema200"]
    return df_btc["trend"]

def btc_trend_filter(df_btc):
    """–°—Ç—Ä–æ–≥–∏–π —Ñ–∏–ª—å—Ç—Ä —Ç—Ä–µ–Ω–¥–∞ –±–∏—Ç–∫–æ–∏–Ω–∞: —Ü–µ–Ω–∞ > EMA200 –ò EMA25 —Ä–∞—Å—Ç—ë—Ç"""
    df_btc["ema200"] = ta.trend.EMAIndicator(df_btc["close"], window=200).ema_indicator()
    df_btc["ema25"] = ta.trend.EMAIndicator(df_btc["close"], window=25).ema_indicator()
    df_btc["trend"] = (df_btc["close"] > df_btc["ema200"]) & (df_btc["ema25"].diff() > 0)
    return df_btc["trend"]
```

### 2. **–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤:**

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–Ω–¥—É BTC
if signal_type == "LONG" and btc_trend_status:  # –ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥ BTC
    print(f"[DEBUG] {symbol}: –£—Å–ª–æ–≤–∏—è –¥–ª—è LONG –≤—ã–ø–æ–ª–Ω–µ–Ω—ã + –±—ã—á–∏–π —Ç—Ä–µ–Ω–¥ BTC, —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª!")
    # –°–∏–≥–Ω–∞–ª –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω
elif signal_type == "SHORT" and not btc_trend_status:  # –ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥ BTC
    print(f"[DEBUG] {symbol}: –£—Å–ª–æ–≤–∏—è –¥–ª—è SHORT –≤—ã–ø–æ–ª–Ω–µ–Ω—ã + –º–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥ BTC, —Ñ–æ—Ä–º–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª!")
    # –°–∏–≥–Ω–∞–ª –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω
else:
    print(f"[DEBUG] {symbol}: –°–∏–≥–Ω–∞–ª {signal_type} –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–Ω–¥—É BTC")
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–≥–Ω–∞–ª
```

## üìä **–ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ò–ú–ï–†–´**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥ BTC (btc_trend_status = True)**
- ‚úÖ **LONG —Å–∏–≥–Ω–∞–ª—ã:** –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø
- ‚ùå **SHORT —Å–∏–≥–Ω–∞–ª—ã:** –ù–ï –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø
- **–õ–æ–≥–∏–∫–∞:** –í –±—ã—á—å–µ–º —Ç—Ä–µ–Ω–¥–µ –∏—â–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –ª–æ–Ω–≥–æ–≤

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥ BTC (btc_trend_status = False)**
- ‚ùå **LONG —Å–∏–≥–Ω–∞–ª—ã:** –ù–ï –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø
- ‚úÖ **SHORT —Å–∏–≥–Ω–∞–ª—ã:** –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø
- **–õ–æ–≥–∏–∫–∞:** –í –º–µ–¥–≤–µ–∂—å–µ–º —Ç—Ä–µ–Ω–¥–µ –∏—â–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —à–æ—Ä—Ç–æ–≤

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –§–∏–ª—å—Ç—Ä BTC –æ—Ç–∫–ª—é—á–µ–Ω (USE_BTC_TREND_FILTER = False)**
- ‚úÖ **LONG —Å–∏–≥–Ω–∞–ª—ã:** –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø
- ‚úÖ **SHORT —Å–∏–≥–Ω–∞–ª—ã:** –ì–ï–ù–ï–†–ò–†–£–Æ–¢–°–Ø
- **–õ–æ–≥–∏–∫–∞:** –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç—Ä–µ–Ω–¥ BTC, —Ç–æ—Ä–≥—É–µ–º –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É

## üéØ **–ü–û–ß–ï–ú–£ –í –¢–ï–°–¢–ï –ë–´–õ–ò –¢–û–õ–¨–ö–û LONG –°–ò–ì–ù–ê–õ–´**

### **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞:**
- **BTC —Ç—Ä–µ–Ω–¥:** –ú–ï–î–í–ï–ñ–ò–ô (btc_trend_status = False)
- **–ù–∞–π–¥–µ–Ω–æ —Å–∏–≥–Ω–∞–ª–æ–≤:** 4 LONG —Å–∏–≥–Ω–∞–ª–∞

### **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
1. **–¢–µ—Å—Ç –±—ã–ª –∑–∞–ø—É—â–µ–Ω —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º BTC** (USE_BTC_TREND_FILTER = False)
2. **–°–∏—Å—Ç–µ–º–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Ç—Ä–µ–Ω–¥ BTC** –∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Å–∏–≥–Ω–∞–ª—ã —Ç–æ–ª—å–∫–æ –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É
3. **–†—ã–Ω–æ–∫ –±—ã–ª –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω** (RSI < 40), —á—Ç–æ —Å–æ–∑–¥–∞–ª–æ —É—Å–ª–æ–≤–∏—è –¥–ª—è LONG —Å–∏–≥–Ω–∞–ª–æ–≤
4. **SHORT —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å**, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–Ω–µ—Ç—ã —É–∂–µ –æ–ø—É—Å—Ç–∏–ª–∏—Å—å

## üîß **–ù–ê–°–¢–†–û–ô–ö–ò –§–ò–õ–¨–¢–†–ê**

### **–í config.py:**
```python
USE_BTC_TREND_FILTER = True  # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
BTC_TREND_FILTER_SOFT = True  # –ú—è–≥–∫–∏–π/—Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º
```

### **–ú—è–≥–∫–∏–π —Ä–µ–∂–∏–º (BTC_TREND_FILTER_SOFT = True):**
- **–ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥:** –¶–µ–Ω–∞ BTC > EMA200
- **–ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥:** –¶–µ–Ω–∞ BTC < EMA200

### **–°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (BTC_TREND_FILTER_SOFT = False):**
- **–ë—ã—á–∏–π —Ç—Ä–µ–Ω–¥:** –¶–µ–Ω–∞ BTC > EMA200 –ò EMA25 —Ä–∞—Å—Ç—ë—Ç
- **–ú–µ–¥–≤–µ–∂–∏–π —Ç—Ä–µ–Ω–¥:** –¶–µ–Ω–∞ BTC < EMA200 –ò–õ–ò EMA25 –ø–∞–¥–∞–µ—Ç

## üìà **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò**

### **–î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π:**

1. **–ë—ã—á–∏–π —Ä—ã–Ω–æ–∫:** –û—Å—Ç–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –¥–ª—è LONG —Å–∏–≥–Ω–∞–ª–æ–≤
2. **–ú–µ–¥–≤–µ–∂–∏–π —Ä—ã–Ω–æ–∫:** –û—Å—Ç–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤–∫–ª—é—á–µ–Ω–Ω—ã–º –¥–ª—è SHORT —Å–∏–≥–Ω–∞–ª–æ–≤
3. **–ë–æ–∫–æ–≤–æ–π —Ä—ã–Ω–æ–∫:** –ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
4. **–í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º —Ñ–∏–ª—å—Ç—Ä–∞

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:**
- **–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è:** –í–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä BTC
- **–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è:** –û—Ç–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä BTC
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ —É—Å–ª–æ–≤–∏—è–º —Ä—ã–Ω–∫–∞

---
**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç - LONG —Å–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –±—ã—á—å–µ–º —Ç—Ä–µ–Ω–¥–µ BTC, –∞ SHORT —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –º–µ–¥–≤–µ–∂—å–µ–º —Ç—Ä–µ–Ω–¥–µ BTC. –í —Ç–µ—Å—Ç–µ —Ñ–∏–ª—å—Ç—Ä –±—ã–ª –æ—Ç–∫–ª—é—á–µ–Ω, –ø–æ—ç—Ç–æ–º—É –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ LONG —Å–∏–≥–Ω–∞–ª—ã –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É.
