# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–ª–µ—á–æ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–ª–∞–Ω—Å–æ–º

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ FUTURES —Ä–µ–∂–∏–º–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–ª–µ—á–æ 1x –≤–º–µ—Å—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–ª–µ—á–∞ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤, –∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –ø–ª–µ—á–æ –∫ –±–∞–ª–∞–Ω—Å—É –∏–∑ –∫–æ–º–∞–Ω–¥—ã `/myreport`.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### 1. –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ `os`
**–ü—Ä–æ–±–ª–µ–º–∞**: `local variable 'os' referenced before assignment` –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö.

**–ü—Ä–∏—á–∏–Ω–∞**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `os` –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `os.path.isfile()`.

### 2. –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–ª–µ—á–∞ –¥–ª—è FUTURES
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –¥–µ–ø–æ–∑–∏—Ç–µ 0 —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ –ø–ª–µ—á–æ 1x –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤.

**–ü—Ä–∏—á–∏–Ω–∞**: –§—É–Ω–∫—Ü–∏—è `calculate_user_leverage()` –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ –¥–ª—è FUTURES —Ä–µ–∂–∏–º–∞.

### 3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: `Conflict: terminated by other getUpdates request; make sure that only one bot instance is running`

**–ü—Ä–∏—á–∏–Ω–∞**: –ó–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ `os`
–î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã `os` –≤ —Ñ—É–Ω–∫—Ü–∏–∏:
- `save_user_data_to_file()` - –¥–æ–±–∞–≤–ª–µ–Ω `import os` –∏ `import json`
- `button()` - –¥–æ–±–∞–≤–ª–µ–Ω `import os` –∏ `import json`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –ø–ª–µ—á–∞ –¥–ª—è FUTURES
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è FUTURES —Ä–µ–∂–∏–º–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø–ª–µ—á–æ–º 2x:

#### –í —Ñ—É–Ω–∫—Ü–∏–∏ `setup_trade_mode_futures`:
```python
# –ï—Å–ª–∏ –¥–µ–ø–æ–∑–∏—Ç —Ä–∞–≤–µ–Ω 0, –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ –¥–ª—è FUTURES
if deposit <= 0:
    user_data["leverage"] = 2  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ –¥–ª—è FUTURES
else:
    user_data["leverage"] = calculate_user_leverage(deposit, "futures", filter_mode)
```

#### –í —Ñ—É–Ω–∫—Ü–∏–∏ `setup_filter_mode_balanced`:
```python
# –ï—Å–ª–∏ –¥–µ–ø–æ–∑–∏—Ç —Ä–∞–≤–µ–Ω 0 –∏ —Ä–µ–∂–∏–º FUTURES, –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ
if deposit <= 0 and trade_mode == "futures":
    user_data["leverage"] = 2  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ –¥–ª—è FUTURES
else:
    user_data["leverage"] = calculate_user_leverage(deposit, trade_mode, "balanced")
```

#### –í —Ñ—É–Ω–∫—Ü–∏–∏ `setup_filter_mode_soft`:
```python
# –ï—Å–ª–∏ –¥–µ–ø–æ–∑–∏—Ç —Ä–∞–≤–µ–Ω 0 –∏ —Ä–µ–∂–∏–º FUTURES, –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ
if deposit <= 0 and trade_mode == "futures":
    user_data["leverage"] = 2  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ –¥–ª—è FUTURES
else:
    user_data["leverage"] = calculate_user_leverage(deposit, trade_mode, "soft")
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–ª–∞–Ω—Å–æ–º –∏–∑ `/myreport`
–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–ª–∞–Ω—Å –∏–∑ –∫–æ–º–∞–Ω–¥—ã `/myreport` –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–ª–µ—á–∞:

- **–î–ª—è –¥–µ–ø–æ–∑–∏—Ç–∞ 0**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ 2x –¥–ª—è FUTURES —Ä–µ–∂–∏–º–∞
- **–î–ª—è –¥–µ–ø–æ–∑–∏—Ç–∞ > 0**: –°–æ—Ö—Ä–∞–Ω–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–µ–ø–æ–∑–∏—Ç–∞ –∏ —Ä–µ–∂–∏–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `recalculate_balance_and_risks()`**: –ü–ª–µ—á–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

### 4. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –±–æ—Ç–∞
- –£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ `atra.lock`
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è `bot_manager.sh` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ `os`** - —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
2. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–ª–µ—á–∞** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤** - —É—Å—Ç—Ä–∞–Ω–µ–Ω
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–ª–∞–Ω—Å–æ–º** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

### üéØ –ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- **FUTURES —Ä–µ–∂–∏–º —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º 0**: –ü–ª–µ—á–æ 2x (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ)
- **FUTURES —Ä–µ–∂–∏–º —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º > 0**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ 1x-20x
- **SPOT —Ä–µ–∂–∏–º**: –ü–ª–µ—á–æ 1x (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `/myreport`**: –ü–ª–µ—á–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

### üìã –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```bash
./bot_manager.sh start    # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
./bot_manager.sh stop     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
./bot_manager.sh restart  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
./bot_manager.sh status   # –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–ª–µ—á–æ–º –¥–ª—è FUTURES —Ä–µ–∂–∏–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–ª–µ—á–æ 2x –¥–ª—è FUTURES —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º 0
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ –¥–ª—è FUTURES —Å –¥–µ–ø–æ–∑–∏—Ç–æ–º > 0
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –±–∞–ª–∞–Ω—Å–æ–º –∏–∑ –∫–æ–º–∞–Ω–¥—ã `/myreport`
- –ù–µ –∏–º–µ–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞