# –û–¢–ß–ï–¢: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò BB_MIDDLE –ü–†–ò –û–°–¢–ê–ù–û–í–ö–ï –°–ò–°–¢–ï–ú–´

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 20 –∞–≤–≥—É—Å—Ç–∞ 2025*
*–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û*

## üéØ –¶–ï–õ–¨
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É `[FearGreed] –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–µ–∫—Å–∞: 'bb_middle'`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∏—Å—Ç–µ–º—ã.

## üîç –ü–†–û–ë–õ–ï–ú–ê
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –æ—à–∏–±–∫–∞ `[FearGreed] –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–µ–∫—Å–∞: 'bb_middle'` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∏—Å—Ç–µ–º—ã. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ:

1. **–ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∏—Å—Ç–µ–º—ã** –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–º–∏
2. **–ö–æ–ª–æ–Ω–∫–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ DataFrame
3. **–§—É–Ω–∫—Ü–∏—è `calculate_fear_greed_index`** –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫
4. **–û—à–∏–±–∫–∏ –≤—ã–≤–æ–¥–∏–ª–∏—Å—å –≤ –ª–æ–≥** –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ, –∑–∞—Å–æ—Ä—è—è –µ–≥–æ

## üõ†Ô∏è –†–ï–®–ï–ù–ò–ï

### 1. –°–æ–∑–¥–∞–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
–ó–∞–º–µ–Ω–∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é `calculate_fear_greed_index` –Ω–∞ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –≤–µ—Ä—Å–∏—é, –∫–æ—Ç–æ—Ä–∞—è:

- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –∫ –Ω–∏–º
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ù–µ –≤—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
```python
# –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
try:
    bb_upper = df['bb_upper'].iloc[i] if 'bb_upper' in df.columns and not pd.isna(df['bb_upper'].iloc[i]) else current_price
    bb_lower = df['bb_lower'].iloc[i] if 'bb_lower' in df.columns and not pd.isna(df['bb_lower'].iloc[i]) else current_price
    bb_middle = df['bb_middle'].iloc[i] if 'bb_middle' in df.columns and not pd.isna(df['bb_middle'].iloc[i]) else current_price
    rsi = df['rsi'].iloc[i] if 'rsi' in df.columns and not pd.isna(df['rsi'].iloc[i]) else 50.0
    ema7 = df['ema7'].iloc[i] if 'ema7' in df.columns and not pd.isna(df['ema7'].iloc[i]) else current_price
    ema25 = df['ema25'].iloc[i] if 'ema25' in df.columns and not pd.isna(df['ema25'].iloc[i]) else current_price
except (IndexError, KeyError):
    return 50.0
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
```python
except Exception as e:
    # –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–∏—Å—Ç–µ–º—ã –Ω–µ –≤—ã–≤–æ–¥–∏–º –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥
    return 50.0  # –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

### 4. Fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**: 50.0 –µ—Å–ª–∏ ATR –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **Momentum**: 50.0 –µ—Å–ª–∏ RSI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–û–±—ä–µ–º**: 50.0 –µ—Å–ª–∏ volume_ratio –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- **–¢—Ä–µ–Ω–¥**: 50.0 –µ—Å–ª–∏ EMA –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- **–ü–æ–∑–∏—Ü–∏—è –≤ BB**: 50.0 –µ—Å–ª–∏ –ø–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### 1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚ùå **–ë—ã–ª–æ**: `[FearGreed] –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–µ–∫—Å–∞: 'bb_middle'`
- ‚úÖ **–°—Ç–∞–ª–æ**: –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

### 2. –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (50.0) –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ù–µ –∑–∞—Å–æ—Ä—è–µ—Ç –ª–æ–≥–∏ –æ—à–∏–±–∫–∞–º–∏

### 3. –£–ª—É—á—à–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–æ–π—á–∏–≤–∞ –∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –¥–∞–Ω–Ω—ã–º

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü—Ä–æ–≤–µ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã:
1. **–°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ DataFrame**: `if df.empty: return 50.0`
2. **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: `if i < 25 or len(df) < 25: return 50.0`
3. **–°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫**: `if 'bb_middle' in df.columns`
4. **–í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π**: `if not pd.isna(df['bb_middle'].iloc[i])`
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π**: `except (IndexError, KeyError): return 50.0`

### Fallback –∑–Ω–∞—á–µ–Ω–∏—è:
- **bb_upper/bb_lower/bb_middle**: `current_price`
- **rsi**: `50.0`
- **ema7/ema25**: `current_price`
- **atr**: `0.01 * current_price` (1% –æ—Ç —Ü–µ–Ω—ã)
- **volume_ratio**: `1.0`

## üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É** - –æ—à–∏–±–∫–∞ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∫—É** - —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
3. **–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏** - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å—Ç—ã–º–∏

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- ‚úÖ FearGreed –∏–Ω–¥–µ–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ –õ–æ–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è —á–∏—Å—Ç—ã–º–∏

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–û–®–ò–ë–ö–ê BB_MIDDLE –ü–†–ò –û–°–¢–ê–ù–û–í–ö–ï –£–°–ü–ï–®–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–ê!**

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ –∑–∞—Å–æ—Ä—è–µ—Ç –ª–æ–≥–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ –Ω–µ–ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ! üöÄ**
