# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ö—É—Ä—Å–æ—Ä –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ correlation_risk.py

## üîç –ü–†–û–ë–õ–ï–ú–ê

**–û—à–∏–±–∫–∞:** `ERROR:src.risk.correlation_risk:‚ùå –ö—É—Ä—Å–æ—Ä –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`

**–ü—Ä–∏—á–∏–Ω–∞:**
- `Database` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `use_connection_pool=True`
- –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pool: `self.conn = None` –∏ `self.cursor = None` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `with self._pool.get_connection() as conn:`
- –ù–æ `correlation_risk.py` –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `self.db.cursor` –Ω–∞–ø—Ä—è–º—É—é, —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å pool

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

**–û—Ç–∫–ª—é—á–µ–Ω connection pool –¥–ª—è `CorrelationRiskManager`:**

```python
# ‚ùå –ë–´–õ–û:
self.db = Database(self.db_path)

# ‚úÖ –°–¢–ê–õ–û:
self.db = Database(self.db_path, use_connection_pool=False)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ:**
- `CorrelationRiskManager` –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤)
- –ü—Ä—è–º–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø—Ä–æ—â–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ –¥–ª—è —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

- ‚úÖ –û—à–∏–±–∫–∞ "–ö—É—Ä—Å–æ—Ä –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ `CorrelationRiskManager` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã `risk_signal_history` —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ë–î

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-12-01  
**–§–∞–π–ª:** `src/risk/correlation_risk.py` (—Å—Ç—Ä–æ–∫–∞ 144)

