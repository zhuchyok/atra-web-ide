# ‚úÖ HITL —É–ª—É—á—à–µ–Ω–∏–µ - –Ω–µ—è–≤–Ω—ã–π feedback - –∑–∞–≤–µ—Ä—à–µ–Ω–æ

**–î–∞—Ç–∞:** 2025-11-13  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û**

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°–∏—Å—Ç–µ–º–∞ –Ω–µ—è–≤–Ω–æ–≥–æ feedback

**–§–∞–π–ª:** `observability/implicit_feedback.py`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ `collect_from_trade()` - —Å–±–æ—Ä feedback –∏–∑ –æ–¥–Ω–æ–π —Å–¥–µ–ª–∫–∏
- ‚úÖ `collect_from_trades_table()` - –º–∞—Å—Å–æ–≤—ã–π —Å–±–æ—Ä –∏–∑ –ë–î
- ‚úÖ `convert_to_lessons()` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è feedback –≤ lessons
- ‚úÖ `save_feedback()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ feedback –≤ JSON

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (pnl > 0) ‚Üí –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–π feedback
- –£–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (pnl < -5 USD) ‚Üí –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π feedback
- –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ FeedbackAggregator

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ `_load_implicit_feedback()` - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–µ—è–≤–Ω–æ–≥–æ feedback
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ lessons
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `collect_lessons()`

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ process_feedback.py

**–£–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –Ω–µ—è–≤–Ω–æ–≥–æ feedback
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ feedback –≤ JSON
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (positive/negative)

---

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä:

1. **–°–¥–µ–ª–∫–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**
   ```python
   # –í —Å–∏—Å—Ç–µ–º–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
   feedback = collector.collect_from_trade(
       symbol="BTCUSDT",
       direction="LONG",
       entry_price=50000,
       exit_price=51000,
       pnl_usd=10.0,
       pnl_percent=2.0,
       ...
   )
   # –†–µ–∑—É–ª—å—Ç–∞—Ç: ImplicitFeedback(feedback_type="positive", reason="profitable_trade")
   ```

2. **–ú–∞—Å—Å–æ–≤—ã–π —Å–±–æ—Ä –∏–∑ –ë–î:**
   ```python
   collector = get_implicit_feedback_collector()
   feedback_list = collector.collect_from_trades_table(lookback_days=7)
   # –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ ImplicitFeedback –æ–±—ä–µ–∫—Ç–æ–≤
   ```

3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ lessons:**
   ```python
   lessons = collector.convert_to_lessons(feedback_list)
   # –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ lessons –¥–ª—è Guidance System
   ```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ process_feedback:

```bash
python3 scripts/process_feedback.py --apply-guidance
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–¥–µ–ª–æ–∫ (AutoTradeAnalyzer)
2. –°–±–æ—Ä –Ω–µ—è–≤–Ω–æ–≥–æ feedback (ImplicitFeedbackCollector)
3. –ê–≥—Ä–µ–≥–∞—Ü–∏—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (FeedbackAggregator)
4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ lessons –≤ Guidance System

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** Feedback —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
2. **–ù–µ—è–≤–Ω–æ—Å—Ç—å:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–û–±—É—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å–∏—Å—Ç–µ–º—É –æ–±—É—á–µ–Ω–∏—è

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏

- **–ü–æ—Ä–æ–≥–∏:**
  - –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π feedback: pnl > 0 USD
  - –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π feedback: pnl < -5 USD
- **Lookback:** 7 –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ú–∏–Ω–∏–º—É–º –¥–ª—è —É—Ä–æ–∫–∞:** 3 feedback

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ú–Ω–æ–≥–æ–∞–≥–µ–Ω—Ç–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è** - –æ–±–º–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏
2. **Self-Evolving System** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

---

**–°–º. —Ç–∞–∫–∂–µ:**
- [AGENT_DEVELOPMENT_ROADMAP.md](./AGENT_DEVELOPMENT_ROADMAP.md) - –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
- [AGENT_OPS_COMPLETE.md](./AGENT_OPS_COMPLETE.md) - Agent Ops

