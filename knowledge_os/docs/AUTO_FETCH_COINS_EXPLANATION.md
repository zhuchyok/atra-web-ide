# üîç –ß–¢–û –¢–ê–ö–û–ï –ê–í–¢–û–ü–û–î–ë–û–† –ú–û–ù–ï–¢ (AUTO_FETCH_COINS)?

**–î–∞—Ç–∞:** 2025-12-13  
**–í–æ–ø—Ä–æ—Å:** –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä" –º–æ–Ω–µ—Ç?

---

## üìñ –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï

**–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä (AUTO_FETCH_COINS)** ‚Äî —ç—Ç–æ —Ä–µ–∂–∏–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —Å–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç** –∏–∑ –±–∏—Ä–∂–∏ —á–µ—Ä–µ–∑ API, –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ `COINS` –∏–∑ `config.py`.

---

## üîÑ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### **1. –ö–æ–≥–¥–∞ AUTO_FETCH_COINS = true:**

```python
# –í config.py
AUTO_FETCH_COINS = os.getenv("AUTO_FETCH_COINS", "true")  # –í–∫–ª—é—á–µ–Ω
```

**–õ–æ–≥–∏–∫–∞ –≤ `get_symbols()`:**
```python
if AUTO_FETCH_COINS:
    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º COINS –∏–∑ config.py
    # –ü–æ–ª—É—á–∞–µ–º –º–æ–Ω–µ—Ç—ã —á–µ—Ä–µ–∑ API
    symbols = await get_filtered_top_usdt_pairs_fast(
        top_n=500,      # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–æ–ø-500 –º–æ–Ω–µ—Ç
        final_limit=200 # –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ø-200 –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    )
    return ready_symbols
```

### **2. –§—É–Ω–∫—Ü–∏—è `get_filtered_top_usdt_pairs_fast()`:**

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. **–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–∏** (Binance API)
2. **–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä** USDT
3. **–§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º:**
   - –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤ (volume)
   - –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
   - –ò—Å–∫–ª—é—á–∞–µ—Ç —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã
   - –ò—Å–∫–ª—é—á–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
4. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-N –º–æ–Ω–µ—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ–ø-200)

**–ü—Ä–∏–º–µ—Ä:**
```python
async def get_filtered_top_usdt_pairs_fast(top_n=500, final_limit=200):
    """
    –ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–ø–æ–≤—ã–µ –º–æ–Ω–µ—Ç—ã —Å –±–∏—Ä–∂–∏ —á–µ—Ä–µ–∑ API
    
    Args:
        top_n: –°–∫–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å (500)
        final_limit: –°–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (200)
    
    Returns:
        List[str]: –°–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä:
        ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'SOLUSDT', ...]
    """
    # 1. –ó–∞–ø—Ä–æ—Å –∫ Binance API
    tickers = await binance_api.get_24h_ticker()
    
    # 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ–±—ä–µ–º—É
    filtered = filter_by_volume(tickers, min_volume=1000000)
    
    # 3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –æ–±—ä–µ–º—É (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É)
    sorted_coins = sort_by_volume(filtered)
    
    # 4. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ø-N
    return sorted_coins[:final_limit]
```

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –†–ï–ñ–ò–ú–û–í

### **AUTO_FETCH_COINS = false (–†—É—á–Ω–æ–π —Å–ø–∏—Å–æ–∫):**

```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ COINS –∏–∑ config.py
COINS = [
    "BTCUSDT",
    "ETHUSDT",
    "SOLUSDT",
    # ... –µ—â–µ 19 –º–æ–Ω–µ—Ç
]
# –ò—Ç–æ–≥–æ: 22 –º–æ–Ω–µ—Ç—ã (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Å–ø–∏—Å–æ–∫
- ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞ (–Ω–µ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å API)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–Ω–µ—Ç—ã
- ‚ùå –ú–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
- ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä (22 –º–æ–Ω–µ—Ç—ã)

---

### **AUTO_FETCH_COINS = true (–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä):**

```python
# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –º–æ–Ω–µ—Ç—ã —á–µ—Ä–µ–∑ API
symbols = await get_filtered_top_usdt_pairs_fast(top_n=500, final_limit=200)
# –ò—Ç–æ–≥–æ: ~200 –º–æ–Ω–µ—Ç (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞
- ‚úÖ –ë–æ–ª—å—à–µ –º–æ–Ω–µ—Ç (–¥–æ 200)
- ‚úÖ –í–∫–ª—é—á–∞–µ—Ç –Ω–æ–≤—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
- ‚úÖ –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º —Ä—ã–Ω–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚ùå –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–Ω—É–∂–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å API)
- ‚ùå –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ 2-6 –º–æ–Ω–µ—Ç, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

---

## üéØ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –í –ù–ê–®–ï–ô –°–ò–°–¢–ï–ú–ï

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```python
# AUTO_FETCH_COINS = true
if AUTO_FETCH_COINS:
    symbols = await get_filtered_top_usdt_pairs_fast(top_n=500, final_limit=200)
    # –ù–æ —Ç–æ–ª—å–∫–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–Ω–µ—Ç—ã —Å—á–∏—Ç–∞–ª–∏—Å—å –≥–æ—Ç–æ–≤—ã–º–∏
    # –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–ª—å–∫–æ 2-6 –º–æ–Ω–µ—Ç
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–ª–æ—Å—å 200 –º–æ–Ω–µ—Ç
- –ù–æ —Ç–æ–ª—å–∫–æ 2-6 –±—ã–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å

---

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```python
# –ü–†–ò–û–†–ò–¢–ï–¢ 0: intelligent_filter_system (143 –º–æ–Ω–µ—Ç—ã)
# –ü–†–ò–û–†–ò–¢–ï–¢ 1: COINS (22 –º–æ–Ω–µ—Ç—ã)
# –ü–†–ò–û–†–ò–¢–ï–¢ 2: AUTO_FETCH_COINS (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
```

**–¢–µ–ø–µ—Ä—å:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å–µ 143 –º–æ–Ω–µ—Ç—ã –∏–∑ `intelligent_filter_system`
- ‚úÖ –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback
- ‚úÖ –ú–æ–Ω–µ—Ç—ã —Å –±–∞–∑–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

---

## üìù –ü–†–ò–ú–ï–†–´

### **–ü—Ä–∏–º–µ—Ä 1: –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –≤–∫–ª—é—á–µ–Ω**

```python
AUTO_FETCH_COINS = true

# –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç:
GET https://api.binance.com/api/v3/ticker/24hr

# –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–æ–Ω–µ—Ç:
[
    {"symbol": "BTCUSDT", "volume": "1000000000"},
    {"symbol": "ETHUSDT", "volume": "500000000"},
    {"symbol": "BNBUSDT", "volume": "200000000"},
    # ... –µ—â–µ 497 –º–æ–Ω–µ—Ç
]

# –§–∏–ª—å—Ç—Ä—É–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ø-200:
["BTCUSDT", "ETHUSDT", "BNBUSDT", ..., "NEWCOINUSDT"]
```

### **–ü—Ä–∏–º–µ—Ä 2: –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –≤—ã–∫–ª—é—á–µ–Ω**

```python
AUTO_FETCH_COINS = false

# –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç COINS –∏–∑ config.py:
COINS = ["BTCUSDT", "ETHUSDT", "SOLUSDT", ...]  # 22 –º–æ–Ω–µ—Ç—ã

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —ç—Ç–∏ 22 –º–æ–Ω–µ—Ç—ã
```

---

## üîß –¢–ï–ö–£–©–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### **–í config.py:**

```python
AUTO_FETCH_COINS = os.getenv("AUTO_FETCH_COINS", "false")  # üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: false
```

**–ó–Ω–∞—á–µ–Ω–∏–µ:**
- `false` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º `COINS` –∏–ª–∏ `intelligent_filter_system` (143 –º–æ–Ω–µ—Ç—ã)
- `true` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä —á–µ—Ä–µ–∑ API (–¥–æ 200 –º–æ–Ω–µ—Ç)

---

## ‚úÖ –ò–¢–û–ì

**–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä (AUTO_FETCH_COINS):**
- –≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–Ω–µ—Ç —á–µ—Ä–µ–∑ API –±–∏—Ä–∂–∏
- –í–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ `COINS`
- –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –¥–æ 200 –º–æ–Ω–µ—Ç
- –ù–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–Ω–µ—Ç

**–¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
- `AUTO_FETCH_COINS = false` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º 143 –º–æ–Ω–µ—Ç—ã –∏–∑ `intelligent_filter_system`
- –ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback, –µ—Å–ª–∏ `intelligent_filter_system` –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

