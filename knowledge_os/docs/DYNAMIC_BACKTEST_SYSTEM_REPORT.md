# üöÄ –°–ò–°–¢–ï–ú–ê –ö–û–ú–ü–õ–ï–ö–°–ù–û–ì–û –ë–≠–ö–¢–ï–°–¢–ê –° –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ú–ò –ü–ê–†–ê–ú–ï–¢–†–ê–ú–ò

## üìä –û–ë–ó–û–† –°–ò–°–¢–ï–ú–´

–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

### ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç** (`comprehensive_dynamic_backtest.py`)
2. **üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π** (`dynamic_strategy_comparison.py`)
3. **‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** (`dynamic_parameters_optimization.py`)
4. **üéØ –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** (`run_dynamic_backtest.py`)

## üîß –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ï –ü–ê–†–ê–ú–ï–¢–†–´

### ‚ö° **1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ (1-20x)**

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞:**
```python
def calculate_dynamic_leverage(self, row: pd.Series) -> float:
    base_leverage = self.base_leverage

    # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞
    trend_multiplier = min(2.0, 1.0 + row['trend_strength'] * 0.5)

    # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ (ATR)
    atr_pct = row['atr'] / row['Close'] * 100
    volatility_multiplier = 1.0
    if atr_pct < 1.0:  # –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
        volatility_multiplier = 1.2
    elif atr_pct > 3.0:  # –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
        volatility_multiplier = 0.8

    # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ RSI
    rsi_multiplier = 1.0
    if row['rsi'] < 30:  # –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å
        rsi_multiplier = 1.1
    elif row['rsi'] > 70:  # –ü–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å
        rsi_multiplier = 0.9

    # –ò—Ç–æ–≥–æ–≤–æ–µ –ø–ª–µ—á–æ
    dynamic_leverage = base_leverage * trend_multiplier * volatility_multiplier * rsi_multiplier

    # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ—Ç 1 –¥–æ 20
    return max(1.0, min(dynamic_leverage, 20.0))
```

**–õ–æ–≥–∏–∫–∞:**
- **–°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–ª–µ—á–æ
- **–ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–ª–µ—á–æ
- **–ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å** ‚Üí –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –ø–ª–µ—á–æ
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –º–∏–Ω–∏–º—É–º 1x, –º–∞–∫—Å–∏–º—É–º 20x

### ‚ö†Ô∏è **2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫ (0.5-5%)**

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞:**
```python
def calculate_dynamic_risk(self, row: pd.Series) -> float:
    base_risk = self.base_risk

    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
    atr_pct = row['atr'] / row['Close'] * 100
    volatility_adjustment = 1.0
    if atr_pct < 1.0:
        volatility_adjustment = 1.2  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∏—Å–∫ –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
    elif atr_pct > 3.0:
        volatility_adjustment = 0.8  # –£–º–µ–Ω—å—à–∞–µ–º —Ä–∏—Å–∫ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—ä–µ–º–∞
    volume_adjustment = 1.0
    if row['volume_ratio'] > 1.5:
        volume_adjustment = 1.1  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∏—Å–∫ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –æ–±—ä–µ–º–µ
    elif row['volume_ratio'] < 0.5:
        volume_adjustment = 0.9  # –£–º–µ–Ω—å—à–∞–µ–º —Ä–∏—Å–∫ –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –æ–±—ä–µ–º–µ

    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞
    trend_adjustment = 1.0
    if row['trend_strength'] > 2.0:
        trend_adjustment = 1.1  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∏—Å–∫ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
    elif row['trend_strength'] < 0.5:
        trend_adjustment = 0.9  # –£–º–µ–Ω—å—à–∞–µ–º —Ä–∏—Å–∫ –ø—Ä–∏ —Å–ª–∞–±–æ–º —Ç—Ä–µ–Ω–¥–µ

    # –ò—Ç–æ–≥–æ–≤—ã–π —Ä–∏—Å–∫
    dynamic_risk = base_risk * volatility_adjustment * volume_adjustment * trend_adjustment

    # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –æ—Ç 0.5 –¥–æ 5%
    return max(0.5, min(dynamic_risk, 5.0))
```

**–õ–æ–≥–∏–∫–∞:**
- **–ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∏—Å–∫
- **–í—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∏—Å–∫
- **–°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∏—Å–∫
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –º–∏–Ω–∏–º—É–º 0.5%, –º–∞–∫—Å–∏–º—É–º 5%

### üéØ **3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç—ã (1-10%)**

**–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞:**
```python
def calculate_dynamic_tp_levels(self, row: pd.Series, side: str) -> Tuple[float, float]:
    atr = row['atr']
    price = row['Close']

    # –ë–∞–∑–æ–≤—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ ATR
    tp1_mult = 2.0
    tp2_mult = 4.0

    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∏—Ä–∏–Ω—ã Bollinger Bands
    bb_width = row['bb_width']
    if bb_width > 10:  # –®–∏—Ä–æ–∫–∏–µ –ø–æ–ª–æ—Å—ã - —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º TP
        tp1_mult *= 1.2
        tp2_mult *= 1.2
    elif bb_width < 5:  # –£–∑–∫–∏–µ –ø–æ–ª–æ—Å—ã - —É–º–µ–Ω—å—à–∞–µ–º TP
        tp1_mult *= 0.8
        tp2_mult *= 0.8

    # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞
    trend_strength = row['trend_strength']
    if trend_strength > 2.0:  # –°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ - —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º TP
        tp1_mult *= 1.3
        tp2_mult *= 1.3
    elif trend_strength < 0.5:  # –°–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥ - —É–º–µ–Ω—å—à–∞–µ–º TP
        tp1_mult *= 0.7
        tp2_mult *= 0.7

    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É—Ä–æ–≤–Ω–∏ TP
    if side == 'long':
        tp1 = price + atr * tp1_mult
        tp2 = price + atr * tp2_mult
    else:
        tp1 = price - atr * tp1_mult
        tp2 = price - atr * tp2_mult

    return tp1, tp2
```

**–õ–æ–≥–∏–∫–∞:**
- **–®–∏—Ä–æ–∫–∏–µ –ø–æ–ª–æ—Å—ã –ë–æ–ª–ª–∏–Ω–¥–∂–µ—Ä–∞** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º TP
- **–°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥** ‚Üí —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º TP
- **–£–∑–∫–∏–µ –ø–æ–ª–æ—Å—ã** ‚Üí —É–º–µ–Ω—å—à–∞–µ–º TP
- **–°–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥** ‚Üí —É–º–µ–Ω—å—à–∞–µ–º TP

### üîÑ **4. –°–∏—Å—Ç–µ–º–∞ DCA (Dollar Cost Averaging)**

**–£—Å–ª–æ–≤–∏—è –¥–ª—è DCA:**
```python
def should_dca(self, position: Dict, row: pd.Series) -> bool:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–æ—à–ª–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ DCA
    if position['dca_levels']:
        last_dca_time = position['dca_levels'][-1]['time']
        time_diff = (row.name - last_dca_time).total_seconds() / 3600  # —á–∞—Å—ã
        if time_diff < 4:  # –ú–∏–Ω–∏–º—É–º 4 —á–∞—Å–∞ –º–µ–∂–¥—É DCA
            return False

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—ä–µ–º –∏ RSI
    volume_ok = row['volume_ratio'] > 1.0
    rsi_ok = (position['side'] == 'long' and row['rsi'] < 40) or \
             (position['side'] == 'short' and row['rsi'] > 60)

    return volume_ok and rsi_ok
```

**–õ–æ–≥–∏–∫–∞ DCA:**
- **–¶–µ–Ω–∞ –¥–≤–∏–∂–µ—Ç—Å—è –ø—Ä–æ—Ç–∏–≤ –ø–æ–∑–∏—Ü–∏–∏** (2% –¥–ª—è –ª–æ–Ω–≥–∞, -2% –¥–ª—è —à–æ—Ä—Ç–∞)
- **–ú–∏–Ω–∏–º—É–º 4 —á–∞—Å–∞** –º–µ–∂–¥—É DCA
- **–í—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º** (>1.0 –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ)
- **–ü–æ–¥—Ö–æ–¥—è—â–∏–π RSI** (<40 –¥–ª—è –ª–æ–Ω–≥–∞, >60 –¥–ª—è —à–æ—Ä—Ç–∞)
- **–£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞ 50%** –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ò–ù–î–ò–ö–ê–¢–û–†–´

### **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**

1. **EMA (7, 25, 50)** - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞
2. **ATR (14)** - –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
3. **RSI (14)** - –¥–ª—è –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏
4. **Bollinger Bands (20, 2)** - –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ —É—Ä–æ–≤–Ω–µ–π
5. **Volume MA (20)** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ–±—ä–µ–º–∞
6. **Momentum (5)** - –¥–ª—è –∏–º–ø—É–ª—å—Å–∞
7. **Trend Strength** - —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞

### **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:**
```python
def generate_signals(self) -> pd.DataFrame:
    df = self.df.copy()

    # –°–∏–≥–Ω–∞–ª—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ EMA
    df['long_signal'] = (df['ema7'] > df['ema25']) & (df['ema25'] > df['ema50'])
    df['short_signal'] = (df['ema7'] < df['ema25']) & (df['ema25'] < df['ema50'])

    # –§–∏–ª—å—Ç—Ä—ã
    df['volume_filter'] = df['volume_ratio'] > 0.8
    df['rsi_filter'] = (df['rsi'] > 30) & (df['rsi'] < 70)
    df['bb_filter'] = (df['Close'] > df['bb_lower']) & (df['Close'] < df['bb_upper'])

    # –ò—Ç–æ–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
    df['long_entry'] = df['long_signal'] & df['volume_filter'] & df['rsi_filter'] & df['bb_filter']
    df['short_entry'] = df['short_signal'] & df['volume_filter'] & df['rsi_filter'] & df['bb_filter']

    return df
```

## üéØ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨ –°–ò–°–¢–ï–ú–´

### **1. –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç**
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ DCA
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### **2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π**
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ TP
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å DCA

### **3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ —Ä–∏—Å–∫–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ –ø–ª–µ—á–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è DCA –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ª—É—á—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### **4. –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç**
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (3 –º–µ—Å—è—Ü–∞)
- ‚úÖ –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (1 –≥–æ–¥)
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## üìà –ú–ï–¢–†–ò–ö–ò –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò

### **–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**

1. **–û–±—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** - –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
2. **–í–∏–Ω—Ä–µ–π—Ç** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
3. **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞** - —Ä–∏—Å–∫-—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
4. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —É–±—ã—Ç–∫–∏
5. **–°—Ä–µ–¥–Ω–µ–µ –ø–ª–µ—á–æ** - —Å—Ä–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –ø–ª–µ—á–æ
6. **–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫** - —Å—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É
7. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ DCA** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–π

### **–§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞:**

**–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞:**
```python
returns = np.diff(equity_curve) / equity_curve[:-1]
sharpe_ratio = np.mean(returns) / np.std(returns) * np.sqrt(252)
```

**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞:**
```python
equity_curve = np.array(equity_curve)
peak = np.maximum.accumulate(equity_curve)
drawdown = (equity_curve - peak) / peak * 100
max_drawdown = np.min(drawdown)
```

## üöÄ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–ò–°–¢–ï–ú–´

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
pip install -r requirements.txt
```

### **–ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã:**
```bash
python run_dynamic_backtest.py
```

### **–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏:**

1. **üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –±—ç–∫—Ç–µ—Å—Ç** - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. **üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
3. **‚öôÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –ø–æ–∏—Å–∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. **üéØ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç** - –±—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞ 3 –º–µ—Å—è—Ü–∞
5. **üìà –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞ 1 –≥–æ–¥

### **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```python
from comprehensive_dynamic_backtest import DynamicBacktest

# –°–æ–∑–¥–∞–µ–º –±—ç–∫—Ç–µ—Å—Ç
backtest = DynamicBacktest(
    symbol="BTC-USD",
    start_date="2024-01-01",
    end_date="2024-12-31",
    initial_balance=10000,
    base_risk=2.0,
    base_leverage=1.0,
    dca_enabled=True,
    dca_levels=3
)

# –ó–∞–ø—É—Å–∫–∞–µ–º –±—ç–∫—Ç–µ—Å—Ç
backtest.run_backtest()

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç
backtest.generate_report()
```

## üìä –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –°–ò–°–¢–ï–ú–´

### **‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —Ä—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
- –£—á–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, —Ç—Ä–µ–Ω–¥–∞ –∏ –æ–±—ä–µ–º–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏

### **‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å:**
- –£—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π –∏ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–π
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞ –∏ –≤—ã—Ö–æ–¥–∞
- –°–∏—Å—Ç–µ–º–∞ DCA –¥–ª—è —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è

### **‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
- –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### **‚úÖ –ì–∏–±–∫–æ—Å—Ç—å:**
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –†–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–æ–≤

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### **–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö:**
1. –ù–∞—á–Ω–∏—Ç–µ —Å –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞ (–æ–ø—Ü–∏—è 4)
2. –ò–∑—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### **–î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–æ–ø—Ü–∏—è 5)
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. –°—Ä–∞–≤–Ω–∏—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
1. –ò–∑—É—á–∏—Ç–µ –∫–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
3. –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

## üîÆ –ü–õ–ê–ù–´ –†–ê–ó–í–ò–¢–ò–Ø

### **–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
   - MACD, Stochastic, Williams %R
   - Ichimoku, Fibonacci —É—Ä–æ–≤–Ω–∏
   - Volume Profile, Order Flow

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:**
   - –°–∫–∞–ª—å–ø–∏–Ω–≥
   - –°–≤–∏–Ω–≥-—Ç—Ä–µ–π–¥–∏–Ω–≥
   - –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è
   - –ê—Ä–±–∏—Ç—Ä–∞–∂

3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - Monte Carlo —Å–∏–º—É–ª—è—Ü–∏—è
   - –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π
   - –ü–æ—Ä—Ç—Ñ–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
   - –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∏—Ä–∂–∞–º
   - –†–µ–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è
   - Telegram –±–æ—Ç
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–°–æ–∑–¥–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π **–∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

### **–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–ª–µ—á–æ** (1-20x)
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫** (0.5-5%)
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç—ã** (1-10%)
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ DCA** —Å —É–º–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏
- ‚úÖ **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π** –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**
- üöÄ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
- üìä –ì–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- üìà –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏.

---
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024-01-27
**–í–µ—Ä—Å–∏—è:** 1.0
**–ê–≤—Ç–æ—Ä:** AI Assistant