# üì∞ –ê–ù–ê–õ–ò–ó –ö–û–ú–ê–ù–î–´ SET_NEWS_MODE

## üéØ **–°—Ç–∞—Ç—É—Å –∫–æ–º–∞–Ω–¥—ã:**

### ‚ùå **–ö–æ–º–∞–Ω–¥–∞ –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê:**
- **–§—É–Ω–∫—Ü–∏—è `set_news_mode_cmd`** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `telegram_bot.py`
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥—ã** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `run_telegram_bot()`
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `button()`

### ‚úÖ **–ù–û –ª–æ–≥–∏–∫–∞ –ó–ê–î–ï–ô–°–¢–í–û–í–ê–ù–ê:**
- **–ü–∞—Ä–∞–º–µ—Ç—Ä `news_filter_mode`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `signal_live.py`
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã `NEWS_FILTER_MODES`** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `config.py`
- **–§—É–Ω–∫—Ü–∏—è `add_user`** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `news_mode`

## üîç **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `news_filter_mode`:**

### üìã **–í signal_live.py (—Å—Ç—Ä–æ–∫–∏ 2250, 2645):**
```python
news_mode = user_data.get('news_filter_mode', 'conservative')
mode_settings = NEWS_FILTER_MODES.get(news_mode, NEWS_FILTER_MODES['conservative'])

if mode_settings['enable_negative_news']:
    # –õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –Ω–æ–≤–æ—Å—Ç—è–º
    if user_data.get('trade_mode', 'spot') == 'futures':
        # –î–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ - –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ = SHORT —Å–∏–≥–Ω–∞–ª
        negative_news_flag = True
    else:
        # –î–ª—è spot - –±–ª–æ–∫–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª—ã
        continue
```

### üìã **–í telegram_bot.py:**
```python
# –í add_user_cmd (—Å—Ç—Ä–æ–∫–∞ 4218):
news_mode = context.args[4] if len(context.args) > 4 else "conservative"

# –í list_users_cmd (—Å—Ç—Ä–æ–∫–∞ 4354):
news_mode = user_data.get('news_filter_mode', 'conservative')
```

### üìã **–í manage_users.py:**
```python
# –í add_user (—Å—Ç—Ä–æ–∫–∞ 172):
news_mode = sys.argv[6] if len(sys.argv) > 6 else "conservative"
```

## üéØ **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã –Ω–æ–≤–æ—Å—Ç–µ–π:**

### üìä **–†–µ–∂–∏–º—ã –≤ `NEWS_FILTER_MODES`:**

| –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ | –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ | –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ SHORT |
|-------|----------|-------------------|-------------------|------------------|
| **conservative** | –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π - –ø–æ–ª–Ω—ã–π –Ω–æ–≤–æ—Å—Ç–Ω–æ–π —Ñ–æ–Ω | ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç LONG | ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç |
| **aggressive** | –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π - —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ | ‚ùå –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç LONG | ‚ùå –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç |
| **technical_only** | –¢–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ | ‚ùå –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç | ‚ùå –ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç | ‚ùå –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç |
| **news_only** | –¢–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã | ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç | ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç LONG | ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç |

## üîß **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∞:**

### üì∞ **–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏:**
```python
if news_blocked is True:
    if mode_settings['enable_negative_news']:
        if trade_mode == 'futures':
            # SHORT —Å–∏–≥–Ω–∞–ª –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤
            negative_news_flag = True
        else:
            # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è spot
            continue
```

### üì∞ **–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏:**
```python
if positive_news_found:
    if mode_settings['enable_positive_news']:
        # LONG —Å–∏–≥–Ω–∞–ª
        positive_news_flag = True
```

### üì∞ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ SHORT:**
```python
if mode_settings['block_short_on_positive']:
    # –ë–ª–æ–∫–∏—Ä—É–µ–º SHORT –ø—Ä–∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç—è—Ö
```

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞:**

### ‚ùå **–ö–æ–º–∞–Ω–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ä–µ–∂–∏–º** —á–µ—Ä–µ–∑ Telegram
2. **–†–µ–∂–∏–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
3. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `conservative`**

### ‚úÖ **–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**

#### **1. –§—É–Ω–∫—Ü–∏—è `set_news_mode_cmd`:**
```python
async def set_news_mode_cmd(update, context):
    # –õ–æ–≥–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∂–∏–º–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
```

#### **2. –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞:**
```python
InlineKeyboardButton("üì∞ –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π", callback_data="news_mode_conservative")
InlineKeyboardButton("üöÄ –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π", callback_data="news_mode_aggressive")
InlineKeyboardButton("üìä –¢–æ–ª—å–∫–æ —Ç–µ—Ö.–∞–Ω–∞–ª–∏–∑", callback_data="news_mode_technical_only")
InlineKeyboardButton("üì∞ –¢–æ–ª—å–∫–æ –Ω–æ–≤–æ—Å—Ç–∏", callback_data="news_mode_news_only")
```

#### **3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫:**
```python
elif action.startswith("news_mode_"):
    mode = action.replace("news_mode_", "")
    user_data["news_filter_mode"] = mode
```

## üìä **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

### ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `set_news_mode`:**
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –ª–æ–≥–∏–∫–µ
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç** - —Å—Ä–µ–¥–Ω–∏–π (–ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å)

### üéØ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:**
**–õ–æ–≥–∏–∫–∞ –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç**, –Ω–æ **–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å —Ä–µ–∂–∏–º —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `/add_user` –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ `user_data.json`.

---
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–º–∞–Ω–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–¥–æ–±–∞–≤–∏—Ç—å UI)