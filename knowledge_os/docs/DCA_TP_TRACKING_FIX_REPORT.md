# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è TP –¥–ª—è DCA –ø–æ–∑–∏—Ü–∏–π

**–î–∞—Ç–∞:** 5 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª:
> "–±—ã–ª —Å–∏–≥–Ω–∞–ª –¥—Ü–∞ –¥–ª—è TUTUSDT
> —è —É—Å—Ä–µ–¥–Ω–∏–ª—Å—è –ø–æ –¥–∞–Ω–Ω–æ–º—É —Å–∏–≥–Ω–∞–ª—É
> —Ç–ø1 –∏ —Ç–ø2 –±—ã–ª–∏ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã –∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å
> –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–ø1 –∏ —Ç–ø2 –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ (–≤–∏–¥–∏–º–æ –Ω–∞ –¥—Ü–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–ª–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç/–Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–ø1 –∏ —Ç–ø2 –Ω–æ–≤—ã–µ —Å —É—á–µ—Ç–æ–º —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è —á—Ç–æ –º—ã —É—Å—Ä–µ–¥–Ω–∏–ª–∏—Å—å –∏ —Ç–µ–ø–µ—Ä—å –Ω–æ–≤—ã–µ —Ç–ø1 –∏ —Ç–ø2 –∞ –Ω–µ —Å—Ç–∞—Ä—ã–µ)"

### –°–∏–≥–Ω–∞–ª DCA:
```
üìà DCA –ø–æ–∑–∏—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞!

üî∏ –°–∏–º–≤–æ–ª: TUTUSDT
üî∏ DCA #3
üî∏ –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 0.10
üî∏ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 1308.768751
üî∏ –ü–ª–µ—á–æ: 5.0x
üî∏ –†–∏—Å–∫: 130.00
üî∏ –°—É–º–º–∞ –≤—Ö–æ–¥–∞: 130
üî∏ –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: 0.10
üî∏ TP1: 0.10 (+0.81% / +4.05% —Å –ø–ª–µ—á–æ–º)
üî∏ TP2: 0.10 (+0.98% / +4.89% —Å –ø–ª–µ—á–æ–º)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ TP1 –∏ TP2
- ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP1 –∏ TP2 –ù–ï –ø—Ä–∏—à–ª–∏

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã:

–ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è DCA —Å–∏–≥–Ω–∞–ª–∞ —Å–∏—Å—Ç–µ–º–∞:
1. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ** —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É
2. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ** —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ TP1 –∏ TP2 –æ—Ç –Ω–æ–≤–æ–π —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
3. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ** –æ–±–Ω–æ–≤–ª—è–µ—Ç `qty`, `entry_price`, `n_dca` –≤ –ø–æ–∑–∏—Ü–∏–∏
4. ‚ùå **–ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç** `tp1` –∏ `tp2` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `check_take_profits()` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å **—Å—Ç–∞—Ä—ã–µ TP1 –∏ TP2** (–æ—Ç –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞), –∞ –Ω–µ –Ω–æ–≤—ã–µ, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –æ—Ç –Ω–æ–≤–æ–π —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã –ø–æ—Å–ª–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è.

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:

**–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥:**
- –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: 0.12
- TP1: 0.1212 (+1%)
- TP2: 0.1224 (+2%)

**–ü–æ—Å–ª–µ DCA #3:**
- –ù–æ–≤–∞—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: 0.10
- –ù–æ–≤—ã–µ TP1: 0.10081 (+0.81%)
- –ù–æ–≤—ã–µ TP2: 0.10098 (+0.98%)
- **–ù–æ –≤ –ø–æ–∑–∏—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Å—Ç–∞—Ä—ã–µ TP1: 0.1212 –∏ TP2: 0.1224**

–ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 0.10081 –∏ 0.10098, —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ä—ã–µ TP (0.1212 –∏ 0.1224), –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã, –∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ DCA:

**–ë–´–õ–û:**
```python
# –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
existing_position["qty"] = total_qty
existing_position["entry_price"] = avg_price_new
existing_position["n_dca"] = existing_position.get("n_dca", 0) + 1
existing_position["risk_amount"] = existing_position.get("risk_amount", 0) + dca_risk_amount
existing_position["risk_pct"] = dynamic_risk_pct
existing_position["leverage"] = dynamic_leverage
```

**–î–û–õ–ñ–ù–û –ë–´–¢–¨:**
```python
# –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –í–°–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∫–ª—é—á–∞—è TP1 –∏ TP2
existing_position["qty"] = total_qty
existing_position["entry_price"] = avg_price_new
existing_position["n_dca"] = existing_position.get("n_dca", 0) + 1
existing_position["risk_amount"] = existing_position.get("risk_amount", 0) + dca_risk_amount
existing_position["risk_pct"] = dynamic_risk_pct
existing_position["leverage"] = dynamic_leverage
# –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –æ–±–Ω–æ–≤–ª—è–µ–º TP1 –∏ TP2 —Å –Ω–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
existing_position["tp1"] = tp1  # –ù–æ–≤—ã–π TP1 –æ—Ç –Ω–æ–≤–æ–π —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
existing_position["tp2"] = tp2  # –ù–æ–≤—ã–π TP2 –æ—Ç –Ω–æ–≤–æ–π —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã
```

### –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏:

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:
1. **`telegram_handlers.py`** - —Ñ—É–Ω–∫—Ü–∏—è `handle_accept_button()` (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è DCA —Å–∏–≥–Ω–∞–ª–∞)
2. **`telegram_bot_trading.py`** - —Ñ—É–Ω–∫—Ü–∏—è `accept_signal_cmd()` (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã `/accept` –¥–ª—è DCA)

### –§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **`telegram_handlers.py`** - –¥–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `tp1` –∏ `tp2` –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ DCA –∫–Ω–æ–ø–∫–∏
2. **`telegram_bot_trading.py`** - –¥–æ–±–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `tp1` –∏ `tp2` –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ DCA –∫–æ–º–∞–Ω–¥—ã

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ –ü—Ä–∏ –ø—Ä–∏–Ω—è—Ç–∏–∏ DCA —Å–∏–≥–Ω–∞–ª–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–∏—Ç `tp1` –∏ `tp2` –≤ –ø–æ–∑–∏—Ü–∏–∏
2. ‚úÖ –§—É–Ω–∫—Ü–∏—è `check_take_profits()` –±—É–¥–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å **–Ω–æ–≤—ã–µ TP1 –∏ TP2**
3. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP1 –∏ TP2 –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. ‚úÖ –ü–æ–∑–∏—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ –Ω–æ–≤—ã–º TP —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. ‚úÖ –ü—Ä–∏–Ω—è—Ç–∏–µ DCA —Å–∏–≥–Ω–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç `tp1` –∏ `tp2` –≤ –ø–æ–∑–∏—Ü–∏–∏
2. ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/positions` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ TP1 –∏ TP2 –ø–æ—Å–ª–µ DCA
3. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP1 –ø—Ä–∏—Ö–æ–¥—è—Ç
4. ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP2 –ø—Ä–∏—Ö–æ–¥—è—Ç
5. ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ TP1 (50%) —Ä–∞–±–æ—Ç–∞–µ—Ç
6. ‚úÖ –ü–æ–ª–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ TP2 (100%) —Ä–∞–±–æ—Ç–∞–µ—Ç

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è TP:
```python
logging.info(f"[DCA] {symbol}: –û–±–Ω–æ–≤–ª–µ–Ω—ã TP –ø–æ—Å–ª–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è #{{n_dca}}: "
             f"TP1: {tp1:.6f} ‚Üí {new_tp1:.6f}, "
             f"TP2: {tp2:.6f} ‚Üí {new_tp2:.6f}")
```

### 2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ TP:
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–∏–Ω—è—Ç–∏–∏ DCA:
```
‚úÖ DCA –°–ò–ì–ù–ê–õ –ü–†–ò–ù–Ø–¢!

üìä –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ü–û–ó–ò–¶–ò–Ø TUTUSDT:
‚Ä¢ –ù–æ–≤–∞—è —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: 0.10
‚Ä¢ –û–±—â–∏–π –æ–±—ä—ë–º: 1308.768751
‚Ä¢ –£—Å—Ä–µ–¥–Ω–µ–Ω–∏–π: 3/5

üéØ –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –¢–ï–ô–ö-–ü–†–û–§–ò–¢–´:
‚Ä¢ TP1: 0.10081 (+0.81%) ‚Üê –æ–±–Ω–æ–≤–ª–µ–Ω–æ
‚Ä¢ TP2: 0.10098 (+0.98%) ‚Üê –æ–±–Ω–æ–≤–ª–µ–Ω–æ

‚ö†Ô∏è –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ TP
```

## üìù –ó–∞–º–µ—Ç–∫–∏

- –≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π
- –ü—Ä–æ–±–ª–µ–º–∞ –∫–∞—Å–∞–µ—Ç—Å—è –í–°–ï–• DCA –ø–æ–∑–∏—Ü–∏–π, –Ω–µ —Ç–æ–ª—å–∫–æ TUTUSDT
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –∫–æ –≤—Å–µ–º –ø—É—Ç—è–º –ø—Ä–∏–Ω—è—Ç–∏—è DCA —Å–∏–≥–Ω–∞–ª–∞ (–∫–Ω–æ–ø–∫–∞ –∏ –∫–æ–º–∞–Ω–¥–∞)
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–Ω–µ—Ç–∞—Ö –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω—è—Ö DCA

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

- `DCA_DYNAMIC_TP_UPDATE_REPORT.md` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DCA —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞–º–∏
- `DCA_TP_SYNCHRONIZATION_FIX_REPORT.md` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ TP –≤ DCA —Å–∏–≥–Ω–∞–ª–∞—Ö
- `DYNAMIC_PARAMETERS_ACCEPTED_SIGNALS_FIX_REPORT.md` - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –ø—Ä–∏–Ω—è—Ç—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö
- `AUTO_CLOSE_POSITIONS_FIX.md` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ TP2

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ DCA –≤ `telegram_handlers.py` –∏ `telegram_bot_trading.py`

