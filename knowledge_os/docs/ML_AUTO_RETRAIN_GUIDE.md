# ü§ñ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ü–ï–†–ï–û–ë–£–ß–ï–ù–ò–ï LIGHTGBM

## üìã –û–ü–ò–°–ê–ù–ò–ï

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç LightGBM –º–æ–¥–µ–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `trading_patterns.json`.

---

## ‚öôÔ∏è –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢

### –£—Å–ª–æ–≤–∏—è –¥–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:

1. **–í—Ä–µ–º—è**: –ü—Ä–æ—à–ª–æ –º–∏–Ω–∏–º—É–º **7 –¥–Ω–µ–π** (168 —á–∞—Å–æ–≤) —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
2. **–î–∞–Ω–Ω—ã–µ**: –ù–∞–∫–æ–ø–∏–ª–æ—Å—å –º–∏–Ω–∏–º—É–º **1000 –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

### –ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è (–∫–∞–∂–¥—ã–π —á–∞—Å)
2. üíæ –°–æ–∑–¥–∞–µ—Ç backup —Ç–µ–∫—É—â–∏—Ö –º–æ–¥–µ–ª–µ–π
3. üéØ –ü–µ—Ä–µ–æ–±—É—á–∞–µ—Ç –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏ —Ä–µ–≥—Ä–µ—Å—Å–æ—Ä
4. üíæ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
5. üìä –õ–æ–≥–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

---

## üöÄ –ó–ê–ü–£–°–ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫:

–°–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ `main.py`:

```python
# –í main.py –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–¥–∞—á–∞:
lightgbm_retrain_task = asyncio.create_task(start_lightgbm_auto_retrain())
```

**–õ–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:**
```
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ LightGBM –∑–∞–ø—É—â–µ–Ω–æ
  ‚è∞ –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: –∫–∞–∂–¥—ã–µ 168 —á–∞—Å–æ–≤ (7 –¥–Ω–µ–π)
  üìä –ú–∏–Ω–∏–º—É–º –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: 1000
  üìà –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: 39968
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–∫–∞–∂–¥—ã–π —á–∞—Å):

```
‚è∏Ô∏è –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è: –ø—Ä–æ—à–ª–æ 120.5 —á–∞—Å–æ–≤ (–Ω—É–∂–Ω–æ 168)
‚è∏Ô∏è –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è: —Ç–æ–ª—å–∫–æ 450 –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (–Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 1000)
```

### –õ–æ–≥–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:

```
‚úÖ –£—Å–ª–æ–≤–∏—è –¥–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã: –ø—Ä–æ—à–ª–æ 175.2 —á–∞—Å–æ–≤, 1250 –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
üîÑ –ù–∞—á–∏–Ω–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ LightGBM –º–æ–¥–µ–ª–µ–π...
üíæ Backup —Å–æ–∑–¥–∞–Ω: 20250118_234500
‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ–±—É—á–µ–Ω:
  ROC-AUC: 1.0000
  Accuracy: 0.9972
  F1-Score: 0.9920
‚úÖ –†–µ–≥—Ä–µ—Å—Å–æ—Ä –æ–±—É—á–µ–Ω:
  MAE: 0.0521%
  R¬≤: 0.9639
  Correlation: 0.9819
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!
```

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ê

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤ `lightgbm_auto_retrain.py`):

```python
LightGBMAutoRetrain(
    retrain_interval_hours=168,  # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è (7 –¥–Ω–µ–π)
    min_new_patterns=1000,        # –ú–∏–Ω–∏–º—É–º –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
    model_dir="ai_learning_data/lightgbm_models",
    patterns_file="ai_learning_data/trading_patterns.json"
)
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞:

**–î–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç–æ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ 3 –¥–Ω—è):
```python
retrain_interval_hours=72  # 3 –¥–Ω—è
```

**–î–ª—è –±–æ–ª–µ–µ —Ä–µ–¥–∫–æ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ 2 –Ω–µ–¥–µ–ª–∏):
```python
retrain_interval_hours=336  # 14 –¥–Ω–µ–π
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–∏–Ω–∏–º—É–º–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:

**–î–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
```python
min_new_patterns=2000  # –ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 2000 –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
```

**–î–ª—è –±–æ–ª–µ–µ –º—è–≥–∫–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
```python
min_new_patterns=500   # –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 500 –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
```

---

## üíæ BACKUP –ú–û–î–ï–õ–ï–ô

–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ–º —Å–æ–∑–¥–∞–µ—Ç—Å—è backup:

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
```
ai_learning_data/lightgbm_models/backups/
  ‚îú‚îÄ‚îÄ classifier.txt.backup_20250118_234500
  ‚îú‚îÄ‚îÄ regressor.txt.backup_20250118_234500
  ‚îî‚îÄ‚îÄ metadata.json.backup_20250118_234500
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup:**
```bash
# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é –º–æ–¥–µ–ª—å
cp ai_learning_data/lightgbm_models/backups/classifier.txt.backup_20250118_234500 \
   ai_learning_data/lightgbm_models/classifier.txt
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –°–¢–ê–¢–£–°–ê

### –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö:
```bash
cat ai_learning_data/lightgbm_models/metadata.json | grep last_retrain_time
```

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:

```bash
python3 -c "import json; data=json.load(open('ai_learning_data/trading_patterns.json')); print(len(data))"
```

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### 1. **–†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ**
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –∫–∞–∂–¥—ã–π —á–∞—Å
- –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

### 2. **Fail-Safe**
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è —Å—Ç–∞—Ä—ã–µ –º–æ–¥–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è
- –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏
- –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

### 3. **–†–µ—Å—É—Ä—Å—ã**
- –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç ~5-10 —Å–µ–∫—É–Ω–¥
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç CPU –≤–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏

### 4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
- –ù–æ–≤—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- ‚úÖ –ò–Ω—Ç–µ—Ä–≤–∞–ª: **7 –¥–Ω–µ–π** (168 —á–∞—Å–æ–≤) - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
- ‚úÖ –ú–∏–Ω–∏–º—É–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: **1000** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Ä–∞–∑ –≤ –¥–µ–Ω—å

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚ö° –ò–Ω—Ç–µ—Ä–≤–∞–ª: **24 —á–∞—Å–∞** (1 –¥–µ–Ω—å) - –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚ö° –ú–∏–Ω–∏–º—É–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤: **500** - –¥–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç–æ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è:

- ‚úÖ –ú–æ–¥–µ–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –∫ –Ω–æ–≤—ã–º —Ä—ã–Ω–æ—á–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º
- ‚úÖ –£–ª—É—á—à–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ —É–ª—É—á—à–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç!
**–î–∞—Ç–∞**: 2025-01-XX

