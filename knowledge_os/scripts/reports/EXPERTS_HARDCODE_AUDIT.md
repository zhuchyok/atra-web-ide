# üîç –ê–£–î–ò–¢ –ñ–Å–°–¢–ö–û –ó–ê–ö–û–î–ò–†–û–í–ê–ù–ù–´–• –°–ü–ò–°–ö–û–í –≠–ö–°–ü–ï–†–¢–û–í

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 2026-01-14  
**–ü—Ä–æ–≤–µ–¥—ë–Ω:** –ê—Ä—Ç—ë–º (Performance Lead, Marketing)  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –î–ï–ô–°–¢–í–ò–ô

---

## üìä EXECUTIVE SUMMARY

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –§–∞–π–ª–æ–≤ —Å —Ö–∞—Ä–¥–∫–æ–¥–∞–º–∏ | 7 |
| –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–æ—á–µ–∫ | 12 |
| –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –≤ —Ö–∞—Ä–¥–∫–æ–¥–∞—Ö | ~10 |
| –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ | 5 —Ñ–∞–π–ª–æ–≤ |

---

## üî¥ –ù–ê–ô–î–ï–ù–ù–´–ï –•–ê–†–î–ö–û–î–´

### 1. telegram_gateway.py (–ö–†–ò–¢–ò–ß–ù–û)

**–§–∞–π–ª:** `/root/knowledge_os/app/telegram_gateway.py`  
**–°—Ç—Ä–æ–∫–∏:** 293-296

```python
if lower_text.startswith('–≤–∏–∫—Ç–æ—Ä–∏—è'): 
    target_name = '–í–∏–∫—Ç–æ—Ä–∏—è'; user_text = user_text[8:].strip(', ').strip()
elif lower_text.startswith('–≤–ª–∞–¥–∏–º–∏—Ä'): 
    target_name = '–í–ª–∞–¥–∏–º–∏—Ä'; user_text = user_text[8:].strip(', ').strip()
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–ª—å–∫–æ 2 —ç–∫—Å–ø–µ—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ Telegram, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑ –ë–î:
```python
async def get_expert_prefixes():
    experts = await get_available_experts()
    return {e['name'].lower(): e['name'] for e in experts}
```

---

### 2. telegram_simple.py (–ö–†–ò–¢–ò–ß–ù–û)

**–§–∞–π–ª:** `/root/knowledge_os/app/telegram_simple.py`  
**–°—Ç—Ä–æ–∫–∏:** 127-141, 187-200

```python
# –•–∞—Ä–¥–∫–æ–¥ –¥–µ—Ñ–æ–ª—Ç–∞ –µ—Å–ª–∏ –ë–î –ø—É—Å—Ç–∞
expert = {
    'name': '–í–∏–∫—Ç–æ—Ä–∏—è', 
    'system_prompt': '–í—ã –í–∏–∫—Ç–æ—Ä–∏—è, –ì–ª–∞–≤–Ω—ã–π –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä...',
    ...
}
```

–∏ –ø–∞—Ä—Å–∏–Ω–≥ –∏–º—ë–Ω (—Å—Ç—Ä–æ–∫–∏ 187-200):
```python
if any(x in lower_text for x in ['–≤–∏–∫—Ç–æ—Ä–∏—è', '–≤–∏–∫–∞']): 
    target_name = '–í–∏–∫—Ç–æ—Ä–∏—è'
elif any(x in lower_text for x in ['–≤–ª–∞–¥–∏–º–∏—Ä', '–≤–æ–≤–∞']): 
    target_name = '–í–ª–∞–¥–∏–º–∏—Ä'
elif any(x in lower_text for x in ['–¥–º–∏—Ç—Ä–∏–π', '–¥–∏–º–∞']): 
    target_name = '–î–º–∏—Ç—Ä–∏–π'
elif any(x in lower_text for x in ['–º–∞—Ä–∏—è', '–º–∞—à–∞']): 
    target_name = '–ú–∞—Ä–∏—è'
```

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –¢–æ–ª—å–∫–æ 4 —ç–∫—Å–ø–µ—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã
- –•–∞—Ä–¥–∫–æ–¥ –ø—Ä–æ–º–ø—Ç–∞ –º–æ–∂–µ—Ç —É—Å—Ç–∞—Ä–µ—Ç—å
- –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –ë–î

---

### 3. expert_validator.py (–î–û–ü–£–°–¢–ò–ú–û)

**–§–∞–π–ª:** `/root/knowledge_os/app/expert_validator.py`  
**–°—Ç—Ä–æ–∫–∏:** 65-81

```python
FALLBACK_EXPERTS: List[str] = [
    "–î–º–∏—Ç—Ä–∏–π",  # Engineer
    "–ú–∞—Ä–∏—è",    # Analyst  
    "–ú–∞–∫—Å–∏–º",   # Developer
]

EXTENDED_FALLBACK_EXPERTS: List[str] = [
    "–î–º–∏—Ç—Ä–∏–π",
    "–ú–∞—Ä–∏—è", 
    "–ú–∞–∫—Å–∏–º",
    "–°–µ—Ä–≥–µ–π",
    "–ï–ª–µ–Ω–∞",
]

COORDINATOR_NAMES: Set[str] = {"–í–∏–∫—Ç–æ—Ä–∏—è"}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–û–ü–£–°–¢–ò–ú–û - —ç—Ç–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ë–î.
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

---

### 4. swarm_orchestrator.py (–î–û–ü–£–°–¢–ò–ú–û)

**–§–∞–π–ª:** `/root/knowledge_os/app/swarm_orchestrator.py`  
**–°—Ç—Ä–æ–∫–∞:** 46

```python
FALLBACK_EXPERTS = ["–î–º–∏—Ç—Ä–∏–π", "–ú–∞—Ä–∏—è", "–ú–∞–∫—Å–∏–º"]
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–û–ü–£–°–¢–ò–ú–û - –ª–æ–∫–∞–ª—å–Ω—ã–π fallback –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ.

---

### 5. distillation_engine.py (–¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø)

**–§–∞–π–ª:** `/root/knowledge_os/app/distillation_engine.py`  
**–°—Ç—Ä–æ–∫–∞:** 64

```python
WHERE (l.feedback_score >= $1 OR (e.name IN ('–í–∏–∫—Ç–æ—Ä–∏—è', '–î–º–∏—Ç—Ä–∏–π', '–ú–∞—Ä–∏—è') AND l.feedback_score IS NULL))
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, –∏—Ö –æ—Ç–≤–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏—é.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
```python
WHERE (l.feedback_score >= $1 
       OR (e.role IN ('Team Lead', 'Director', 'Senior Engineer') 
           AND l.feedback_score IS NULL))
```

---

### 6. check_experts_count.py (–î–û–ü–£–°–¢–ò–ú–û)

**–§–∞–π–ª:** `/root/knowledge_os/scripts/check_experts_count.py`  
**–°—Ç—Ä–æ–∫–∏:** 68-70, 92-97

```python
FALLBACK_EXPERTS = ["–î–º–∏—Ç—Ä–∏–π", "–ú–∞—Ä–∏—è", "–ú–∞–∫—Å–∏–º"]
COORDINATOR_NAMES = {"–í–∏–∫—Ç–æ—Ä–∏—è"}

KNOWN_EXPERT_NAMES = {
    '–í–∏–∫—Ç–æ—Ä–∏—è', '–î–º–∏—Ç—Ä–∏–π', '–ò–≥–æ—Ä—å', '–°–µ—Ä–≥–µ–π', '–ê–Ω–Ω–∞', ...
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–û–ü–£–°–¢–ò–ú–û - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –Ω–µ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å KNOWN_EXPERT_NAMES –∏–∑ –ë–î.

---

## ‚ö†Ô∏è –†–ê–°–•–û–ñ–î–ï–ù–ò–Ø –° –ë–î

> **–í–ê–ñ–ù–û:** –î–ª—è —Ç–æ—á–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î.
> –°–ø–∏—Å–æ–∫ –Ω–∏–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–º.

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ —Ö–∞—Ä–¥–∫–æ–¥–∞—Ö:
- –≠–∫—Å–ø–µ—Ä—Ç—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞
- –≠–∫—Å–ø–µ—Ä—Ç—ã —Å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
- –ù–æ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ã –æ—Ç–¥–µ–ª–æ–≤

### –î–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
cd /root/knowledge_os
python scripts/check_experts_count.py --verbose --no-confirm
```

---

## üìã –ü–õ–ê–ù –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö–†–ò–¢–ò–ß–ù–û):

#### telegram_gateway.py
```python
# –ë–´–õ–û:
if lower_text.startswith('–≤–∏–∫—Ç–æ—Ä–∏—è'): ...
elif lower_text.startswith('–≤–ª–∞–¥–∏–º–∏—Ä'): ...

# –°–¢–ê–ù–ï–¢:
expert_aliases = await get_expert_aliases_from_db()
# expert_aliases = {'–≤–∏–∫—Ç–æ—Ä–∏—è': '–í–∏–∫—Ç–æ—Ä–∏—è', '–≤–∏–∫–∞': '–í–∏–∫—Ç–æ—Ä–∏—è', '–≤–ª–∞–¥–∏–º–∏—Ä': '–í–ª–∞–¥–∏–º–∏—Ä', ...}
for alias, name in expert_aliases.items():
    if lower_text.startswith(alias):
        target_name = name
        user_text = user_text[len(alias):].strip(', ').strip()
        break
```

#### telegram_simple.py
–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∞–ª–∏–∞—Å–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ.

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–ê–ñ–ù–û):

#### distillation_engine.py
–ó–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –∏–º—ë–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–µ–π:
```python
WHERE (l.feedback_score >= $1 
       OR (e.role ILIKE '%Lead%' OR e.role ILIKE '%Director%')
       AND l.feedback_score IS NULL)
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ù–ò–ó–ö–ò–ô):

- –î–æ–±–∞–≤–∏—Ç—å –≤ expert_validator.py –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é fallback-—Å–ø–∏—Å–∫–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å KNOWN_EXPERT_NAMES –≤ check_experts_count.py

---

## üîß –°–ö–†–ò–ü–¢–´ –í–ê–õ–ò–î–ê–¶–ò–ò

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç:
```bash
python /root/knowledge_os/scripts/check_experts_count.py --verbose
```

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ SQL:
```sql
-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
SELECT COUNT(*) FROM experts;

-- –°–ø–∏—Å–æ–∫ –∏–º—ë–Ω
SELECT name, role, department FROM experts ORDER BY name;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∏–º—ë–Ω
SELECT name FROM experts WHERE name NOT IN ('–í–∏–∫—Ç–æ—Ä–∏—è', '–î–º–∏—Ç—Ä–∏–π', '–ú–∞—Ä–∏—è', '–ú–∞–∫—Å–∏–º', '–í–ª–∞–¥–∏–º–∏—Ä');
```

### –ù–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
–°–º. —Ñ–∞–π–ª: `/root/knowledge_os/scripts/quick_validate_experts.py`

---

## üìù –ü–†–û–¶–ï–°–° –í–ï–†–ò–§–ò–ö–ê–¶–ò–ò –î–õ–Ø –ë–£–î–£–©–ò–• –ü–†–û–í–ï–†–û–ö

### –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 1 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü):

1. **–ó–∞–ø—É—Å–∫ check_experts_count.py:**
   ```bash
   python scripts/check_experts_count.py --verbose --no-confirm
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—á—ë—Ç–∞:**
   ```bash
   cat scripts/reports/experts_check_report.txt
   ```

3. **–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π:**
   - –ï—Å–ª–∏ —ç–∫—Å–ø–µ—Ä—Ç –µ—Å—Ç—å –≤ –ë–î, –Ω–æ –Ω–µ—Ç –≤ —Ö–∞—Ä–¥–∫–æ–¥–µ ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å
   - –ï—Å–ª–∏ —ç–∫—Å–ø–µ—Ä—Ç –µ—Å—Ç—å –≤ —Ö–∞—Ä–¥–∫–æ–¥–µ, –Ω–æ –Ω–µ—Ç –≤ –ë–î ‚Üí —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ–¥–∞ –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ë–î

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞ –≤ –ë–î:

1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É experts
2. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å FALLBACK_EXPERTS
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ telegram_gateway –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏

### CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

```yaml
# .github/workflows/experts_check.yml
- name: Validate Expert Lists
  run: python scripts/check_experts_count.py --no-confirm --sql-only
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ó–ê–í–ï–†–®–ï–ù–ò–Ø –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

- [ ] telegram_gateway.py - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∏–º—ë–Ω
- [ ] telegram_simple.py - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∏–º—ë–Ω  
- [ ] distillation_engine.py - –∑–∞–º–µ–Ω–∞ –∏–º—ë–Ω –Ω–∞ —Ä–æ–ª–∏
- [ ] expert_validator.py - –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- [ ] CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á—ë—Ç–∞:** –ê—Ä—Ç—ë–º (Performance Lead)  
**–ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python scripts/check_experts_count.py --help`
