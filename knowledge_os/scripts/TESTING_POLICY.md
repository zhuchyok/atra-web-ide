# üìã TESTING POLICY - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** November 23, 2025  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –ê–Ω–Ω–∞ (QA Engineer)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ê–ö–¢–ò–í–ù–û**

---

## üéØ –û–°–ù–û–í–ù–û–ï –ü–†–ê–í–ò–õ–û

### ‚úÖ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è**

**–ü—Ä–∞–≤–∏–ª–æ:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª—é–±–æ–≥–æ –Ω–æ–≤–æ–≥–æ Python –º–æ–¥—É–ª—è (`.py` —Ñ–∞–π–ª–∞) **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª —Å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏.

---

## üìã –ü–†–ê–í–ò–õ–ê –ò –ü–†–û–¶–ï–°–°

### 1. –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ —Ç–µ—Å—Ç—ã
**–ê–Ω–Ω–∞ (QA Engineer)** ‚Äî –≥–ª–∞–≤–Ω—ã–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞:
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏ > 80%
- –ü—Ä–æ–≤–µ—Ä–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤
- Code review —Ç–µ—Å—Ç–æ–≤

### 2. –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç—ã

#### ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è:
- **–ù–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π** (–ª—é–±–æ–π –Ω–æ–≤—ã–π `.py` —Ñ–∞–π–ª)
- **–ù–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤** (–µ—Å–ª–∏ –∫–ª–∞—Å—Å –∫—Ä–∏—Ç–∏—á–µ–Ω)
- **–ù–æ–≤—ã—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π** (API endpoints, core functions)
- **–ò–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö** (signal_live.py, risk_manager.py, etc.)

#### ‚ö†Ô∏è –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è:
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ (—Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã)
- –ù–æ–≤—ã—Ö —Ñ–∏—á –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª—è—Ö

### 3. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç–∞–º

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ > 70% –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏/–º–µ—Ç–æ–¥—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (100% pass rate)
- ‚úÖ –¢–µ—Å—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

#### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ > 80% –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è edge cases
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è error handling
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è fallback behavior

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

#### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:
- –§–∞–π–ª —Ç–µ—Å—Ç–æ–≤: `test_<module_name>.py`
- –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `tests/unit/test_<module_name>.py`
- –ö–ª–∞—Å—Å —Ç–µ—Å—Ç–æ–≤: `Test<ClassName>` –∏–ª–∏ `Test<ModuleName>`

#### –ü—Ä–∏–º–µ—Ä:
```python
# –ú–æ–¥—É–ª—å: structured_logging.py
# –¢–µ—Å—Ç: tests/unit/test_structured_logging.py

class TestStructuredLogging:
    def test_configure_structured_logging(self):
        ...
```

### 5. –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è
```bash
# –°–æ–∑–¥–∞—ë—Ç–µ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å
touch new_module.py
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
```bash
# –°—Ä–∞–∑—É —Å–æ–∑–¥–∞—ë—Ç–µ —Ç–µ—Å—Ç—ã
touch tests/unit/test_new_module.py
```

#### –®–∞–≥ 3: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- –ú–∏–Ω–∏–º—É–º: —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ò–¥–µ–∞–ª—å–Ω–æ: —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π + edge cases

#### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ —Ç–µ—Å—Ç—ã
pytest tests/unit/test_new_module.py -v

# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
pytest tests/unit/test_new_module.py --cov=new_module --cov-report=term-missing
```

#### –®–∞–≥ 5: Commit
```bash
# –ö–æ–º–º–∏—Ç–∏—Ç–µ –º–æ–¥—É–ª—å –ò —Ç–µ—Å—Ç—ã –≤–º–µ—Å—Ç–µ
git add new_module.py tests/unit/test_new_module.py
git commit -m "feat: Add new_module with tests"
```

---

## üîß –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø

### Pre-commit Hook (TODO)
–°–æ–∑–¥–∞—Ç—å pre-commit hook –∫–æ—Ç–æ—Ä—ã–π:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
3. –ë–ª–æ–∫–∏—Ä—É–µ—Ç commit –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

### CI/CD Check (TODO)
–î–æ–±–∞–≤–∏—Ç—å –≤ GitHub Actions:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ PR
2. –ü—Ä–æ–≤–µ—Ä–∫—É –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫—É merge –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

---

## üìä –ú–ï–¢–†–ò–ö–ò –ò –û–¢–ß–Å–¢–ù–û–°–¢–¨

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç (–ê–Ω–Ω–∞):
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (–æ–±—â–µ–µ –∏ –ø–æ –º–æ–¥—É–ª—è–º)
- –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—Ö–æ–¥—è—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

### –¶–µ–ª–∏:
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ > 80% –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ > 70% –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- ‚úÖ 100% –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π –∏–º–µ—é—Ç —Ç–µ—Å—Ç—ã
- ‚úÖ 100% pass rate –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

---

## üéØ –ü–†–ò–ú–ï–†–´

### ‚úÖ –•–û–†–û–®–ò–ô –ü–†–ò–ú–ï–†:
```bash
# 1. –°–æ–∑–¥–∞–ª–∏ –º–æ–¥—É–ª—å
touch prometheus_metrics.py

# 2. –°–†–ê–ó–£ —Å–æ–∑–¥–∞–ª–∏ —Ç–µ—Å—Ç—ã
touch tests/unit/test_prometheus_metrics.py

# 3. –ù–∞–ø–∏—Å–∞–ª–∏ –∫–æ–¥ –∏ —Ç–µ—Å—Ç—ã
# 4. –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏–µ
pytest tests/unit/test_prometheus_metrics.py --cov=prometheus_metrics

# 5. –ó–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –≤–º–µ—Å—Ç–µ
git add prometheus_metrics.py tests/unit/test_prometheus_metrics.py
git commit -m "feat: Add Prometheus metrics with tests"
```

### ‚ùå –ü–õ–û–•–û–ô –ü–†–ò–ú–ï–†:
```bash
# 1. –°–æ–∑–¥–∞–ª–∏ –º–æ–¥—É–ª—å
touch new_module.py

# 2. –ù–ï —Å–æ–∑–¥–∞–ª–∏ —Ç–µ—Å—Ç—ã (‚ùå –ù–ê–†–£–®–ï–ù–ò–ï –ü–†–ê–í–ò–õ–ê!)

# 3. –ó–∞–∫–æ–º–º–∏—Ç–∏–ª–∏ –±–µ–∑ —Ç–µ—Å—Ç–æ–≤
git add new_module.py
git commit -m "feat: Add new module"  # ‚ùå –ë–ï–ó –¢–ï–°–¢–û–í!
```

---

## üö® –ù–ê–†–£–®–ï–ù–ò–Ø –ü–†–ê–í–ò–õ–ê

### –ï—Å–ª–∏ –º–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω –±–µ–∑ —Ç–µ—Å—Ç–æ–≤:
1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ** —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç—ã
2. –î–æ–±–∞–≤–∏—Ç—å –≤ TODO —Å–ø–∏—Å–æ–∫
3. –ê–Ω–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç:
1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ** –∏—Å–ø—Ä–∞–≤–∏—Ç—å
2. –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –∫–æ–¥ —Å –ø–∞–¥–∞—é—â–∏–º–∏ —Ç–µ—Å—Ç–∞–º–∏
3. –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ –±–∞–≥–∞ - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥, –Ω–µ —É–¥–∞–ª—è—Ç—å —Ç–µ—Å—Ç

---

## üìù –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `tests/unit/test_<module_name>.py`
- [ ] –í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç —Ç–µ—Å—Ç—ã
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`pytest tests/unit/test_<module_name>.py`)
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ > 70% (`--cov` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç > 70%)
- [ ] –¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –¢–µ—Å—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã (–Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–æ–≤)
- [ ] –¢–µ—Å—Ç—ã –∏ –º–æ–¥—É–ª—å –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤–º–µ—Å—Ç–µ

---

## ‚úÖ –°–¢–ê–¢–£–°

**–ü—Ä–∞–≤–∏–ª–æ:** ‚úÖ **–ê–ö–¢–ò–í–ù–û**  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –ê–Ω–Ω–∞ (QA Engineer)  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü—Ä–∏ –∫–∞–∂–¥–æ–º PR  
**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:** TODO (pre-commit hook)

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

- [pytest documentation](https://docs.pytest.org/)
- [Testing Best Practices](./TESTING.md)
- [Coverage Report](./scripts/UNIT_TESTS_COMPLETE.md)

---

**–°–æ–∑–¥–∞–Ω–æ:** –ê–Ω–Ω–∞ (QA Engineer)  
**–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ:** –í–∏–∫—Ç–æ—Ä (Team Lead)  
**–î–∞—Ç–∞:** November 23, 2025

